!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(window,(function(){return function(e){function t(t){for(var r,o,d=t[0],s=t[1],i=t[2],c=0,u=[];c<d.length;c++)o=d[c],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&u.push(l[o][0]),l[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(m&&m(t);u.length;)u.shift()();return n.push.apply(n,i||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,d=1;d<a.length;d++){var s=a[d];0!==l[s]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},l={1:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var d=window.webpackJsonp=window.webpackJsonp||[],s=d.push.bind(d);d.push=t,d=d.slice();for(var i=0;i<d.length;i++)t(d[i]);var m=s;return n.push([21,0]),a()}([,,function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.subscriberList={}}Object.defineProperty(t,"__esModule",{value:!0});var n=new(function(e,t,a){t&&r(e.prototype,t)}(l,[{key:"subscribe",value:function(e,t){this.subscriberList[e]=t}},{key:"sendMessage",value:function(e,t){if(Array.isArray(e)||(e=[e]),"broadcast"===e[0])this.subscriberList.forEach((function(e,a){e({type:"broadcast",message:t})}));else for(var a in this.subscriberList)0<=e.indexOf(a)&&this.subscriberList[a](t)}}]),l);t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l,n=(l=a(2))&&l.__esModule?l:{default:l};function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.GlewlwydApiPrefix="",this.GlewlwydApiPrefixSub=""}var d=new(function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(o,[{key:"setConfig",value:function(e){this.GlewlwydApiPrefix=e}},{key:"getConfig",value:function(e){return this.GlewlwydApiPrefix}},{key:"setConfigSub",value:function(e){this.GlewlwydApiPrefixSub=e}},{key:"getConfigSub",value:function(e){return this.GlewlwydApiPrefixSub}},{key:"request",value:function(e,t,a){var r=1<arguments.length&&void 0!==t?t:"GET",l=2<arguments.length&&void 0!==a&&a;return l&&"GET"!==r?$.ajax({method:r,url:e,data:JSON.stringify(l),contentType:"application/json; charset=utf-8"}):$.ajax({method:r,url:e})}},{key:"glewlwydRequest",value:function(e,t,a,r){var l=1<arguments.length&&void 0!==t?t:"GET",o=2<arguments.length&&void 0!==a&&a,d=3<arguments.length&&void 0!==r&&r;return this.request(this.GlewlwydApiPrefix+e,l,o).fail((function(e){d&&401===e.status&&n.default.sendMessage("App",{type:"loggedIn",message:!1})}))}},{key:"glewlwydRequestSub",value:function(e,t,a){var r=1<arguments.length&&void 0!==t?t:"GET",l=2<arguments.length&&void 0!==a&&a;return this.request(this.GlewlwydApiPrefixSub+e,r,l)}}]),o);t.default=d},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=d(l),o=d(a(2));function d(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(i,[{key:"timeoutClose",value:function(e){var t=this;setTimeout((function(){t.close(e)}),5e3)}},{key:"close",value:function(e){var t=this,a=this.state.message;a.forEach((function(r,l){r.id===e&&(a.splice(l,1),t.setState({message:a}))}))}},{key:"render",value:function(){var e=this,t=[];return this.state.message.forEach((function(a,r){var l;l="success"===a.type?n.default.createElement("strong",{className:"mr-auto"},n.default.createElement("span",{className:"badge badge-success btn-icon"},n.default.createElement("i",{className:"fas fa-check-circle"})),"Glewlwyd"):"danger"===a.type?n.default.createElement("strong",{className:"mr-auto"},n.default.createElement("span",{className:"badge badge-danger btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})),"Glewlwyd"):"warning"===a.type?n.default.createElement("strong",{className:"mr-auto"},n.default.createElement("span",{className:"badge badge-warning btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})),"Glewlwyd"):n.default.createElement("strong",{className:"mr-auto"},n.default.createElement("span",{className:"badge badge-info btn-icon"},n.default.createElement("i",{className:"fas fa-info-circle"})),"Glewlwyd"),t.push(n.default.createElement("div",{className:"toast-container",style:{top:85+90*r,right:5},key:r},n.default.createElement("div",{className:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},n.default.createElement("div",{className:"toast-header"},l,n.default.createElement("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:function(){return e.close(a.id)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))),n.default.createElement("div",{className:"toast-body"},a.message))))})),n.default.createElement("div",null,t)}}]),i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={message:[],counter:0},o.default.subscribe("Notification",(function(e){if(e.type){var a=t.state.message;a.push({type:e.type,message:e.message,id:t.state.counter}),t.setState({message:a,counter:t.state.counter+1},(function(){t.timeoutClose(t.state.counter-1)}))}})),t.close=t.close.bind(t),t.timeoutClose=t.timeoutClose.bind(t),t}t.default=s},,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=d(l),o=d(a(1));function d(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(i,[{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.title,message:e.message,cb:e.callback})}},{key:"closeModal",value:function(e,t){this.state.cb&&this.state.cb(t)}},{key:"render",value:function(){var e=this;return n.default.createElement("div",{className:"modal fade",id:"confirmModal",tabIndex:"-1",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},n.default.createElement("div",{className:"modal-dialog",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("h5",{className:"modal-title",id:"confirmModalLabel"},this.state.title),n.default.createElement("button",{type:"button",className:"close","aria-label":o.default.t("modal.close"),onClick:function(t){return e.closeModal(t,!1)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))),n.default.createElement("div",{className:"modal-body"},this.state.message),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.closeModal(t,!1)}},o.default.t("modal.close")),n.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.closeModal(t,!0)}},o.default.t("modal.ok"))))))}}]),i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={title:e.title,message:e.message,cb:e.callback},t.closeModal=t.closeModal.bind(t),t}t.default=s},,,,,,,,,function(e,t,a){"use strict";var r=m(a(0)),l=m(a(9)),n=m(a(1)),o=m(a(10)),d=m(a(11)),s=m(a(3)),i=m(a(33));function m(e){return e&&e.__esModule?e:{default:e}}function c(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}try{n.default.use(o.default).use(d.default).init({fallbackLng:"en",ns:["translations"],defaultNS:"translations",backend:{loadPath:"locales/{{lng}}/{{ns}}.json"}}).then((function(){s.default.request("config.json").then((function(e){e.lang||(e.lang=["en","fr","nl"]),s.default.request(e.GlewlwydUrl+"config/").then((function(t){s.default.setConfig(e.GlewlwydUrl+t.api_prefix);var a=Object.assign({params:{scope:c("scope"),client_id:c("client_id"),callback_url:c("callback_url")}},e,t);l.default.render(r.default.createElement(i.default,{config:a}),document.getElementById("root"))})).fail((function(e){l.default.render(r.default.createElement(i.default,{config:!1}),document.getElementById("root"))}))}))}))}catch(e){$("#root").html('<div class="alert alert-danger" role="alert"><i class="fas fa-exclamation-triangle"></i><span class="btn-icon-right">You must use a browser compatible with Glewlwyd SSO</span></div>')}},,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=k(l),o=k(a(3)),d=k(a(2)),s=k(a(6)),i=k(a(1)),m=k(a(12)),c=k(a(34)),u=k(a(35)),f=k(a(36)),p=k(a(37)),h=k(a(38)),g=k(a(39)),b=k(a(40)),y=k(a(41)),v=k(a(42)),E=k(a(43)),N=k(a(44)),w=k(a(55));function k(e){return e&&e.__esModule?e:{default:e}}var C=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(M,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(M,[{key:"fetchApi",value:function(){var e=this;o.default.glewlwydRequest("/profile_list").then((function(t){e.setState({profileList:t},(function(){e.fetchUsers().then((function(){e.setState({invalidCredentialMessage:!1},(function(){e.fetchClients().always((function(){e.fetchScopes()})),e.fetchModTypes(),e.fetchUserMods(),e.fetchClientMods(),e.fetchSchemeMods(),e.fetchPlugins(),e.fetchAllScopes()}))})).fail((function(t){e.setState({modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[],invalidCredentialMessage:!0})}))}))})).fail((function(t){e.setState({invalidCredentialMessage:!0},(function(){e.setState({modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]},(function(){401===t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.requires-admin-scope")}):d.default.sendMessage("Notification",{type:"danger",message:i.default.t("error-api-connect")})}))}))}))}},{key:"fetchUsers",value:function(){var e=this;return o.default.glewlwydRequest("/user?offset="+this.state.users.offset+"&limit="+this.state.users.limit+(this.state.users.searchPattern?"&pattern="+this.state.users.searchPattern:"")).then((function(t){var a=e.state.users;a.list=t,a.pattern=e.state.config.pattern.user,e.setState({users:a,loggedIn:!0})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):(d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.requires-admin-scope")}),e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]}))}))}},{key:"fetchClients",value:function(){var e=this;return o.default.glewlwydRequest("/client?offset="+this.state.clients.offset+"&limit="+this.state.clients.limit+(this.state.clients.searchPattern?"&pattern="+this.state.clients.searchPattern:"")).then((function(t){var a=e.state.clients;a.list=t,a.pattern=e.state.config.pattern.client,e.setState({clients:a})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"fetchScopes",value:function(){var e=this;return o.default.glewlwydRequest("/scope?offset="+this.state.scopes.offset+"&limit="+this.state.scopes.limit+(this.state.scopes.searchPattern?"&pattern="+this.state.scopes.searchPattern:"")).then((function(t){var a=e.state.scopes;a.list=t,e.setState({scopes:a})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"fetchAllScopes",value:function(){var e=this;return o.default.glewlwydRequest("/scope?limit=0").then((function(t){var a=[],r=e.state.users,l=e.state.clients,n=e.state.config;t.forEach((function(e){a.push(e.name)})),r.pattern.forEach((function(e){"scope"===e.name&&(e.listElements=a)})),l.pattern.forEach((function(e){"scope"===e.name&&(e.listElements=a)})),n.scopes=t,e.setState({users:r,clients:l,config:n})}))}},{key:"fetchUserMods",value:function(){var e=this;return o.default.glewlwydRequest("/mod/user").then((function(t){e.setState({modUsers:t})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"fetchModTypes",value:function(){var e=this;return o.default.glewlwydRequest("/mod/type").then((function(t){e.setState({modTypes:t})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"fetchClientMods",value:function(){var e=this;return o.default.glewlwydRequest("/mod/client").then((function(t){e.setState({modClients:t})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"fetchSchemeMods",value:function(){var e=this;return o.default.glewlwydRequest("/mod/scheme").then((function(t){e.setState({modSchemes:t})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"fetchPlugins",value:function(){var e=this;return o.default.glewlwydRequest("/mod/plugin").then((function(t){e.setState({plugins:t})})).fail((function(t){401!==t.status?d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-fetch")}):e.setState({loggedIn:!1,modTypes:{user:[],client:[],scheme:[],plugin:[]},users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},modUsers:[],modClients:[],modSchemes:[],plugins:[]})}))}},{key:"confirmDeleteUser",value:function(e){var t=this;e?o.default.glewlwydRequest("/user/"+encodeURIComponent(this.state.curUser.username),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-user")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-user")})})).always((function(){t.fetchUsers().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"confirmDeleteClient",value:function(e){var t=this;e?o.default.glewlwydRequest("/client/"+encodeURIComponent(this.state.curClient.client_id),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-client")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-client")})})).always((function(){t.fetchUsers().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"confirmDeleteScope",value:function(e){var t=this;e?o.default.glewlwydRequest("/scope/"+encodeURIComponent(this.state.curScope.name),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-scope")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-scope")})})).always((function(){t.fetchScopes().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"confirmEditUser",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/user/"+encodeURIComponent(t.username),"PUT",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-set-user")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-set-user")})})).always((function(){a.fetchUsers().always((function(){a.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1}},(function(){$("#editRecordModal").modal("hide")}))}))})):this.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1}},(function(){$("#editRecordModal").modal("hide")}))}},{key:"confirmEditClient",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/client/"+encodeURIComponent(t.client_id),"PUT",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-set-client")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-set-client")})})).always((function(){a.fetchUsers().always((function(){a.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1}},(function(){$("#editRecordModal").modal("hide")}))}))})):this.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1}},(function(){$("#editRecordModal").modal("hide")}))}},{key:"confirmEditScope",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/scope/"+encodeURIComponent(t.name),"PUT",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-set-scope")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-set-scope")})})).always((function(){a.fetchScopes().always((function(){a.setState({scopeModal:{data:{},callback:!1}},(function(){$("#editScopeModal").modal("hide")}))}))})):this.setState({scopeModal:{data:{},callback:!1}},(function(){$("#editScopeModal").modal("hide")}))}},{key:"confirmAddUser",value:function(e,t){var a=this;if(e){var r=t.source?"?source="+t.source:"";o.default.glewlwydRequest("/user/"+r,"POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-user")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-user")})})).always((function(){a.fetchUsers().always((function(){a.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1,add:!1}},(function(){$("#editRecordModal").modal("hide")}))}))}))}else this.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1,add:!1}},(function(){$("#editRecordModal").modal("hide")}))}},{key:"confirmAddClient",value:function(e,t){var a=this;if(e){var r=t.source?"?source="+t.source:"";o.default.glewlwydRequest("/client/"+r,"POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-client")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-client")})})).always((function(){a.fetchClients().always((function(){a.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1,add:!1}},(function(){$("#editRecordModal").modal("hide")}))}))}))}else this.setState({editModal:{title:"",pattern:[],source:[],data:{},callback:!1,add:!1}},(function(){$("#editRecordModal").modal("hide")}))}},{key:"confirmAddScope",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/scope/","POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-scope")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-scope")})})).always((function(){a.fetchScopes().always((function(){a.setState({scopeModal:{data:{},callback:!1}},(function(){$("#editScopeModal").modal("hide")}))}))})):$("#editScopeModal").modal("hide")}},{key:"validateUser",value:function(e,t,a,r){var l=!0,n={};a?(null==e.password&&null==t.password||(e.password!==t.password?(l=!1,n.password=i.default.t("admin.user-password-error-match")):e.password.length&&e.password.length<this.state.passwordMinLength&&(l=!1,n.password=i.default.t("admin.user-password-error-invalid",{minLength:this.state.passwordMinLength}))),e.username?o.default.glewlwydRequest("/user/"+encodeURIComponent(e.username)).then((function(){l=!1,n.username=i.default.t("admin.user-username-exists")})).always((function(){r(l,n)})):(l=!1,n.username=i.default.t("admin.user-username-mandatory"),r(l,n))):((e.password||t.password)&&(e.password!==t.password?(l=!1,n.password=i.default.t("admin.user-password-error-match")):e.password.length&&e.password.length<this.state.passwordMinLength&&(l=!1,n.password=i.default.t("admin.user-password-error-invalid",{minLength:this.state.passwordMinLength}))),r(l,n))}},{key:"validateClient",value:function(e,t,a,r){var l=!0,n={};e.confidential&&(e.password||t.password?e.password!==t.password?(l=!1,n.password=i.default.t("admin.user-password-error-match")):e.password.length&&e.password.length<this.state.passwordMinLength&&(l=!1,n.password=i.default.t("admin.user-password-error-invalid",{minLength:this.state.passwordMinLength})):!e.password&&a&&(l=!1,n.password=i.default.t("admin.user-password-mandatory"))),a?e.client_id?o.default.glewlwydRequest("/client/"+encodeURIComponent(e.client_id)).then((function(){l=!1,n.client_id=i.default.t("admin.client-client-id-exists")})).always((function(){r(l,n)})):(l=!1,n.client_id=i.default.t("admin.client-client-id-mandatory"),r(l,n)):r(l,n)}},{key:"confirmAddUserMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/user/","POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-mod")})})).fail((function(e){400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-mod")})})).always((function(){a.fetchUserMods().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editModModal").modal("hide"),a.fetchUsers()}))}))})):$("#editModModal").modal("hide")}},{key:"confirmEditUserMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/user/"+encodeURIComponent(t.name),"PUT",t).then((function(){o.default.glewlwydRequest("/mod/user/"+encodeURIComponent(t.name)+"/reset/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-edit-mod")})})).fail((function(e){400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})).always((function(){a.fetchUserMods().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editModModal").modal("hide"),a.fetchUsers()}))}))}))})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})):$("#editModModal").modal("hide")}},{key:"confirmDeleteUserMod",value:function(e){var t=this;e?o.default.glewlwydRequest("/mod/user/"+encodeURIComponent(this.state.curMod.name),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-mod")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-mod")})})).always((function(){t.fetchUserMods().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide"),t.fetchUsers()}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"confirmAddClientMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/client/","POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-mod")})})).fail((function(e){400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-mod")})})).always((function(){a.fetchClientMods().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editModModal").modal("hide"),a.fetchClients()}))}))})):$("#editModModal").modal("hide")}},{key:"confirmEditClientMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/client/"+encodeURIComponent(t.name),"PUT",t).then((function(){o.default.glewlwydRequest("/mod/client/"+encodeURIComponent(t.name)+"/reset/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-edit-mod")})})).fail((function(e){400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})).always((function(){a.fetchClientMods().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editModModal").modal("hide"),a.fetchClients()}))}))}))})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})):$("#editModModal").modal("hide")}},{key:"confirmDeleteClientMod",value:function(e){var t=this;e?o.default.glewlwydRequest("/mod/client/"+encodeURIComponent(this.state.curMod.name),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-mod")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-mod")})})).always((function(){t.fetchClientMods().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide"),t.fetchClients()}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"confirmAddSchemeMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/scheme/","POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-mod")})})).fail((function(e){400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-mod")})})).always((function(){a.fetchSchemeMods().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editModModal").modal("hide")}))}))})):$("#editModModal").modal("hide")}},{key:"confirmEditSchemeMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/scheme/"+encodeURIComponent(t.name),"PUT",t).then((function(){o.default.glewlwydRequest("/mod/scheme/"+encodeURIComponent(t.name)+"/reset/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-edit-mod")})})).fail((function(e){400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})).always((function(){a.fetchSchemeMods()}))})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})).always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editModModal").modal("hide")}))})):$("#editModModal").modal("hide")}},{key:"confirmDeleteSchemeMod",value:function(e){var t=this;e?o.default.glewlwydRequest("/mod/scheme/"+encodeURIComponent(this.state.curMod.name),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-mod")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-mod")})})).always((function(){t.fetchSchemeMods().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"confirmAddPluginMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/plugin/","POST",t).then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-add-mod")})})).fail((function(e){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-add-mod")}),400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)})})).always((function(){a.fetchPlugins().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editPluginModal").modal("hide")}))}))})):$("#editPluginModal").modal("hide")}},{key:"confirmEditPluginMod",value:function(e,t){var a=this;e?o.default.glewlwydRequest("/mod/plugin/"+encodeURIComponent(t.name),"PUT",t).then((function(){o.default.glewlwydRequest("/mod/plugin/"+encodeURIComponent(t.name)+"/reset/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-edit-mod")})})).fail((function(e){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")}),400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)})})).always((function(){a.fetchPlugins().always((function(){a.setState({ModModal:{data:{},callback:!1,types:[]}},(function(){$("#editPluginModal").modal("hide")}))}))}))})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})):$("#editPluginModal").modal("hide")}},{key:"confirmDeletePluginMod",value:function(e){var t=this;e?o.default.glewlwydRequest("/mod/plugin/"+encodeURIComponent(this.state.curMod.name),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"success",message:i.default.t("admin.success-api-delete-mod")})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-delete-mod")})})).always((function(){t.fetchPlugins().always((function(){t.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}))})):this.setState({confirmModal:{title:"",message:""}},(function(){$("#confirmModal").modal("hide")}))}},{key:"render",value:function(){var e;return this.state.invalidCredentialMessage&&(e=n.default.createElement("div",{className:"alert alert-danger",role:"alert"},i.default.t("admin.error-credential-message"))),this.state.config?n.default.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative",minHeight:"200px"}},n.default.createElement("div",{className:"card center",id:"userCard",tabIndex:"-1",role:"dialog",style:{marginTop:"20px",marginBottom:"20px"}},n.default.createElement("div",{className:"card-header"},n.default.createElement(u.default,{active:this.state.curNav,config:this.state.config,loggedIn:this.state.loggedIn,profileList:this.state.profileList})),e,n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{id:"carouselBody",className:"carousel slide","data-ride":"carousel"},n.default.createElement("div",{className:"carousel-inner"},n.default.createElement("div",{className:"carousel-item"+("users"===this.state.curNav?" active":"")},n.default.createElement(f.default,{config:this.state.config,users:this.state.users,loggedIn:this.state.loggedIn})),n.default.createElement("div",{className:"carousel-item"+("clients"===this.state.curNav?" active":"")},n.default.createElement(p.default,{config:this.state.config,clients:this.state.clients,loggedIn:this.state.loggedIn})),n.default.createElement("div",{className:"carousel-item"+("scopes"===this.state.curNav?" active":"")},n.default.createElement(h.default,{config:this.state.config,scopes:this.state.scopes,loggedIn:this.state.loggedIn})),n.default.createElement("div",{className:"carousel-item"+("users-mod"===this.state.curNav?" active":"")},n.default.createElement(g.default,{mods:this.state.modUsers,types:this.state.modTypes.user,loggedIn:this.state.loggedIn})),n.default.createElement("div",{className:"carousel-item"+("clients-mod"===this.state.curNav?" active":"")},n.default.createElement(b.default,{mods:this.state.modClients,types:this.state.modTypes.client,loggedIn:this.state.loggedIn})),n.default.createElement("div",{className:"carousel-item"+("auth-schemes"===this.state.curNav?" active":"")},n.default.createElement(y.default,{mods:this.state.modSchemes,types:this.state.modTypes.scheme,loggedIn:this.state.loggedIn})),n.default.createElement("div",{className:"carousel-item"+("plugins"===this.state.curNav?" active":"")},n.default.createElement(v.default,{mods:this.state.plugins,types:this.state.modTypes.plugin,loggedIn:this.state.loggedIn})))))),n.default.createElement(s.default,null),n.default.createElement(m.default,{title:this.state.confirmModal.title,message:this.state.confirmModal.message,callback:this.state.confirmModal.callback}),n.default.createElement(c.default,{title:this.state.editModal.title,pattern:this.state.editModal.pattern,source:this.state.editModal.source,data:this.state.editModal.data,callback:this.state.editModal.callback,validateCallback:this.state.editModal.validateCallback,add:this.state.editModal.add}),n.default.createElement(E.default,{title:this.state.scopeModal.title,scope:this.state.scopeModal.data,add:this.state.scopeModal.add,modSchemes:this.state.modSchemes,callback:this.state.scopeModal.callback}),n.default.createElement(N.default,{title:this.state.ModModal.title,role:this.state.ModModal.role,mod:this.state.ModModal.data,add:this.state.ModModal.add,types:this.state.ModModal.types,callback:this.state.ModModal.callback,config:this.state.config}),n.default.createElement(w.default,{title:this.state.PluginModal.title,mod:this.state.PluginModal.data,add:this.state.PluginModal.add,modSchemes:this.state.modSchemes,types:this.state.PluginModal.types,callback:this.state.PluginModal.callback,config:this.state.config})):n.default.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"relative",minHeight:"200px"}},n.default.createElement("div",{className:"card center",id:"userCard",tabIndex:"-1",role:"dialog",style:{marginTop:"20px",marginBottom:"20px"}},n.default.createElement("div",{className:"card-header"},n.default.createElement("h4",null,n.default.createElement("span",{className:"badge badge-danger"},i.default.t("error-api-connect"))))))}}]),M);function M(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,e));return t.state={lang:i.default.language,config:e.config,passwordMinLength:e.config.PasswordMinLength||8,curNav:"users",loggedIn:!1,users:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},curUser:!1,clients:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},curClient:!1,scopes:{list:[],offset:0,limit:20,searchPattern:"",pattern:!1},curScope:!1,confirmModal:{title:"",message:""},editModal:{title:"",pattern:[],source:[],data:{},callback:!1,validateCallback:!1,add:!1},scopeModal:{title:"",data:{name:"",display_name:"",description:"",password_required:!0,scheme:{}},callback:!1,add:!1},curMod:!1,modUsers:[],ModModal:{title:"",role:!1,data:{},types:[],add:!1,callback:!1},modClients:[],modSchemes:[],plugins:[],PluginModal:{title:"",data:{},types:[],add:!1,callback:!1},modTypes:{user:[],client:[],scheme:[],plugin:[]},profileList:!1,invalidCredentialMessage:!1},t.fetchApi=t.fetchApi.bind(t),t.fetchUsers=t.fetchUsers.bind(t),t.confirmDeleteUser=t.confirmDeleteUser.bind(t),t.confirmEditUser=t.confirmEditUser.bind(t),t.confirmAddUser=t.confirmAddUser.bind(t),t.validateUser=t.validateUser.bind(t),t.fetchClients=t.fetchClients.bind(t),t.confirmDeleteClient=t.confirmDeleteClient.bind(t),t.confirmEditClient=t.confirmEditClient.bind(t),t.confirmAddClient=t.confirmAddClient.bind(t),t.validateClient=t.validateClient.bind(t),t.fetchScopes=t.fetchScopes.bind(t),t.fetchAllScopes=t.fetchAllScopes.bind(t),t.confirmDeleteScope=t.confirmDeleteScope.bind(t),t.confirmEditScope=t.confirmEditScope.bind(t),t.confirmAddScope=t.confirmAddScope.bind(t),t.fetchModTypes=t.fetchModTypes.bind(t),t.fetchUserMods=t.fetchUserMods.bind(t),t.fetchClientMods=t.fetchClientMods.bind(t),t.fetchSchemeMods=t.fetchSchemeMods.bind(t),t.fetchPlugins=t.fetchPlugins.bind(t),t.confirmAddUserMod=t.confirmAddUserMod.bind(t),t.confirmEditUserMod=t.confirmEditUserMod.bind(t),t.confirmDeleteUserMod=t.confirmDeleteUserMod.bind(t),t.confirmAddClientMod=t.confirmAddClientMod.bind(t),t.confirmEditClientMod=t.confirmEditClientMod.bind(t),t.confirmDeleteClientMod=t.confirmDeleteClientMod.bind(t),t.confirmAddSchemeMod=t.confirmAddSchemeMod.bind(t),t.confirmEditSchemeMod=t.confirmEditSchemeMod.bind(t),t.confirmDeleteSchemeMod=t.confirmDeleteSchemeMod.bind(t),t.confirmAddPluginMod=t.confirmAddPluginMod.bind(t),t.confirmEditPluginMod=t.confirmEditPluginMod.bind(t),t.confirmDeletePluginMod=t.confirmDeletePluginMod.bind(t),d.default.subscribe("App",(function(e){if("nav"===e.type)t.setState({curNav:e.message});else if("profile"===e.type)t.fetchApi();else if("loggedIn"===e.type)t.setState({loggedIn:e.message},(function(){console.log("loggedIn",t.state.loggedIn),t.state.loggedIn||t.fetchApi()}));else if("lang"===e.type)t.setState({lang:i.default.language});else if("delete"===e.type)if("user"===e.role){var a={title:i.default.t("admin.confirm-delete-user-title",{user:e.user.name}),message:i.default.t("admin.confirm-delete-user",{username:e.user.username,name:e.user.name}),callback:t.confirmDeleteUser};t.setState({confirmModal:a,curUser:e.user},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})}))}else"client"===e.role?(a={title:i.default.t("admin.confirm-delete-client-title",{client:e.client.name}),message:i.default.t("admin.confirm-delete-client",{clientId:e.client.client_id,name:e.client.name}),callback:t.confirmDeleteClient},t.setState({confirmModal:a,curClient:e.client},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})}))):"scope"===e.role?(a={title:i.default.t("admin.confirm-delete-scope-title",{scope:e.scope.name}),message:i.default.t("admin.confirm-delete-scope",{scope:e.scope.name,name:e.scope.display_name}),callback:t.confirmDeleteScope},t.setState({confirmModal:a,curScope:e.scope},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})}))):"userMod"===e.role?(a={title:i.default.t("admin.confirm-delete-mod-title",{mod:e.mod.display_name}),message:i.default.t("admin.confirm-delete-mod",{mod:e.mod.display_name}),callback:t.confirmDeleteUserMod},t.setState({confirmModal:a,curMod:e.mod},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})}))):"clientMod"===e.role?(a={title:i.default.t("admin.confirm-delete-mod-title",{mod:e.mod.display_name}),message:i.default.t("admin.confirm-delete-mod",{mod:e.mod.display_name}),callback:t.confirmDeleteClientMod},t.setState({confirmModal:a,curMod:e.mod},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})}))):"schemeMod"===e.role?(a={title:i.default.t("admin.confirm-delete-mod-title",{mod:e.mod.display_name}),message:i.default.t("admin.confirm-delete-mod",{mod:e.mod.display_name}),callback:t.confirmDeleteSchemeMod},t.setState({confirmModal:a,curMod:e.mod},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})}))):"plugin"===e.role&&(a={title:i.default.t("admin.confirm-delete-mod-title",{mod:e.mod.display_name}),message:i.default.t("admin.confirm-delete-mod",{mod:e.mod.display_name}),callback:t.confirmDeletePluginMod},t.setState({confirmModal:a,curMod:e.mod},(function(){$("#confirmModal").modal({keyboard:!1,show:!0})})));else if("edit"===e.type){if("user"===e.role){var r={title:i.default.t("admin.edit-user-title",{user:e.user.name}),pattern:t.state.config.pattern.user,source:t.state.modUsers,data:e.user,callback:t.confirmEditUser,validateCallback:t.validateUser};t.setState({editModal:r},(function(){$("#editRecordModal").modal({keyboard:!1,show:!0})}))}else if("client"===e.role)r={title:i.default.t("admin.edit-client-title",{client:e.client.name}),pattern:t.state.config.pattern.client,data:e.client,source:t.state.modClients,callback:t.confirmEditClient,validateCallback:t.validateClient},t.setState({editModal:r},(function(){$("#editRecordModal").modal({keyboard:!1,show:!0})}));else if("scope"===e.role){var l={title:i.default.t("admin.edit-scope-title",{scope:e.scope.scope}),data:e.scope,callback:t.confirmEditScope};t.setState({scopeModal:l},(function(){$("#editScopeModal").modal({keyboard:!1,show:!0})}))}else if("userMod"===e.role){var n={title:i.default.t("admin.edit-mod-title",{mod:e.mod.display_name}),data:e.mod,role:"user",types:t.state.modTypes.user,callback:t.confirmEditUserMod};t.setState({ModModal:n},(function(){$("#editModModal").modal({keyboard:!1,show:!0})}))}else if("clientMod"===e.role)n={title:i.default.t("admin.edit-mod-title",{mod:e.mod.display_name}),data:e.mod,types:t.state.modTypes.client,role:"client",callback:t.confirmEditClientMod},t.setState({ModModal:n},(function(){$("#editModModal").modal({keyboard:!1,show:!0})}));else if("schemeMod"===e.role)n={title:i.default.t("admin.edit-mod-title",{mod:e.mod.display_name}),data:e.mod,types:t.state.modTypes.scheme,role:"scheme",callback:t.confirmEditSchemeMod},t.setState({ModModal:n},(function(){$("#editModModal").modal({keyboard:!1,show:!0})}));else if("plugin"===e.role){var s={title:i.default.t("admin.edit-mod-title",{mod:e.mod.display_name}),data:e.mod,types:t.state.modTypes.plugin,callback:t.confirmEditPluginMod};t.setState({PluginModal:s},(function(){$("#editPluginModal").modal({keyboard:!1,show:!0})}))}}else if("add"===e.type)"user"===e.role?(r={title:i.default.t("admin.add-user-title"),pattern:t.state.config.pattern.user,source:t.state.modUsers,data:{username:"",name:"",password:"",email:"",enabled:!0,scope:[]},callback:t.confirmAddUser,validateCallback:t.validateUser,add:!0},t.setState({editModal:r},(function(){$("#editRecordModal").modal({keyboard:!1,show:!0})}))):"client"===e.role?(r={title:i.default.t("admin.add-client-title"),pattern:t.state.config.pattern.client,source:t.state.modClients,data:{client_id:"",confidential:!1,client_secret:"",enabled:!0,name:"",password:"",redirect_uri:[],scope:[]},callback:t.confirmAddClient,validateCallback:t.validateClient,add:!0},t.setState({editModal:r},(function(){$("#editRecordModal").modal({keyboard:!1,show:!0})}))):"scope"===e.role?(l={title:i.default.t("admin.add-scope-title"),data:{name:"",display_name:"",description:"",password_required:!0,password_max_age:0,scheme:{}},callback:t.confirmAddScope,add:!0},t.setState({scopeModal:l},(function(){$("#editScopeModal").modal({keyboard:!1,show:!0})}))):"userMod"===e.role?(n={title:i.default.t("admin.add-mod-title"),data:{order_rank:t.state.modUsers.length,parameters:{}},types:t.state.modTypes.user,role:"user",callback:t.confirmAddUserMod,add:!0},t.setState({ModModal:n},(function(){$("#editModModal").modal({keyboard:!1,show:!0})}))):"clientMod"===e.role?(n={title:i.default.t("admin.add-mod-title"),data:{order_rank:t.state.modClients.length,parameters:{}},types:t.state.modTypes.client,role:"client",callback:t.confirmAddClientMod,add:!0},t.setState({ModModal:n},(function(){$("#editModModal").modal({keyboard:!1,show:!0})}))):"schemeMod"===e.role?(n={title:i.default.t("admin.add-mod-title"),data:{parameters:{}},types:t.state.modTypes.scheme,role:"scheme",callback:t.confirmAddSchemeMod,add:!0},t.setState({ModModal:n},(function(){$("#editModModal").modal({keyboard:!1,show:!0})}))):"plugin"===e.role&&(s={title:i.default.t("admin.add-mod-title"),data:{parameters:{}},types:t.state.modTypes.plugin,callback:t.confirmAddPluginMod,add:!0},t.setState({PluginModal:s},(function(){$("#editPluginModal").modal({keyboard:!1,show:!0})})));else if("swap"===e.type)"userMod"===e.role?o.default.glewlwydRequest("/mod/user/"+encodeURIComponent(e.mod.name),"PUT",e.mod).then((function(){return o.default.glewlwydRequest("/mod/user/"+encodeURIComponent(e.previousMod.name),"PUT",e.previousMod).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})}))})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})).always((function(){t.fetchUserMods(),t.fetchUsers()})):"clientMod"===e.role&&o.default.glewlwydRequest("/mod/client/"+encodeURIComponent(e.mod.name),"PUT",e.mod).then((function(){return o.default.glewlwydRequest("/mod/client/"+encodeURIComponent(e.previousMod.name),"PUT",e.previousMod).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})}))})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:i.default.t("admin.error-api-edit-mod")})})).always((function(){t.fetchClientMods(),t.fetchClients()}));else if("search"===e.type){if("user"===e.role){var m=t.state.users;m.searchPattern=e.searchPattern,m.offset=e.offset,m.limit=e.limit,t.setState({users:m},(function(){t.fetchUsers()}))}else if("client"===e.role){var c=t.state.clients;c.searchPattern=e.searchPattern,c.offset=e.offset,c.limit=e.limit,t.setState({clients:c},(function(){t.fetchClients()}))}else if("scope"===e.role){var u=t.state.scopes;u.searchPattern=e.searchPattern,u.offset=e.offset,u.limit=e.limit,t.setState({scopes:u},(function(){t.fetchScopes()}))}}else"refresh"===e.type&&("schemeMod"===e.role?t.fetchSchemeMods():"userMod"===e.role?t.fetchUserMods():"clientMod"===e.role?t.fetchClientMods():"pluginMod"===e.role&&t.fetchPlugins())})),t.state.config&&t.fetchApi(),t}t.default=C},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=d(l),o=d(a(1));function d(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(i,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({title:e.title,pattern:e.pattern,source:e.source,data:e.data,cb:e.callback,validateCb:e.validateCallback,profile:e.profile,add:e.add,listAddValue:this.initListAdd(e.pattern),listEltConfirm:this.initListConfirm(e.pattern),listError:{},hasError:!1,listPwd:this.initListPwd(e.pattern,e.add)},(function(){e.add&&t.createData()}))}},{key:"closeModal",value:function(e,t){var a=this;if(this.state.cb)if(t)if(this.state.validateCb){for(var r in this.state.data)if(Array.isArray(this.state.data[r]))if(this.state.data[r].length)for(var l=this.state.data[r],n=l.length-1;0<=n;n--)""===l[n]&&l.splice(n,1);else delete this.state.data[r];this.state.validateCb(this.state.data,this.state.listEltConfirm,this.state.add,(function(e,r){e?a.state.cb(t,a.state.data):a.setState({listError:r,hasError:!0})}))}else this.state.cb(t,this.state.data);else this.state.cb(t,{})}},{key:"changeSource",value:function(e,t){var a=this.state.data;a.source=t,this.setState({data:a})}},{key:"editElt",value:function(e,t,a){var r,l,d=this,s=[],i=!1;if((void 0!==t||"password"===e.type||e.forceShow)&&(!this.state.profile||e.profile)){var m="",c="";if(this.state.listError[e.name]&&(m=" is-invalid",c=n.default.createElement("span",{className:"error-input"},o.default.t(this.state.listError[e.name]))),r=n.default.createElement("label",{className:"input-group-text",htmlFor:"modal-edit-"+e.name},o.default.t(e.label)),e.list){if(t=t||[],e.listElements){var u=[];e.listElements.forEach((function(t,a){u.push(n.default.createElement("a",{className:"dropdown-item",key:a,href:"#",onClick:function(a){return d.AddListElt(a,e.name,t)}},t))})),l=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"modal-edit-"+e.name,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-plus"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"modal-edit-"+e.name},u))}else if("textarea"===e.type)l=n.default.createElement("textarea",{className:"form-control"+m,onChange:function(t){return d.changeTextArea(t,e.name,!0)},value:t.join("\n"),placeholder:e.placeholder?o.default.t(e.placeholder):""});else if("file"===e.type)l=e.edit||this.state.add?n.default.createElement("input",{type:"file",className:"form-control"+m,onChange:function(t){return d.uploadFile(t,e.name,!0)}}):n.default.createElement("input",{type:"file",disabled:!0,className:"form-control"});else if(e.type&&e.type.startsWith("image")){var f=[];t.forEach((function(t,a){f.push(n.default.createElement("a",{href:"#",onClick:function(t){return d.removeImage(t,e.name,a)},title:o.default.t("remove")},n.default.createElement("img",{key:a,className:"btn-icon-right img-thumb",src:"data:"+e.type+";base64,"+t,alt:e.name+"-"+a})))})),l=e.edit||this.state.add?n.default.createElement("div",null,n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",className:"custom-file-input"+m,onChange:function(t){return d.uploadImage(t,e.name,!0)},id:"modal-image-"+e.name}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"modal-image-"+e.name},o.default.t("browse"))),f):(f=[],t.forEach((function(t,a){f.push(n.default.createElement("img",{key:a,className:"btn-icon-right img-thumb",src:"data:"+e.type+";base64,"+t,alt:e.name+"-"+a}))})),f)}else l=n.default.createElement("div",{className:"input-group"},n.default.createElement("input",{type:"text",className:"form-control"+m,id:"modal-edit-"+e.name,placeholder:e.placeholder?o.default.t(e.placeholder):"",onChange:function(t){return d.changeListAddElt(t,e.name)},value:this.state.listAddValue[e.name]}),n.default.createElement("div",{className:"input-group-append"},n.default.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(t){return d.AddListElt(t,e.name)},title:o.default.t("modal.list-add-title")},n.default.createElement("i",{className:"fas fa-plus"}))));(!e.type||"textarea"===e.type||e.type.startsWith("image"))&&e.type||t.forEach((function(t,a){var r=t;"file"===e.type&&(r=t.substring(0,t.indexOf("/"))),!1!==e.edit||d.state.add?s.push(n.default.createElement("a",{href:"#",onClick:function(t){return d.deleteListElt(t,e.name,a)},key:a},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},r,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"}))))):s.push(n.default.createElement("span",{className:"badge badge-primary btn-icon-right",key:a},r,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"}))))}))}else if("boolean"===e.type)i=!1!==e.edit||this.state.add?n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input"+m,id:"modal-edit-"+e.name,onChange:function(t){return d.toggleBooleanElt(t,e.name)},checked:t}),n.default.createElement("label",{className:"form-check-label",htmlFor:"modal-edit-"+e.name},o.default.t(e.label))):n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{disabled:!0,type:"checkbox",className:"form-check-input",id:"modal-edit-"+e.name,checked:t}),n.default.createElement("label",{className:"form-check-label",htmlFor:"modal-edit-"+e.name},o.default.t(e.label)));else if("textarea"===e.type)l=!1!==e.edit||this.state.add?n.default.createElement("textarea",{className:"form-control"+m,onChange:function(t){return d.changeTextArea(t,e.name,!1)},value:t||"",placeholder:e.placeholder?o.default.t(e.placeholder):""}):n.default.createElement("textarea",{className:"form-control",disabled:!0,value:t||""});else if("file"===e.type)t&&s.push(n.default.createElement("a",{href:"#",key:0,onClick:function(t){return d.deleteFile(t,e.name)}},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},t.substring(0,t.indexOf("/")),n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"}))))),l=e.edit||this.state.add?n.default.createElement("input",{type:"file",className:"form-control"+m,onChange:function(t){return d.uploadFile(t,e.name)}}):n.default.createElement("input",{type:"file",disabled:!0,className:"form-control"});else if(e.type&&e.type.startsWith("image"))t&&(f=n.default.createElement("a",{href:"#",onClick:function(t){return d.removeImage(t,e.name,-1)},title:o.default.t("remove")},n.default.createElement("img",{className:"btn-icon-right img-thumb",src:"data:"+e.type+";base64,"+t,alt:e.name}))),l=e.edit||this.state.add?n.default.createElement("div",null,n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",className:"custom-file-input"+m,onChange:function(t){return d.uploadImage(t,e.name)},id:"modal-image-"+e.name}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"modal-image-"+e.name},o.default.t("browse"))),f):n.default.createElement("img",{className:"btn-icon-right img-thumb",src:"data:"+e.type+";base64,"+t,alt:e.name});else if(!1!==e.edit||this.state.add)if("password"===e.type){var p="";this.state.add||(p=n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return d.setPwd(t,e.name,"keep")}},o.default.t("modal.pwd-keep")));var h=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"modal-pwd-"+e.name,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("modal.pwd-"+(this.state.listPwd[e.name]||(this.state.add?"set":"keep")))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"modal-pwd-"+e.name},p,n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return d.setPwd(t,e.name,"set")}},o.default.t("modal.pwd-set")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return d.setPwd(t,e.name,"disabled")}},o.default.t("modal.pwd-disabled"))));l=n.default.createElement("div",null,h,n.default.createElement("input",{type:"password",autoComplete:"new-password",disabled:"disabled"===this.state.listPwd[e.name]||"keep"===this.state.listPwd[e.name],className:"form-control"+m,id:"modal-edit-"+e.name,placeholder:e.placeholder?o.default.t(e.placeholder):"",onChange:function(t){return d.changeElt(t,e.name)},value:t||""}),n.default.createElement("input",{type:"password",autoComplete:"new-password",disabled:"disabled"===this.state.listPwd[e.name]||"keep"===this.state.listPwd[e.name],className:"form-control"+m,id:"modal-edit-confirm"+e.name,placeholder:o.default.t(e.placeholderConfirm),value:this.state.listEltConfirm[e.name]||"",onChange:function(t){return d.changeEltConfirm(t,e.name)}}))}else l=n.default.createElement("input",{type:e.type||"text",className:"form-control"+m,id:"modal-edit-"+e.name,placeholder:e.placeholder?o.default.t(e.placeholder):"",value:t,onChange:function(t){return d.changeElt(t,e.name)}});else l=n.default.createElement("input",{disabled:!0,type:e.type||"text",className:"form-control"+m,id:"modal-edit-"+e.name,placeholder:e.placeholder?o.default.t(e.placeholder):"",value:t})}return i||n.default.createElement("div",{className:"form-group",key:a},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},r),l,n.default.createElement("div",{className:"btn-icon-right"},s)),c)}},{key:"deleteListElt",value:function(e,t,a){var r=this.state.data;r[t]&&(r[t].splice(a,1),this.setState({data:r}))}},{key:"changeElt",value:function(e,t){var a=this.state.data;a[t]=e.target.value,this.setState({data:a})}},{key:"toggleBooleanElt",value:function(e,t){var a=this.state.data;a[t]=!a[t],this.setState({data:a})}},{key:"createData",value:function(){var e={};this.state.pattern.forEach((function(t,a){t.list?e[t.name]=[]:void 0!==t.defaultValue?e[t.name]=t.defaultValue:"boolean"!==t.type&&(e[t.name]="")})),this.setState({data:e})}},{key:"changeListAddElt",value:function(e,t){var a=this.state.listAddValue;a[t]=e.target.value,this.setState({listAddValue:a})}},{key:"AddListElt",value:function(e,t,a){var r=2<arguments.length&&void 0!==a&&a;if(e.preventDefault(),r)(l=this.state.data)[t]||(l[t]=[]),l[t].push(r),this.setState({data:l});else if(this.state.listAddValue[t]){var l=this.state.data,n=this.state.listAddValue;l[t].push(this.state.listAddValue[t]),this.state.listAddValue[t]="",this.setState({data:l,listAddValue:n})}}},{key:"initListAdd",value:function(e){var t={};return e.forEach((function(e){e.list&&(t[e.name]="")})),t}},{key:"initListConfirm",value:function(e){var t={};return e.forEach((function(e){e.confirm&&(t[e.name]="")})),t}},{key:"initListPwd",value:function(e,t){var a={};return e.forEach((function(e){"password"===e.type&&(a[e.name]=t?"set":"keep")})),a}},{key:"changeEltConfirm",value:function(e,t){var a=this.state.listEltConfirm;a[t]=e.target.value,this.setState({listEltConfirm:a})}},{key:"changeTextArea",value:function(e,t,a){var r=this.state.data;r[t]=a?e.target.value.split("\n"):e.target.value,this.setState({data:r})}},{key:"uploadFile",value:function(e,t,a){var r=this,l=this.state.data,n=e.target.files[0],o=new FileReader;o.onload=function(e){a?(l[t]||(l[t]=[]),l[t].push(n.name+"/"+btoa(e.target.result))):l[t]=n.name+"/"+btoa(e.target.result),r.setState({data:l})},o.readAsText(n)}},{key:"uploadImage",value:function(e,t,a){var r=this,l=this.state.data,n=e.target.files[0],o=new FileReader;o.onload=function(e){a?(l[t]||(l[t]=[]),l[t].push(btoa(e.target.result))):l[t]=btoa(e.target.result),r.setState({data:l})},o.readAsBinaryString(n)}},{key:"removeImage",value:function(e,t,a){var r=this.state.data;-1<a?r[t].splice(a,1):delete r[t],this.setState({data:r})}},{key:"setPwd",value:function(e,t,a){e.preventDefault();var r=this.state.listPwd,l=this.state.data,n=this.state.listEltConfirm;r[t]=a,this.setState({listPwd:r}),"disabled"===a?(l[t]="",n[t]=""):(delete l[t],delete n[t]),this.setState({listPwd:r,listEltConfirm:n,data:l})}},{key:"render",value:function(){var e,t=this,a=[],r=[],l=!1;this.state.pattern.forEach((function(e,r){var l=t.editElt(e,t.state.data[e.name],r);l&&a.push(l)})),this.state.source.forEach((function(e,a){(l||e.readonly)&&e.name!==t.state.data.source||(l=e.display_name),r.push(n.default.createElement("a",{className:"dropdown-item",key:a,href:"#",onClick:function(a){return t.changeSource(a,e.name)}},e.display_name))})),this.state.hasError&&(e=n.default.createElement("span",{className:"error-input text-right"},o.default.t("admin.error-input")));var d=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"modal-source"},o.default.t("admin.source"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"modal-source","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l||o.default.t("admin.source-dropdown")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"modal-source"},r))));return n.default.createElement("div",{className:"modal fade",id:"editRecordModal",tabIndex:"-1",role:"dialog","aria-labelledby":"editRecordModalLabel","aria-hidden":"true"},n.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("h5",{className:"modal-title",id:"editRecordModalLabel"},this.state.title),n.default.createElement("button",{type:"button",className:"close","aria-label":o.default.t("modal.close"),onClick:function(e){return t.closeModal(e,!1)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))),n.default.createElement("div",{className:"modal-body"},n.default.createElement("form",{className:"needs-validation",noValidate:!0},d,a)),n.default.createElement("div",{className:"modal-footer"},e,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return t.closeModal(e,!1)}},o.default.t("modal.close")),n.default.createElement("button",{type:"button",className:"btn btn-primary ",onClick:function(e){return t.closeModal(e,!0)}},o.default.t("modal.ok"))))))}}]),i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={title:e.title,pattern:e.pattern,source:e.source,data:e.data,cb:e.callback,validateCb:e.validateCallback,profile:e.profile,add:e.add,listAddValue:t.initListAdd(e.pattern),listEltConfirm:t.initListConfirm(e.pattern),listError:{},hasError:!1,listPwd:t.initListPwd(e.pattern,e.add)},t.closeModal=t.closeModal.bind(t),t.changeSource=t.changeSource.bind(t),t.editElt=t.editElt.bind(t),t.changeElt=t.changeElt.bind(t),t.toggleBooleanElt=t.toggleBooleanElt.bind(t),t.deleteListElt=t.deleteListElt.bind(t),t.createData=t.createData.bind(t),t.changeListAddElt=t.changeListAddElt.bind(t),t.AddListElt=t.AddListElt.bind(t),t.initListAdd=t.initListAdd.bind(t),t.initListConfirm=t.initListConfirm.bind(t),t.initListPwd=t.initListPwd.bind(t),t.changeEltConfirm=t.changeEltConfirm.bind(t),t.changeTextArea=t.changeTextArea.bind(t),t.uploadFile=t.uploadFile.bind(t),t.uploadImage=t.uploadImage.bind(t),t.removeImage=t.removeImage.bind(t),t.setPwd=t.setPwd.bind(t),t.state.add&&t.createData(),t}t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=i(l),o=i(a(1)),d=i(a(2)),s=i(a(3));function i(e){return e&&e.__esModule?e:{default:e}}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({loggedIn:e.loggedIn,profileList:e.profileList})}},{key:"navigate",value:function(e,t,a){e.preventDefault(),d.default.sendMessage("App",{type:"nav",message:t}),this.setState({curNav:t,navDropdown:a})}},{key:"toggleLogin",value:function(){if(this.state.loggedIn)s.default.glewlwydRequest("/auth/?username="+encodeURIComponent(this.state.profileList[0].username),"DELETE").then((function(){d.default.sendMessage("Notification",{type:"info",message:o.default.t("login.success-delete-session")}),d.default.sendMessage("App",{type:"loggedIn",loggedIn:!1})})).fail((function(e){401!==e.status&&d.default.sendMessage("Notification",{type:"danger",message:o.default.t("login.error-delete-session")}),d.default.sendMessage("App",{type:"loggedIn",loggedIn:!1})}));else{var e=!1;this.state.config.sessionSchemes.forEach((function(t){t.scheme_default&&t.scheme_default.forEach((function(a){"admin"===a&&(e=t.scheme_name)}))})),document.location.href=this.state.config.LoginUrl+"?callback_url="+encodeURIComponent([location.protocol,"//",location.host,location.pathname].join(""))+"&scope="+encodeURIComponent(this.state.config.admin_scope)+(e?"&scheme="+encodeURIComponent(e):"")}}},{key:"changeLang",value:function(e,t){var a=this;o.default.changeLanguage(t).then((function(){a.setState({lang:t}),d.default.sendMessage("App",{type:"lang"})}))}},{key:"changeProfile",value:function(e,t){if(t)s.default.glewlwydRequest("/auth/","POST",{username:t.username}).then((function(){d.default.sendMessage("App",{type:"profile"})})).fail((function(){d.default.sendMessage("Notification",{type:"danger",message:o.default.t("login.error-login")})}));else{var a=!1;this.state.config.sessionSchemes.forEach((function(e){e.scheme_default&&e.scheme_default.forEach((function(t){"admin"===t&&(a=e.scheme_name)}))})),document.location.href=this.state.config.LoginUrl+"?callback_url="+encodeURIComponent([location.protocol,"//",location.host,location.pathname].join(""))+"&scope="+encodeURIComponent(this.state.config.profile_scope)+(a?"&scheme="+encodeURIComponent(a):"")+"&prompt=login"}}},{key:"render",value:function(){var e,t,a=this,r=[],l=[];return this.state.config.lang.forEach((function(e,t){e===o.default.language?r.push(n.default.createElement("a",{className:"dropdown-item active",href:"#",key:t},e)):r.push(n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return a.changeLang(t,e)},key:t},e))})),this.state.profileList&&this.state.profileList.forEach((function(e,t){l.push(n.default.createElement("a",{className:"dropdown-item"+(t?"":" active"),href:"#",onClick:function(t){return a.changeProfile(t,e)},key:t},e.name||e.username))})),l.push(n.default.createElement("div",{className:"dropdown-divider",key:l.length})),l.push(n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return a.changeProfile(e,null)},key:l.length},o.default.t("profile.menu-session-new"))),e=n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownProfile","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-user"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownProfile"},l)),t=this.state.loggedIn?n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleLogin,title:o.default.t("title-logout")},n.default.createElement("i",{className:"fas btn-icon fa-sign-out-alt"})):n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.toggleLogin,title:o.default.t("title-login")},n.default.createElement("i",{className:"fas btn-icon fa-sign-in-alt"})),n.default.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},n.default.createElement("a",{className:"navbar-brand",href:"#"},"Glewlwyd"),n.default.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.default.createElement("span",{className:"navbar-toggler-icon"})),n.default.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.default.createElement("ul",{className:"navbar-nav mr-auto"},n.default.createElement("li",{className:"nav-item"+("users"===this.state.curNav?" active":"")},n.default.createElement("a",{className:"nav-link",href:"#",onClick:function(e){return a.navigate(e,"users",!1)}},o.default.t("admin.menu-users"))),n.default.createElement("li",{className:"nav-item"+("clients"===this.state.curNav?" active":"")},n.default.createElement("a",{className:"nav-link",href:"#",onClick:function(e){return a.navigate(e,"clients",!1)}},o.default.t("admin.menu-clients"))),n.default.createElement("li",{className:"nav-item"+("scopes"===this.state.curNav?" active":"")},n.default.createElement("a",{className:"nav-link",href:"#",onClick:function(e){return a.navigate(e,"scopes",!1)}},o.default.t("admin.menu-scopes"))),n.default.createElement("li",{className:"nav-item dropdown"},n.default.createElement("a",{className:"nav-link dropdown-toggle"+(this.state.navDropdown?" active":""),href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.menu-parameters")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},n.default.createElement("a",{className:"dropdown-item"+("users-mod"===this.state.curNav?" active":""),href:"#",onClick:function(e){return a.navigate(e,"users-mod",!0)}},o.default.t("admin.menu-users-mod")),n.default.createElement("a",{className:"dropdown-item"+("clients-mod"===this.state.curNav?" active":""),href:"#",onClick:function(e){return a.navigate(e,"clients-mod",!0)}},o.default.t("admin.menu-clients-mod")),n.default.createElement("div",{className:"dropdown-divider"}),n.default.createElement("a",{className:"dropdown-item"+("auth-schemes"===this.state.curNav?" active":""),href:"#",onClick:function(e){return a.navigate(e,"auth-schemes",!0)}},o.default.t("admin.menu-auth-schemes")),n.default.createElement("div",{className:"dropdown-divider"}),n.default.createElement("a",{className:"dropdown-item"+("plugins"===this.state.curNav?" active":""),href:"#",onClick:function(e){return a.navigate(e,"plugins",!0)}},o.default.t("admin.menu-plugins"))))),n.default.createElement("form",{className:"form-inline my-2 my-lg-0"},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownLang","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-globe-africa"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownLang"},r)),e,t))))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,curNav:"users",navDropdown:!1,profileList:e.profileList,loggedIn:e.loggedIn},d.default.subscribe("Navbar",(function(e){})),t.navigate=t.navigate.bind(t),t.toggleLogin=t.toggleLogin.bind(t),t.changeLang=t.changeLang.bind(t),t.changeProfile=t.changeProfile.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({users:e.users,loggedIn:e.loggedIn})}},{key:"addUser",value:function(e){e.preventDefault(),d.default.sendMessage("App",{type:"add",role:"user"})}},{key:"editUser",value:function(e,t){e.preventDefault(),d.default.sendMessage("App",{type:"edit",role:"user",user:t})}},{key:"deleteUser",value:function(e,t){e.preventDefault(),d.default.sendMessage("App",{type:"delete",role:"user",user:t})}},{key:"handleChangeSearchPattern",value:function(e){var t=this.state.users;t.searchPattern=e.target.value,this.setState({users:t})}},{key:"searchUsers",value:function(e){e.preventDefault(),d.default.sendMessage("App",{type:"search",role:"user",searchPattern:this.state.users.searchPattern,offset:this.state.users.offset,limit:this.state.users.limit})}},{key:"navigate",value:function(e,t){e.preventDefault(),0<t?d.default.sendMessage("App",{type:"search",role:"user",searchPattern:this.state.users.searchPattern,offset:this.state.users.offset+this.state.users.limit,limit:this.state.users.limit}):this.state.users.offset&&d.default.sendMessage("App",{type:"search",role:"user",searchPattern:this.state.users.searchPattern,offset:this.state.users.offset-this.state.users.limit,limit:this.state.users.limit})}},{key:"navigatePerPage",value:function(e,t){e.preventDefault(),d.default.sendMessage("App",{type:"search",role:"user",pattern:this.state.users.searchPattern,offset:this.state.users.offset,limit:t})}},{key:"delegateUser",value:function(e,t){e.preventDefault(),window.open(this.state.config.ProfileUrl+"?delegate="+t.username,"_blank")}},{key:"render",value:function(){var e=this,t=[];return this.state.users.list.forEach((function(a,r){t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.source),n.default.createElement("td",null,a.username),n.default.createElement("td",null,a.name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.email||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.enabled?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group d-none d-lg-table-cell",role:"group"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.delegateUser(t,a)},title:o.default.t("admin.delegate")},n.default.createElement("i",{className:"fas fa-id-card"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editUser(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteUser(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"}))),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu"+a.username,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu"+a.username},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.delegateUser(t,a)},alt:o.default.t("admin.delegate")},n.default.createElement("i",{className:"fas fa-id-card btn-icon"}),o.default.t("admin.delegate")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.editUser(t,a)},alt:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit btn-icon"}),o.default.t("admin.edit")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.deleteUser(t,a)},alt:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash btn-icon"}),o.default.t("admin.delete")))))))})),n.default.createElement("div",{className:"table-responsive"},n.default.createElement("table",{className:"table table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"2"},n.default.createElement("h4",null,o.default.t("admin.user-list-title"))),n.default.createElement("th",{colSpan:"4"},n.default.createElement("form",{className:"form-inline d-none d-lg-block",onSubmit:function(t){return e.searchUsers(t)}},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",i({disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.navigate(t,-1)},title:o.default.t("admin.nav-previous")},"disabled",!this.state.users.offset),n.default.createElement("i",{className:"fas fa-backward"})),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{disabled:!this.state.loggedIn,id:"btnGroupNavPerPage",type:"button",className:"btn btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.nav-per-page")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"btnGroupNavperPage"},n.default.createElement("a",{className:"dropdown-item"+(10===this.state.users.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,10)}},"10"),n.default.createElement("a",{className:"dropdown-item"+(20===this.state.users.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,20)}},"20"),n.default.createElement("a",{className:"dropdown-item"+(50===this.state.users.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,50)}},"50"),n.default.createElement("a",{className:"dropdown-item"+(100===this.state.users.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,100)}},"100"))),n.default.createElement("button",i({disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.navigate(t,1)},title:o.default.t("admin.nav-next")},"disabled",this.state.users.limit>this.state.users.list.length),n.default.createElement("i",{className:"fas fa-forward"})),n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addUser(t)},title:o.default.t("admin.user-add")},n.default.createElement("i",{className:"fas fa-plus"}))),n.default.createElement("div",{className:"btn-group btn-icon-right",role:"group"},n.default.createElement("input",{disabled:!this.state.loggedIn,className:"form-control",type:"search",placeholder:o.default.t("admin.nav-search-placeholder"),"aria-label":"Search",onChange:this.handleChangeSearchPattern,value:this.state.users.searchPattern||""}),n.default.createElement("button",{disabled:!this.state.loggedIn,className:"btn btn-secondary my-sm-0",type:"submit",title:o.default.t("admin.nav-search-title"),onClick:function(t){return e.searchUsers(t)}},o.default.t("admin.nav-search")))),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{disabled:!this.state.loggedIn,className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.navigate(t,-1)},alt:o.default.t("admin.nav-previous")},n.default.createElement("i",{className:"fas fa-backward btn-icon"}),o.default.t("admin.nav-previous")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.navigate(t,1)},alt:o.default.t("admin.nav-next")},n.default.createElement("i",{className:"fas fa-forward btn-icon"}),o.default.t("admin.nav-next")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.addUser(t)},alt:o.default.t("admin.user-add")},n.default.createElement("i",{className:"fas fa-plus btn-icon"}),o.default.t("admin.user-add")))))),n.default.createElement("tr",null,n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.source")),n.default.createElement("th",null,o.default.t("admin.username")),n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.email")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.enabled")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t,n.default.createElement("tr",null,n.default.createElement("td",{colSpan:"6"},o.default.t("admin.nav-footer",{offset:this.state.users.offset,limit:this.state.users.limit}))))))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,users:e.users,loggedIn:e.loggedIn},d.default.subscribe("Users",(function(e){})),t.addUser=t.addUser.bind(t),t.editUser=t.editUser.bind(t),t.deleteUser=t.deleteUser.bind(t),t.handleChangeSearchPattern=t.handleChangeSearchPattern.bind(t),t.searchUsers=t.searchUsers.bind(t),t.navigate=t.navigate.bind(t),t.navigatePerPage=t.navigatePerPage.bind(t),t.delegateUser=t.delegateUser.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({clients:e.clients,loggedIn:e.loggedIn})}},{key:"addClient",value:function(e){d.default.sendMessage("App",{type:"add",role:"client"})}},{key:"editClient",value:function(e,t){d.default.sendMessage("App",{type:"edit",role:"client",client:t})}},{key:"deleteClient",value:function(e,t){d.default.sendMessage("App",{type:"delete",role:"client",client:t})}},{key:"handleChangeSearchPattern",value:function(e){var t=this.state.clients;t.searchPattern=e.target.value,this.setState({clients:t})}},{key:"searchClients",value:function(e){e.preventDefault(),d.default.sendMessage("App",{type:"search",role:"client",searchPattern:this.state.clients.searchPattern,offset:this.state.clients.offset,limit:this.state.clients.limit})}},{key:"navigate",value:function(e,t){0<t?d.default.sendMessage("App",{type:"search",role:"client",searchPattern:this.state.clients.searchPattern,offset:this.state.clients.offset+this.state.clients.limit,limit:this.state.clients.limit}):this.state.clients.offset&&d.default.sendMessage("App",{type:"search",role:"client",searchPattern:this.state.clients.searchPattern,offset:this.state.clients.offset-this.state.clients.limit,limit:this.state.clients.limit})}},{key:"navigatePerPage",value:function(e,t){d.default.sendMessage("App",{type:"search",role:"client",searchPattern:this.state.clients.searchPattern,offset:this.state.clients.offset,limit:t})}},{key:"render",value:function(){var e=this,t=[];return this.state.clients.list.forEach((function(a,r){t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.source),n.default.createElement("td",null,a.client_id),n.default.createElement("td",null,a.name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.enabled?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group pull-right",role:"group"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editClient(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteClient(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"}))))))})),n.default.createElement("table",{className:"table table-responsive table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"2"},n.default.createElement("h4",null,o.default.t("admin.client-list-title"))),n.default.createElement("th",{colSpan:"3"},n.default.createElement("form",{className:"form-inline d-none d-lg-block",onSubmit:function(t){return e.searchClients(t)}},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",i({disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.navigate(t,-1)},title:o.default.t("admin.nav-previous")},"disabled",!this.state.clients.offset),n.default.createElement("i",{className:"fas fa-backward"})),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{disabled:!this.state.loggedIn,id:"btnGroupNavPerPage",type:"button",className:"btn btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.nav-per-page")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"btnGroupNavperPage"},n.default.createElement("a",{className:"dropdown-item"+(10===this.state.clients.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,10)}},"10"),n.default.createElement("a",{className:"dropdown-item"+(20===this.state.clients.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,20)}},"20"),n.default.createElement("a",{className:"dropdown-item"+(50===this.state.clients.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,50)}},"50"),n.default.createElement("a",{className:"dropdown-item"+(100===this.state.clients.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,100)}},"100"))),n.default.createElement("button",i({disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.navigate(t,1)},title:o.default.t("admin.nav-next")},"disabled",this.state.clients.limit>this.state.clients.list.length),n.default.createElement("i",{className:"fas fa-forward"})),n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addClient(t)},title:o.default.t("admin.client-add")},n.default.createElement("i",{className:"fas fa-plus"}))),n.default.createElement("div",{className:"btn-group btn-icon-right",role:"group"},n.default.createElement("input",{disabled:!this.state.loggedIn,className:"form-control",type:"search",placeholder:o.default.t("admin.nav-search-placeholder"),"aria-label":"Search",onChange:this.handleChangeSearchPattern,value:this.state.clients.searchPattern||""}),n.default.createElement("button",{disabled:!this.state.loggedIn,className:"btn btn-secondary my-sm-0",type:"submit",title:o.default.t("admin.nav-search-title"),onClick:function(t){return e.searchClients(t)}},o.default.t("admin.nav-search")))),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{disabled:!this.state.loggedIn,className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.navigate(t,-1)},alt:o.default.t("admin.nav-previous")},n.default.createElement("i",{className:"fas fa-backward btn-icon"}),o.default.t("admin.nav-previous")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.navigate(t,1)},alt:o.default.t("admin.nav-next")},n.default.createElement("i",{className:"fas fa-forward btn-icon"}),o.default.t("admin.nav-next")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.addClient(t)},alt:o.default.t("admin.user-add")},n.default.createElement("i",{className:"fas fa-plus btn-icon"}),o.default.t("admin.user-add")))))),n.default.createElement("tr",null,n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.source")),n.default.createElement("th",null,o.default.t("admin.client_id")),n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.enabled")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t,n.default.createElement("tr",null,n.default.createElement("td",{colSpan:"5"},o.default.t("admin.nav-footer",{offset:this.state.clients.offset,limit:this.state.clients.limit})))))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,clients:e.clients,loggedIn:e.loggedIn},d.default.subscribe("Clients",(function(e){})),t.addClient=t.addClient.bind(t),t.editClient=t.editClient.bind(t),t.deleteClient=t.deleteClient.bind(t),t.handleChangeSearchPattern=t.handleChangeSearchPattern.bind(t),t.searchClients=t.searchClients.bind(t),t.navigate=t.navigate.bind(t),t.navigatePerPage=t.navigatePerPage.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({scopes:e.scopes,loggedIn:e.loggedIn})}},{key:"addScope",value:function(e){d.default.sendMessage("App",{type:"add",role:"scope"})}},{key:"editScope",value:function(e,t){d.default.sendMessage("App",{type:"edit",role:"scope",scope:t})}},{key:"deleteScope",value:function(e,t){d.default.sendMessage("App",{type:"delete",role:"scope",scope:t})}},{key:"handleChangeSearchPattern",value:function(e){this.setState({searchPattern:e.target.value})}},{key:"searchScopes",value:function(e){e.preventDefault(),d.default.sendMessage("App",{type:"search",role:"scope",searchPattern:this.state.searchPattern,offset:this.state.offset,limit:this.state.limit})}},{key:"navigate",value:function(e,t){0<t?d.default.sendMessage("App",{type:"search",role:"scope",searchPattern:this.state.searchPattern,offset:this.state.offset+this.state.limit,limit:this.state.limit}):this.state.offset&&d.default.sendMessage("App",{type:"search",role:"scope",searchPattern:this.state.searchPattern,offset:this.state.offset-this.state.limit,limit:this.state.limit})}},{key:"navigatePerPage",value:function(e,t){d.default.sendMessage("App",{type:"search",role:"scope",searchPattern:this.state.searchPattern,offset:this.state.offset,limit:t})}},{key:"render",value:function(){var e=this,t=[];return this.state.scopes.list.forEach((function(a,r){t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",null,a.name),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.display_name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.description||""),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editScope(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteScope(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"}))))))})),n.default.createElement("table",{className:"table table-responsive table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"1"},n.default.createElement("h4",null,o.default.t("admin.scope-list-title"))),n.default.createElement("th",{colSpan:"3"},n.default.createElement("form",{className:"form-inline d-none d-lg-block",onSubmit:function(t){return e.searchScopes(t)}},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",i({disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.navigate(t,-1)},title:o.default.t("admin.nav-previous")},"disabled",!this.state.offset),n.default.createElement("i",{className:"fas fa-backward"})),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{disabled:!this.state.loggedIn,id:"btnGroupNavPerPage",type:"button",className:"btn btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.nav-per-page")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"btnGroupNavperPage"},n.default.createElement("a",{className:"dropdown-item"+(10===this.state.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,10)}},"10"),n.default.createElement("a",{className:"dropdown-item"+(20===this.state.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,20)}},"20"),n.default.createElement("a",{className:"dropdown-item"+(50===this.state.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,50)}},"50"),n.default.createElement("a",{className:"dropdown-item"+(100===this.state.limit?" active":""),href:"#",onClick:function(t){return e.navigatePerPage(t,100)}},"100"))),n.default.createElement("button",i({disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.navigate(t,1)},title:o.default.t("admin.nav-next")},"disabled",this.state.limit>this.state.scopes.list.length),n.default.createElement("i",{className:"fas fa-forward"})),n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addScope(t)},title:o.default.t("admin.scope-add")},n.default.createElement("i",{className:"fas fa-plus"}))),n.default.createElement("div",{className:"btn-group btn-icon-right",role:"group"},n.default.createElement("input",{disabled:!this.state.loggedIn,className:"form-control",type:"search",placeholder:o.default.t("admin.nav-search-placeholder"),"aria-label":"Search",onChange:this.handleChangeSearchPattern,value:this.state.handleChangeSearchPattern}),n.default.createElement("button",{disabled:!this.state.loggedIn,className:"btn btn-secondary my-sm-0",type:"submit",title:o.default.t("admin.nav-search-title"),onClick:function(t){return e.searchScopes(t)}},o.default.t("admin.nav-search")))),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{disabled:!this.state.loggedIn,className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.navigate(t,-1)},alt:o.default.t("admin.nav-previous")},n.default.createElement("i",{className:"fas fa-backward btn-icon"}),o.default.t("admin.nav-previous")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.navigate(t,1)},alt:o.default.t("admin.nav-next")},n.default.createElement("i",{className:"fas fa-forward btn-icon"}),o.default.t("admin.nav-next")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.addScope(t)},alt:o.default.t("admin.scope-add")},n.default.createElement("i",{className:"fas fa-plus btn-icon"}),o.default.t("admin.scope-add")))))),n.default.createElement("tr",null,n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.display-name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.description")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t,n.default.createElement("tr",null,n.default.createElement("td",{colSpan:"6"},o.default.t("admin.nav-footer",{offset:this.state.offset,limit:this.state.limit})))))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,scopes:e.scopes,curScope:{},add:!1,searchPattern:"",offset:0,limit:20,loggedIn:e.loggedIn},t.addScope=t.addScope.bind(t),t.editScope=t.editScope.bind(t),t.deleteScope=t.deleteScope.bind(t),t.handleChangeSearchPattern=t.handleChangeSearchPattern.bind(t),t.searchScopes=t.searchScopes.bind(t),t.navigate=t.navigate.bind(t),t.navigatePerPage=t.navigatePerPage.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=i(l),o=i(a(1)),d=i(a(2)),s=i(a(3));function i(e){return e&&e.__esModule?e:{default:e}}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({mods:e.mods,types:e.types,loggedIn:e.loggedIn})}},{key:"addMod",value:function(e){d.default.sendMessage("App",{type:"add",role:"userMod"})}},{key:"editMod",value:function(e,t){d.default.sendMessage("App",{type:"edit",role:"userMod",mod:t})}},{key:"deleteMod",value:function(e,t){d.default.sendMessage("App",{type:"delete",role:"userMod",mod:t})}},{key:"moveModUp",value:function(e,t,a){t.order_rank--,a.order_rank++,d.default.sendMessage("App",{type:"swap",role:"userMod",mod:t,previousMod:a})}},{key:"switchModStatus",value:function(e){var t=e.enabled?"disable":"enable";s.default.glewlwydRequest("/mod/user/"+encodeURIComponent(e.name)+"/"+t+"/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:o.default.t("admin.success-api-edit-mod")})})).fail((function(e){d.default.sendMessage("Notification",{type:"danger",message:o.default.t("admin.error-api-edit-mod")}),400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)})})).always((function(){d.default.sendMessage("App",{type:"refresh",role:"userMod",mod:e})}))}},{key:"render",value:function(){var e=this,t=[];return this.state.mods.forEach((function(a,r){var l,d,s="",i="",m="";e.state.types.forEach((function(e){a.module===e.name&&(s=e.display_name)})),r&&(i=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.moveModUp(t,a,e.state.mods[r-1])},title:o.default.t("admin.move-up")},n.default.createElement("i",{className:"fas fa-sort-up"})),l=n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return moveModUp(t,a,e.state.mods[r-1])},alt:o.default.t("admin.move-up")},n.default.createElement("i",{className:"fas fa-sort-up btn-icon"}),o.default.t("admin.move-up"))),d=a.enabled?(m=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-off"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-on btn-icon"}),o.default.t("admin.switch-off"))):(m=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on btn-icon"}),o.default.t("admin.switch-on"))),t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.order_rank),n.default.createElement("td",null,s),n.default.createElement("td",null,a.name),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.display_name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.readonly?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.enabled?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group d-none d-lg-table-cell",role:"group"},m,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editMod(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteMod(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"})),i),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},d,n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.editMod(t,a)},alt:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit btn-icon"}),o.default.t("admin.edit")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.deleteMod(t,a)},alt:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash btn-icon"}),o.default.t("admin.delete")),l)))))})),n.default.createElement("table",{className:"table table-responsive table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"5"},n.default.createElement("h4",null,o.default.t("admin.user-mod-list-title"))),n.default.createElement("th",{colSpan:"1"},n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addMod(t)},title:o.default.t("admin.add")},n.default.createElement("i",{className:"fas fa-plus"})))),n.default.createElement("tr",null,n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.order")),n.default.createElement("th",null,o.default.t("admin.type")),n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.display-name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.readonly")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.enabled")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,mods:e.mods,curMod:{},types:e.types,loggedIn:e.loggedIn},t.addMod=t.addMod.bind(t),t.editMod=t.editMod.bind(t),t.deleteMod=t.deleteMod.bind(t),t.switchModStatus=t.switchModStatus.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=i(l),o=i(a(1)),d=i(a(2)),s=i(a(3));function i(e){return e&&e.__esModule?e:{default:e}}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({mods:e.mods,types:e.types,loggedIn:e.loggedIn})}},{key:"addMod",value:function(e){d.default.sendMessage("App",{type:"add",role:"clientMod"})}},{key:"editMod",value:function(e,t){d.default.sendMessage("App",{type:"edit",role:"clientMod",mod:t})}},{key:"deleteMod",value:function(e,t){d.default.sendMessage("App",{type:"delete",role:"clientMod",mod:t})}},{key:"moveModUp",value:function(e,t,a){t.order_rank--,a.order_rank++,d.default.sendMessage("App",{type:"swap",role:"clientMod",mod:t,previousMod:a})}},{key:"switchModStatus",value:function(e){var t=e.enabled?"disable":"enable";s.default.glewlwydRequest("/mod/client/"+encodeURIComponent(e.name)+"/"+t+"/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:o.default.t("admin.success-api-edit-mod")})})).fail((function(e){d.default.sendMessage("Notification",{type:"danger",message:o.default.t("admin.error-api-edit-mod")}),400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)})})).always((function(){d.default.sendMessage("App",{type:"refresh",role:"clientMod",mod:e})}))}},{key:"render",value:function(){var e=this,t=[];return this.state.mods.forEach((function(a,r){var l,d,s="",i="",m="";e.state.types.forEach((function(e){a.module===e.name&&(s=e.display_name)})),r&&(i=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.moveModUp(t,a,e.state.mods[r-1])},title:o.default.t("admin.move-up")},n.default.createElement("i",{className:"fas fa-sort-up"})),l=n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return moveModUp(t,a,e.state.mods[r-1])},alt:o.default.t("admin.move-up")},n.default.createElement("i",{className:"fas fa-sort-up btn-icon"}),o.default.t("admin.move-up"))),d=a.enabled?(m=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-off"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-off btn-icon"}),o.default.t("admin.switch-off"))):(m=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on btn-icon"}),o.default.t("admin.switch-on"))),t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.order_rank),n.default.createElement("td",null,s),n.default.createElement("td",null,a.name),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.display_name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.readonly?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.enabled?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group d-none d-lg-table-cell",role:"group"},m,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editMod(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteMod(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"})),i),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},d,n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.editMod(t,a)},alt:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit btn-icon"}),o.default.t("admin.edit")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.deleteMod(t,a)},alt:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash btn-icon"}),o.default.t("admin.delete")),l)))))})),n.default.createElement("table",{className:"table table-responsive table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"5"},n.default.createElement("h4",null,o.default.t("admin.client-mod-list-title"))),n.default.createElement("th",{colSpan:"1"},n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addMod(t)},title:o.default.t("admin.add")},n.default.createElement("i",{className:"fas fa-plus"})))),n.default.createElement("tr",null,n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.order")),n.default.createElement("th",null,o.default.t("admin.type")),n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.display-name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.readonly")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.enabled")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,mods:e.mods,curMod:{},types:e.types,loggedIn:e.loggedIn},t.addMod=t.addMod.bind(t),t.editMod=t.editMod.bind(t),t.deleteMod=t.deleteMod.bind(t),t.moveModUp=t.moveModUp.bind(t),t.switchModStatus=t.switchModStatus.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=i(l),o=i(a(1)),d=i(a(3)),s=i(a(2));function i(e){return e&&e.__esModule?e:{default:e}}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({mods:e.mods,types:e.types,loggedIn:e.loggedIn})}},{key:"addMod",value:function(e){s.default.sendMessage("App",{type:"add",role:"schemeMod"})}},{key:"editMod",value:function(e,t){s.default.sendMessage("App",{type:"edit",role:"schemeMod",mod:t})}},{key:"deleteMod",value:function(e,t){s.default.sendMessage("App",{type:"delete",role:"schemeMod",mod:t})}},{key:"switchModStatus",value:function(e){var t=e.enabled?"disable":"enable";d.default.glewlwydRequest("/mod/scheme/"+encodeURIComponent(e.name)+"/"+t+"/","PUT").then((function(){s.default.sendMessage("Notification",{type:"success",message:o.default.t("admin.success-api-edit-mod")})})).fail((function(e){400===e.status&&s.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)}),s.default.sendMessage("Notification",{type:"danger",message:o.default.t("admin.error-api-edit-mod")})})).always((function(){s.default.sendMessage("App",{type:"refresh",role:"schemeMod",mod:e})}))}},{key:"render",value:function(){var e=this,t=[];return this.state.mods.forEach((function(a,r){var l,d="",s="";e.state.types.forEach((function(e){a.module===e.name&&(d=e.display_name)})),l=a.enabled?(s=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-off"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-on btn-icon"}),o.default.t("admin.switch-off"))):(s=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on btn-icon"}),o.default.t("admin.switch-on"))),t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",null,d),n.default.createElement("td",null,a.name),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.display_name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.enabled?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group d-none d-lg-table-cell",role:"group"},s,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editMod(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteMod(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"}))),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},l,n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.editMod(t,a)},alt:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit btn-icon"}),o.default.t("admin.edit")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.deleteMod(t,a)},alt:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash btn-icon"}),o.default.t("admin.delete")))))))})),n.default.createElement("table",{className:"table table-responsive table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"4"},n.default.createElement("h4",null,o.default.t("admin.scheme-mod-list-title")),n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addMod(t)},title:o.default.t("admin.add")},n.default.createElement("i",{className:"fas fa-plus"})))),n.default.createElement("tr",null,n.default.createElement("th",null,o.default.t("admin.type")),n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.display-name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.enabled")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,mods:e.mods,curMod:{},types:e.types,loggedIn:e.loggedIn},t.addMod=t.addMod.bind(t),t.editMod=t.editMod.bind(t),t.deleteMod=t.deleteMod.bind(t),t.switchModStatus=t.switchModStatus.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=i(l),o=i(a(1)),d=i(a(2)),s=i(a(3));function i(e){return e&&e.__esModule?e:{default:e}}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(c,[{key:"componentWillReceiveProps",value:function(e){this.setState({mods:e.mods,types:e.types,loggedIn:e.loggedIn})}},{key:"addMod",value:function(e){d.default.sendMessage("App",{type:"add",role:"plugin"})}},{key:"editMod",value:function(e,t){d.default.sendMessage("App",{type:"edit",role:"plugin",mod:t})}},{key:"deleteMod",value:function(e,t){d.default.sendMessage("App",{type:"delete",role:"plugin",mod:t})}},{key:"switchModStatus",value:function(e){var t=e.enabled?"disable":"enable";s.default.glewlwydRequest("/mod/plugin/"+encodeURIComponent(e.name)+"/"+t+"/","PUT").then((function(){d.default.sendMessage("Notification",{type:"success",message:o.default.t("admin.success-api-edit-mod")})})).fail((function(e){d.default.sendMessage("Notification",{type:"danger",message:o.default.t("admin.error-api-edit-mod")}),400===e.status&&d.default.sendMessage("Notification",{type:"danger",message:JSON.stringify(e.responseJSON)})})).always((function(){d.default.sendMessage("App",{type:"refresh",role:"pluginMod",mod:e})}))}},{key:"render",value:function(){var e=this,t=[];return this.state.mods.forEach((function(a,r){var l,d="",s="";e.state.types.forEach((function(e){a.module===e.name&&(d=e.display_name)})),l=a.enabled?(s=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-on"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-off")},n.default.createElement("i",{className:"fas fa-toggle-off btn-icon"}),o.default.t("admin.switch-off"))):(s=n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.switchModStatus(a)},title:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on"})),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.switchModStatus(a)},alt:o.default.t("admin.switch-on")},n.default.createElement("i",{className:"fas fa-toggle-on btn-icon"}),o.default.t("admin.switch-on"))),t.push(n.default.createElement("tr",{key:r},n.default.createElement("td",null,d),n.default.createElement("td",null,a.name),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.display_name||""),n.default.createElement("td",{className:"d-none d-lg-table-cell"},a.enabled?o.default.t("admin.yes"):o.default.t("admin.no")),n.default.createElement("td",null,n.default.createElement("div",{className:"btn-group d-none d-lg-table-cell",role:"group"},s,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.editMod(t,a)},title:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit"})),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteMod(t,a)},title:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash"}))),n.default.createElement("div",{className:"dropdown d-block d-lg-none"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuNav","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.default.createElement("i",{className:"fas fa-chevron-circle-down"})),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuNav"},l,n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.editMod(t,a)},alt:o.default.t("admin.edit")},n.default.createElement("i",{className:"fas fa-edit btn-icon"}),o.default.t("admin.edit")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.deleteMod(t,a)},alt:o.default.t("admin.delete")},n.default.createElement("i",{className:"fas fa-trash btn-icon"}),o.default.t("admin.delete")))))))})),n.default.createElement("table",{className:"table table-responsive table-striped"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",{colSpan:"3"},n.default.createElement("h4",null,o.default.t("admin.plugin-mod-list-title"))),n.default.createElement("th",{colSpan:"1"},n.default.createElement("button",{disabled:!this.state.loggedIn,type:"button",className:"btn btn-secondary",onClick:function(t){return e.addMod(t)},title:o.default.t("admin.add")},n.default.createElement("i",{className:"fas fa-plus"})))),n.default.createElement("tr",null,n.default.createElement("th",null,o.default.t("admin.type")),n.default.createElement("th",null,o.default.t("admin.name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.display-name")),n.default.createElement("th",{className:"d-none d-lg-table-cell"},o.default.t("admin.enabled")),n.default.createElement("th",null))),n.default.createElement("tbody",null,t))}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={config:e.config,mods:e.mods,curMod:{},types:e.types,loggedIn:e.loggedIn},t.addMod=t.addMod.bind(t),t.editMod=t.editMod.bind(t),t.deleteMod=t.deleteMod.bind(t),t.switchModStatus=t.switchModStatus.bind(t),t}t.default=m},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=d(l),o=d(a(1));function d(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){this.setState({title:e.title,scope:e.scope,add:e.add,errorList:{},hasError:!1,modSchemes:e.modSchemes,callback:e.callback})}},{key:"closeModal",value:function(e,t){var a=this.state.scope;t?this.state.callback&&(a.name?(a.display_name||delete a.display_name,a.description||delete a.description,this.state.callback(t,a)):this.setState({errorList:{name:o.default.t("admin.scope-error-name")},hasError:!0})):this.state.callback(t)}},{key:"changeName",value:function(e){var t=this.state.scope;t.name=e.target.value,this.setState({scope:t})}},{key:"changePwdMaxAge",value:function(e){var t=this.state.scope;t.password_max_age=parseInt(e.target.value),this.setState({scope:t})}},{key:"changeDisplayName",value:function(e){var t=this.state.scope;t.display_name=e.target.value,this.setState({scope:t})}},{key:"changeDescription",value:function(e){var t=this.state.scope;t.description=e.target.value,this.setState({scope:t})}},{key:"togglePasswordRequired",value:function(e){var t=this.state.scope;t.password_required=!t.password_required,this.setState({scope:t})}},{key:"addScheme",value:function(e,t){var a=this.state.scope;if(!t){var r=0;for(var l in a.scheme)r++;for(t=""+r;void 0!==a.scheme[t];)t=""+ ++r;a.scheme[t]=[]}var n={scheme_name:e};this.state.modSchemes.forEach((function(t){t.name===e&&(n.scheme_type=t.module,n.scheme_display_name=t.display_name)})),a.scheme[t].push(n),this.setState({scope:a})}},{key:"handleRemoveScheme",value:function(e,t,a){var r=this.state.scope;r.scheme[t]&&r.scheme[t].forEach((function(e,l){e.scheme_name===a.scheme_name&&(r.scheme[t].splice(l,1),r.scheme[t].length||delete r.scheme[t])})),this.setState({scope:r})}},{key:"render",value:function(){var e,t,a,r,l,d=this,i=[],m=0,c=[],u=[];for(var f in this.state.hasError&&(l=n.default.createElement("span",{className:"error-input text-right"},o.default.t("admin.error-input"))),this.state.modSchemes.forEach((function(e){e.enabled&&(c.push(e.name),u.push(e.display_name||e.name))})),this.state.scope.scheme)this.state.scope.scheme[f].forEach((function(e,t){0<=c.indexOf(e.scheme_name)&&(u.splice(c.indexOf(e.scheme_name),1),c.splice(c.indexOf(e.scheme_name),1))}));return $.each(this.state.scope.scheme,(function(e,t){var r=[],l=0;t.forEach((function(t,a){r.length&&r.push(n.default.createElement("span",{className:"badge badge-secondary btn-icon-right",key:l++},o.default.t("admin.or"))),r.push(n.default.createElement("a",{href:"#",key:l++,onClick:function(a){return d.handleRemoveScheme(a,e,t)}},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},t.scheme_display_name||t.scheme_name,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))})),i.length&&i.push(n.default.createElement("span",{className:"badge badge-secondary btn-icon-right",key:m++},o.default.t("admin.and"))),c.length&&(r.length&&r.push(n.default.createElement("span",{className:"badge badge-secondary btn-icon-right",key:l++},o.default.t("admin.or"))),a=[],c.forEach((function(t,r){a.push(n.default.createElement("a",{className:"dropdown-item",href:"#",key:r,onClick:function(){return d.addScheme(t,e)}},u[r]))})),r.push(n.default.createElement("div",{className:"dropdown",key:l++},n.default.createElement("button",{className:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.scope-add-scheme")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},a)))),i.push(n.default.createElement("div",{className:"card",style:{width:"18rem"},key:m++},n.default.createElement("div",{className:"card-body"},r)))})),c.length&&(a=[],c.forEach((function(e,t){a.push(n.default.createElement("a",{className:"dropdown-item",href:"#",key:t,onClick:function(){return d.addScheme(e,!1)}},u[t]))})),r=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.scope-add-scheme-group")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},a))),n.default.createElement("div",{className:"modal fade",id:"editScopeModal",tabIndex:"-1",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},n.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("h5",{className:"modal-title",id:"confirmModalLabel"},this.state.title),n.default.createElement("button",{type:"button",className:"close","aria-label":o.default.t("modal.close"),onClick:function(e){return d.closeModal(e,!1)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))),n.default.createElement("div",{className:"modal-body"},n.default.createElement("form",{className:"needs-validation",noValidate:!0},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",(s(e={className:"input-group-text"},"className","input-group-text"),s(e,"htmlFor","scope-name"),e),o.default.t("admin.scope-name"))),n.default.createElement("input",{type:"text",className:this.state.errorList.name?"form-control is-invalid":"form-control",id:"scope-name",placeholder:o.default.t("admin.scope-name-ph"),maxLength:"128",value:this.state.scope.name||"",onChange:function(e){return d.changeName(e)},disabled:!this.state.add})),this.state.errorList.name?n.default.createElement("span",{className:"error-input"},this.state.errorList.name):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"scope-display-name"},o.default.t("admin.scope-display-name"))),n.default.createElement("input",{type:"text",className:"form-control",id:"scope-display-name",placeholder:o.default.t("admin.scope-display-name-ph"),maxLength:"256",value:this.state.scope.display_name||"",onChange:function(e){return d.changeDisplayName(e)}}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"scope-description"},o.default.t("admin.scope-description"))),n.default.createElement("input",{type:"text",className:"form-control",id:"scope-description",placeholder:o.default.t("admin.scope-description-ph"),maxLength:"512",value:this.state.scope.description||"",onChange:function(e){return d.changeDescription(e)}}))),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("h4",null,o.default.t("admin.scope-auth-title"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"scope-scheme-password",onChange:function(e){return d.togglePasswordRequired(e)},checked:this.state.scope.password_required}),n.default.createElement("label",{className:"form-check-label",htmlFor:"scope-scheme-password"},o.default.t("admin.scope-scheme-password"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",(s(t={className:"input-group-text"},"className","input-group-text"),s(t,"htmlFor","scope-password-max-age"),t),o.default.t("admin.scope-password-max-age"))),n.default.createElement("input",{type:"number",step:"1",min:"0",disabled:!this.state.scope.password_required,className:"form-control",id:"password-max-age",placeholder:o.default.t("admin.scope-password-max-age-ph"),value:this.state.scope.password_max_age||0,onChange:function(e){return d.changePwdMaxAge(e)}}))),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("h4",null,o.default.t("admin.scope-auth-schemes-title"))),n.default.createElement("div",{className:"form-group"},i,r))),n.default.createElement("div",{className:"modal-footer"},l,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return d.closeModal(e,!1)}},o.default.t("modal.close")),n.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){return d.closeModal(e,!0)}},o.default.t("modal.ok"))))))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return t.state={title:e.title,scope:e.scope,add:e.add,errorList:{},hasError:!1,modSchemes:e.modSchemes,callback:e.callback},t.closeModal=t.closeModal.bind(t),t.changeName=t.changeName.bind(t),t.changeDisplayName=t.changeDisplayName.bind(t),t.changeDescription=t.changeDescription.bind(t),t.changePwdMaxAge=t.changePwdMaxAge.bind(t),t.togglePasswordRequired=t.togglePasswordRequired.bind(t),t.addScheme=t.addScheme.bind(t),t.handleRemoveScheme=t.handleRemoveScheme.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=m(l),o=m(a(1)),d=m(a(3)),s=m(a(45)),i=m(a(2));function m(e){return e&&e.__esModule?e:{default:e}}var c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(u,[{key:"componentWillReceiveProps",value:function(e){e.mod||(e.mod={}),e.mod.expiration||(e.mod.expiration=600),e.mod.max_use||(e.mod.max_use=0),void 0===e.mod.allow_user_register&&(e.mod.allow_user_register=!0),"client"===e.role&&(void 0===e.mod.parameters["data-format"]&&(e.mod.parameters["data-format"]={}),void 0===e.mod.parameters["data-format"].redirect_uri&&(e.mod.parameters["data-format"].redirect_uri={multiple:!0,read:!0,write:!0}),void 0===e.mod.parameters["data-format"].authorization_type&&(e.mod.parameters["data-format"].authorization_type={multiple:!0,read:!0,write:!0}),void 0===e.mod.parameters["data-format"].sector_identifier_uri&&(e.mod.parameters["data-format"].sector_identifier_uri={multiple:!1,read:!0,write:!0})),this.setState({config:e.config,title:e.title,mod:e.mod,role:e.role,modTypes:e.types,add:e.add,callback:e.callback,parametersValid:!0,nameInvalid:!1,nameInvalidMessage:!1,typeInvalidMessage:!1,hasError:!1})}},{key:"closeModal",value:function(e,t){this.state.callback&&(t?this.setState({check:!0}):this.state.callback(t))}},{key:"changeName",value:function(e){var t=this.state.mod;t.name=e.target.value,this.setState({mod:t})}},{key:"changeDisplayName",value:function(e){var t=this.state.mod;t.display_name=e.target.value,this.setState({mod:t})}},{key:"changeType",value:function(e,t){var a=this.state.mod;a.module=t,this.setState({mod:a})}},{key:"changeExpiration",value:function(e){var t=this.state.mod;t.expiration=parseInt(e.target.value),this.setState({mod:t})}},{key:"changeMaxUse",value:function(e){var t=this.state.mod;t.max_use=parseInt(e.target.value),this.setState({mod:t})}},{key:"toggleReadonly",value:function(e){var t=this.state.mod;t.readonly=!t.readonly,this.setState({mod:t})}},{key:"toggleAllowUserRegister",value:function(){var e=this.state.mod;e.allow_user_register=!e.allow_user_register,this.setState({mod:e})}},{key:"render",value:function(){var e,t,a=this,r=[];if(this.state.add){var l=o.default.t("admin.mod-type-select");this.state.modTypes.forEach((function(e,t){a.state.mod.module===e.name?(l=e.display_name,r.push(n.default.createElement("a",{className:"dropdown-item active",key:t,href:"#",onClick:function(t){return a.changeType(t,e.name)}},e.display_name))):r.push(n.default.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(t){return a.changeType(t,e.name)}},e.display_name))})),e=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownModType","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownModType"},r))}else this.state.modTypes.forEach((function(t,r){a.state.mod.module===t.name&&(e=n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},t.display_name))}));this.state.hasError&&(t=n.default.createElement("span",{className:"error-input text-right"},o.default.t("admin.error-input")));var d="",i="";return"scheme"!==this.state.role?d=n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-readonly",onChange:function(e){return a.toggleReadonly(e)},checked:this.state.mod.readonly||"http"===this.state.mod.module||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-readonly"},o.default.t("admin.mod-readonly"))):i=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-expiration"},o.default.t("admin.mod-expiration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",id:"mod-expiration",placeholder:o.default.t("admin.mod-expiration-ph"),value:this.state.mod.expiration,onChange:function(e){return a.changeExpiration(e)}}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-max-use"},o.default.t("admin.mod-max-use"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",id:"mod-max-use",placeholder:o.default.t("admin.mod-max-use-ph"),value:this.state.mod.max_use,onChange:function(e){return a.changeMaxUse(e)}}))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-allow-user-register",onChange:function(e){return a.toggleAllowUserRegister(e)},checked:this.state.mod.allow_user_register}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-allow-user-register"},o.default.t("admin.mod-allow-user-register")))),n.default.createElement("div",{className:"modal fade",id:"editModModal",tabIndex:"-1",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},n.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("h5",{className:"modal-title",id:"confirmModalLabel"},this.state.title),n.default.createElement("button",{type:"button",className:"close","aria-label":o.default.t("modal.close"),onClick:function(e){return a.closeModal(e,!1)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))),n.default.createElement("div",{className:"modal-body"},n.default.createElement("form",{className:"needs-validation",noValidate:!0},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-type"},o.default.t("admin.mod-type"))),e,n.default.createElement("span",{className:"error-input"+(this.state.typeInvalidMessage?"":" hidden")},this.state.typeInvalidMessage))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-name"},o.default.t("admin.mod-name"))),n.default.createElement("input",{type:"text",className:"form-control"+(this.state.nameInvalid?" is-invalid":""),id:"mod-name",placeholder:o.default.t("admin.mod-name-ph"),maxLength:"128",value:this.state.mod.name||"",onChange:function(e){return a.changeName(e)},disabled:!this.state.add}),n.default.createElement("span",{className:"error-input"+(this.state.nameInvalid?"":" hidden")},this.state.nameInvalidMessage))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-display-name"},o.default.t("admin.mod-display-name"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-display-name",placeholder:o.default.t("admin.mod-display-name-ph"),maxLength:"256",value:this.state.mod.display_name||"",onChange:function(e){return a.changeDisplayName(e)}}))),d,i,n.default.createElement(s.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}))),n.default.createElement("div",{className:"modal-footer"},t,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return a.closeModal(e,!1)}},o.default.t("modal.close")),n.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){return a.closeModal(e,!0)}},o.default.t("modal.ok"))))))}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return e.mod||(e.mod={}),e.mod.expiration||(e.mod.expiration=600),e.mod.max_use||(e.mod.max_use=0),void 0===e.mod.allow_user_register&&(e.mod.allow_user_register=!0),"client"===e.role&&(void 0===e.mod.parameters["data-format"]&&(e.mod.parameters["data-format"]={}),void 0===e.mod.parameters["data-format"].redirect_uri&&(e.mod.parameters["data-format"].redirect_uri={multiple:!0,read:!0,write:!0}),void 0===e.mod.parameters["data-format"].authorization_type&&(e.mod.parameters["data-format"].authorization_type={multiple:!0,read:!0,write:!0}),void 0===e.mod.parameters["data-format"].sector_identifier_uri&&(e.mod.parameters["data-format"].sector_identifier_uri={multiple:!1,read:!0,write:!0})),t.state={config:e.config,title:e.title,mod:e.mod,role:e.role,modTypes:e.types,add:e.add,callback:e.callback,parametersValid:!0,nameInvalid:!1,nameInvalidMessage:!1,typeInvalidMessage:!1,check:!1,hasError:!1},i.default.subscribe("ModEdit",(function(e){"modValid"===e.type?t.setState({check:!1},(function(){t.state.add?t.state.mod.name?t.state.mod.module?d.default.glewlwydRequest("/mod/"+t.state.role+"/"+encodeURIComponent(t.state.mod.name),"GET").then((function(){t.setState({nameInvalid:!0,nameInvalidMessage:o.default.t("admin.error-mod-name-exist"),typeInvalidMessage:!1,hasError:!0})})).fail((function(e){404===e.status&&t.state.callback(!0,t.state.mod)})):t.setState({nameInvalid:!1,nameInvalidMessage:!1,typeInvalidMessage:o.default.t("admin.error-mod-type-mandatory"),hasError:!0}):t.setState({nameInvalid:!0,nameInvalidMessage:o.default.t("admin.error-mod-name-mandatory"),typeInvalidMessage:!1,hasError:!0}):t.state.callback(!0,t.state.mod)})):"modInvalid"===e.type&&t.setState({check:!1,hasError:!0})})),t.closeModal=t.closeModal.bind(t),t.changeName=t.changeName.bind(t),t.changeDisplayName=t.changeDisplayName.bind(t),t.changeType=t.changeType.bind(t),t.toggleReadonly=t.toggleReadonly.bind(t),t.toggleAllowUserRegister=t.toggleAllowUserRegister.bind(t),t}t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=h(l),o=(h(a(1)),h(a(46))),d=h(a(47)),s=h(a(48)),i=h(a(49)),m=h(a(50)),c=h(a(51)),u=h(a(52)),f=h(a(53)),p=h(a(54));function h(e){return e&&e.__esModule?e:{default:e}}var g=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(b,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(b,[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check})}},{key:"render",value:function(){return"mock"===this.state.mod.module?n.default.createElement(o.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"database"===this.state.mod.module?n.default.createElement(d.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"ldap"===this.state.mod.module?n.default.createElement(s.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"http"===this.state.mod.module?n.default.createElement(i.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"email"===this.state.mod.module?n.default.createElement(m.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"webauthn"===this.state.mod.module?n.default.createElement(c.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"otp"===this.state.mod.module?n.default.createElement(u.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"retype-password"===this.state.mod.module?n.default.createElement(f.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"certificate"===this.state.mod.module?n.default.createElement(p.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):""}}]),b);function b(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,e));return t.state={config:e.config,mod:e.mod,role:e.role,check:e.check},t}t.default=g},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeMockUserValue",value:function(e){var t=this.state.mod;t.parameters["username-prefix"]=e.target.value,this.setState({mod:t})}},{key:"changeMockClientValue",value:function(e){var t=this.state.mod;t.parameters["client-id-prefix"]=e.target.value,this.setState({mod:t})}},{key:"changeMockSchemeValue",value:function(e){var t=this.state.mod;t.parameters["mock-value"]=e.target.value,this.setState({mod:t})}},{key:"checkParameters",value:function(){"user"===this.state.role?this.state.mod.parameters["username-prefix"]?(this.setState({hasError:!1}),d.default.sendMessage("ModEdit",{type:"modValid"})):this.setState({hasError:!0}):"client"===this.state.role?this.state.mod.parameters["client-id-prefix"]?(this.setState({hasError:!1}),d.default.sendMessage("ModEdit",{type:"modValid"})):this.setState({hasError:!0}):"scheme"===this.state.role&&(this.state.mod.parameters["mock-value"]?(this.setState({hasError:!1}),d.default.sendMessage("ModEdit",{type:"modValid"})):this.setState({hasError:!0}))}},{key:"render",value:function(){var e=this,t="",a="";return"user"===this.state.role?(this.state.hasError&&(a=" is-invalid",t=n.default.createElement("span",{className:"error-input"},o.default.t("admin.mod-mock-username-prefix-required"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-mock-username-prefix"},o.default.t("admin.mod-username-prefix"))),n.default.createElement("input",{type:"text",className:"form-control"+a,id:"mod-mock-username-prefix",placeholder:o.default.t("admin.mod-username-prefix-ph"),maxLength:"256",value:this.state.mod.parameters["username-prefix"]||"",onChange:function(t){return e.changeMockUserValue(t)}}),t))):"client"===this.state.role?(this.state.hasError&&(a=" is-invalid",t=n.default.createElement("span",{className:"error-input"},o.default.t("admin.mod-mock-client-id-prefix-required"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-mock-client-id-prefix"},o.default.t("admin.mod-client-id-prefix"))),n.default.createElement("input",{type:"text",className:"form-control"+a,id:"mod-mock-client-id-prefix",placeholder:o.default.t("admin.mod-client-id-prefix-ph"),maxLength:"256",value:this.state.mod.parameters["client-id-prefix"]||"",onChange:function(t){return e.changeMockClientValue(t)}}),t))):"scheme"===this.state.role?(this.state.hasError&&(a=" is-invalid",t=n.default.createElement("span",{className:"error-input"},o.default.t("admin.mod-mock-scheme-value-required"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-mock-scheme-value"},o.default.t("admin.mod-scheme-value"))),n.default.createElement("input",{type:"text",className:"form-control"+a,id:"mod-mock-scheme-value",placeholder:o.default.t("admin.mod-scheme-value-ph"),maxLength:"256",value:this.state.mod.parameters["mock-value"]||"",onChange:function(t){return e.changeMockSchemeValue(t)}}),t))):""}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return t.state={mod:e.mod,role:e.role,check:e.check,hasError:!1},t.state.check&&t.checkParameters(),t.changeMockUserValue=t.changeMockUserValue.bind(t),t.changeMockClientValue=t.changeMockClientValue.bind(t),t.changeMockSchemeValue=t.changeMockSchemeValue.bind(t),t.checkParameters=t.checkParameters.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod.parameters||(e.mod.parameters={}),e.mod&&e.mod.parameters&&void 0===e.mod.parameters["use-glewlwyd-connection"]&&(e.mod.parameters["use-glewlwyd-connection"]=!0),this.setState({mod:e.mod,role:e.role,check:e.check},(function(){t.state.check&&t.checkParameters()}))}},{key:"toggleInternalConnection",value:function(e){var t=this.state.mod;t.parameters["use-glewlwyd-connection"]=!t.parameters["use-glewlwyd-connection"],this.setState({mod:t})}},{key:"changeDbType",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["connection-type"]=t,this.setState({mod:a})}},{key:"getDbType",value:function(e){return"sqlite"===e?o.default.t("admin.mod-database-type-sqlite"):"mariadb"===e?o.default.t("admin.mod-database-type-mariadb"):"postgre"===e?o.default.t("admin.mod-database-type-postgre"):o.default.t("admin.mod-database-select-type")}},{key:"changeValue",value:function(e,t){var a=this.state.mod;a.parameters[t]=e.target.value,this.setState({mod:a})}},{key:"addDataFormat",value:function(){var e=this.state.mod;e.parameters["data-format"]||(e.parameters["data-format"]={}),"user"===this.state.role?e.parameters["data-format"][""]={multiple:!1,read:!0,write:!0,"profile-read":!1,"profile-write":!1}:"client"===this.state.role&&(e.parameters["data-format"][""]={multiple:!1,read:!0,write:!0}),this.setState({mod:e})}},{key:"changeDataFormatProperty",value:function(e,t){var a=this.state.mod;a.parameters["data-format"][e.target.value]=a.parameters["data-format"][t],delete a.parameters["data-format"][t],this.setState({mod:a})}},{key:"toggleDataFormatValue",value:function(e,t,a){var r=this.state.mod;r.parameters["data-format"][t][a]=!r.parameters["data-format"][t][a],this.setState({mod:r})}},{key:"deleteDataFormat",value:function(e,t){var a=this.state.mod;delete a.parameters["data-format"][t],this.setState({mod:a})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters["use-glewlwyd-connection"]?this.state.mod.parameters["data-format"]&&Object.keys(this.state.mod.parameters["data-format"]).map((function(a){a||(t=!0,e["data-format"]=o.default.t("admin.mod-data-format-property-error"))})):("sqlite"===this.state.mod.parameters["connection-type"]?this.state.mod.parameters["sqlite-dbpath"]||(t=!0,e["sqlite-dbpath"]=o.default.t("admin.mod-database-sqlite-dbpath-error")):"mariadb"===this.state.mod.parameters["connection-type"]?(this.state.mod.parameters["mariadb-host"]||(t=!0,e["mariadb-host"]=o.default.t("admin.mod-database-mariadb-host-error")),this.state.mod.parameters["mariadb-user"]||(t=!0,e["mariadb-user"]=o.default.t("admin.mod-database-mariadb-user-error")),this.state.mod.parameters["mariadb-password"]||(t=!0,e["mariadb-password"]=o.default.t("admin.mod-database-mariadb-password-error")),this.state.mod.parameters["mariadb-dbname"]||(t=!0,e["mariadb-dbname"]=o.default.t("admin.mod-database-mariadb-dbname-error"))):"postgre"===this.state.mod.parameters["connection-type"]?this.state.mod.parameters["postgre-conninfo"]||(t=!0,e["postgre-conninfo"]=o.default.t("admin.mod-database-postgre-conninfo-error")):(t=!0,e["connection-type"]=o.default.t("admin.mod-database-connection-type-error")),this.state.mod.parameters["data-format"]&&Object.keys(this.state.mod.parameters["data-format"]).map((function(a){a||(t=!0,e["data-format"]=o.default.t("admin.mod-ldap-data-format-property-error"))}))),t?this.setState({errorList:e},(function(){d.default.sendMessage("ModEdit",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e,t,a=this,r=n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-use-internal-connection",onChange:function(e){return a.toggleInternalConnection(e)},checked:this.state.mod.parameters["use-glewlwyd-connection"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-use-internal-connection"},o.default.t("admin.mod-database-use-internal-connection")));this.state.mod.parameters["use-glewlwyd-connection"]||(e=n.default.createElement("div",null,n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownDbType","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.getDbType(this.state.mod.parameters["connection-type"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownDbType"},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return a.changeDbType(e,"sqlite")}},o.default.t("admin.mod-database-type-sqlite")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return a.changeDbType(e,"mariadb")}},o.default.t("admin.mod-database-type-mariadb")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(e){return a.changeDbType(e,"postgre")}},o.default.t("admin.mod-database-type-postgre")))),this.state.errorList["connection-type"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["connection-type"]):""),"sqlite"===this.state.mod.parameters["connection-type"]?t=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-sqlite-dbpath"},o.default.t("admin.mod-database-sqlite-dbpath"))),n.default.createElement("input",{type:"text",className:this.state.errorList["sqlite-dbpath"]?"form-control is-invalid":"form-control",id:"mod-database-sqlite-dbpath",onChange:function(e){return a.changeValue(e,"sqlite-dbpath")},value:this.state.mod.parameters["sqlite-dbpath"],placeholder:o.default.t("admin.mod-database-sqlite-dbpath-ph")})),this.state.errorList["sqlite-dbpath"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["sqlite-dbpath"]):""):"mariadb"===this.state.mod.parameters["connection-type"]?t=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-mariadb-host"},o.default.t("admin.mod-database-mariadb-host"))),n.default.createElement("input",{type:"text",className:this.state.errorList["mariadb-host"]?"form-control is-invalid":"form-control",id:"mod-database-mariadb-host",onChange:function(e){return a.changeValue(e,"mariadb-host")},value:this.state.mod.parameters["mariadb-host"],placeholder:o.default.t("admin.mod-database-mariadb-host-ph")})),this.state.errorList["mariadb-host"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["mariadb-host"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-mariadb-user"},o.default.t("admin.mod-database-mariadb-user"))),n.default.createElement("input",{type:"text",className:this.state.errorList["mariadb-user"]?"form-control is-invalid":"form-control",id:"mod-database-mariadb-user",onChange:function(e){return a.changeValue(e,"mariadb-user")},value:this.state.mod.parameters["mariadb-user"],placeholder:o.default.t("admin.mod-database-mariadb-user-ph")})),this.state.errorList["mariadb-user"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["mariadb-user"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-mariadb-password"},o.default.t("admin.mod-database-mariadb-password"))),n.default.createElement("input",{type:"password",className:this.state.errorList["mariadb-password"]?"form-control is-invalid":"form-control",id:"mod-database-mariadb-password",onChange:function(e){return a.changeValue(e,"mariadb-password")},value:this.state.mod.parameters["mariadb-password"],placeholder:o.default.t("admin.mod-database-mariadb-password-ph")})),this.state.errorList["mariadb-password"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["mariadb-password"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-mariadb-dbname"},o.default.t("admin.mod-database-mariadb-dbname"))),n.default.createElement("input",{type:"text",className:this.state.errorList["mariadb-dbname"]?"form-control is-invalid":"form-control",id:"mod-database-mariadb-dbname",onChange:function(e){return a.changeValue(e,"mariadb-dbname")},value:this.state.mod.parameters["mariadb-dbname"],placeholder:o.default.t("admin.mod-database-mariadb-dbname-ph")})),this.state.errorList["mariadb-dbname"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["mariadb-dbname"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-mariadb-port"},o.default.t("admin.mod-database-mariadb-port"))),n.default.createElement("input",{type:"number",min:"0",max:"65535",step:"1",className:"form-control",id:"mod-database-mariadb-port",onChange:function(e){return a.changeValue(e,"mariadb-port")},value:this.state.mod.parameters["mariadb-port"],placeholder:o.default.t("admin.mod-database-mariadb-port-ph")})))):"postgre"===this.state.mod.parameters["connection-type"]&&(t=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-postgre-conninfo"},o.default.t("admin.mod-database-postgre-conninfo"))),n.default.createElement("input",{type:"text",className:this.state.errorList["postgre-conninfo"]?"form-control is-invalid":"form-control",id:"mod-database-postgre-conninfo",onChange:function(e){return a.changeValue(e,"postgre-conninfo")},value:this.state.mod.parameters["postgre-conninfo"],placeholder:o.default.t("admin.mod-database-postgre-conninfo-ph")})),this.state.errorList["postgre-conninfo"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["postgre-conninfo"]):"")));var l=[],d=0;this.state.mod.parameters["data-format"]&&Object.keys(this.state.mod.parameters["data-format"]).map((function(e){var t=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-data-format-name-"+e},o.default.t("admin.mod-database-data-format-property"))),n.default.createElement("input",{type:"text",className:a.state.errorList["data-format"]?"form-control is-invalid":"form-control",id:"mod-database-data-format-name-"+e,onChange:function(t){return a.changeDataFormatProperty(t,e)},value:e,placeholder:o.default.t("admin.mod-database-data-format-property-ph")})),a.state.errorList["data-format"]?n.default.createElement("span",{className:"error-input"},a.state.errorList["data-format"]):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-multiple-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"multiple")},checked:a.state.mod.parameters["data-format"][e].multiple}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-multiple-"+e},o.default.t("admin.mod-database-data-format-multiple"))));"user"===a.state.role?l.push(n.default.createElement("div",{key:d++},t,n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-read-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"read")},checked:a.state.mod.parameters["data-format"][e].read}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-read-"+e},o.default.t("admin.mod-database-data-format-read"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-write-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"write")},checked:a.state.mod.parameters["data-format"][e].write}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-write-"+e},o.default.t("admin.mod-database-data-format-write"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-profile-read-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"profile-read")},checked:a.state.mod.parameters["data-format"][e]["profile-read"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-profile-read-"+e},o.default.t("admin.mod-database-data-format-profile-read"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-profile-write-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"profile-write")},checked:a.state.mod.parameters["data-format"][e]["profile-write"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-profile-write-"+e},o.default.t("admin.mod-database-data-format-profile-write"))),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return a.deleteDataFormat(t,e)},title:o.default.t("admin.mod-data-format-delete")},n.default.createElement("i",{className:"fas fa-trash"})),n.default.createElement("hr",null))):"client"===a.state.role&&l.push(n.default.createElement("div",{key:d++},t,n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-read-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"read")},checked:a.state.mod.parameters["data-format"][e].read}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-read-"+e},o.default.t("admin.mod-database-data-format-read"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-write-"+e,onChange:function(t){return a.toggleDataFormatValue(t,e,"write")},checked:a.state.mod.parameters["data-format"][e].write}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-write-"+e},o.default.t("admin.mod-database-data-format-write"))),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return a.deleteDataFormat(t,e)},title:o.default.t("admin.mod-data-format-delete")},n.default.createElement("i",{className:"fas fa-trash"})),n.default.createElement("hr",null)))}));var s=n.default.createElement("div",{className:"accordion",id:"accordionParams"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"dataFormatCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseDataFormat","aria-expanded":"true","aria-controls":"collapseDataFormat"},this.state.errorList["data-format"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-data-format")))),n.default.createElement("div",{id:"collapseDataFormat",className:"collapse","aria-labelledby":"dataFormatCard","data-parent":"#accordionParams"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-data-format-message")),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addDataFormat,title:o.default.t("admin.mod-data-format-add")},n.default.createElement("i",{className:"fas fa-plus"})),l))));return"user"===this.state.role?n.default.createElement("div",null,r,e,t,s):"client"===this.state.role?n.default.createElement("div",null,r,e,t,s):""}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod.parameters||(e.mod.parameters={}),void 0===e.mod.parameters["use-glewlwyd-connection"]&&(e.mod.parameters["use-glewlwyd-connection"]=!0),t.state={mod:e.mod,role:e.role,check:e.check,errorList:{}},t.state.check&&t.checkParameters(),t.toggleInternalConnection=t.toggleInternalConnection.bind(t),t.changeDbType=t.changeDbType.bind(t),t.getDbType=t.getDbType.bind(t),t.changeValue=t.changeValue.bind(t),t.addDataFormat=t.addDataFormat.bind(t),t.deleteDataFormat=t.deleteDataFormat.bind(t),t.checkParameters=t.checkParameters.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod.parameters["scope-match"]||(e.mod.parameters["scope-match"]=[]),e.mod.parameters["search-scope"]||(e.mod.parameters["search-scope"]="one"),this.setState({mod:e.mod,role:e.role,check:e.check},(function(){t.state.check&&t.checkParameters()}))}},{key:"addDataFormat",value:function(){var e=this.state.mod;e.parameters["data-format"]||(e.parameters["data-format"]={}),e.parameters["data-format"][""]={property:"",multiple:!1,read:!0,write:!0,"profile-read":!1,"profile-write":!1},this.setState({mod:e})}},{key:"changeDataFormatProperty",value:function(e,t){var a=this.state.mod;a.parameters["data-format"][e.target.value]=a.parameters["data-format"][t],delete a.parameters["data-format"][t],this.setState({mod:a})}},{key:"changeDataFormatLdapProperty",value:function(e,t){var a=this.state.mod;a.parameters["data-format"][t].property=e.target.value,this.setState({mod:a})}},{key:"toggleDataFormatValue",value:function(e,t,a){var r=this.state.mod;r.parameters["data-format"][t][a]=!r.parameters["data-format"][t][a],this.setState({mod:r})}},{key:"toggleDataFormatMultiple",value:function(e,t){var a=this.state.mod;a.parameters["data-format"][t].multiple=!a.parameters["data-format"][t].multiple,this.setState({mod:a})}},{key:"changedataFormatConvert",value:function(e,t,a){var r=this.state.mod;a?r.parameters["data-format"][t].convert=a:delete r.parameters["data-format"][t].convert,this.setState({mod:r})}},{key:"deleteDataFormat",value:function(e,t){var a=this.state.mod;delete a.parameters["data-format"][t],this.setState({mod:a})}},{key:"changeParam",value:function(e,t,a){var r=2<arguments.length&&void 0!==a&&a,l=this.state.mod;l.parameters[t]=r?e.target.value.replace(/ /g,"").split(","):e.target.value,this.setState({mod:l})}},{key:"addScopeMatch",value:function(){var e=this.state.mod;e.parameters["scope-match"]||(e.parameters["scope-match"]=[]),e.parameters["scope-match"].push({"ldap-value":"","scope-value":"",match:"equals"}),this.setState({mod:e})}},{key:"changeScopeMatchProperty",value:function(e,t,a){var r=this.state.mod;r.parameters["scope-match"][t][a]=e.target.value,this.setState({mod:r})}},{key:"changeMatchType",value:function(e,t,a){var r=this.state.mod;r.parameters["scope-match"][t].match=a,this.setState({mod:r})}},{key:"changePasswordAlgorithm",value:function(e,t){var a=this.state.mod;a.parameters["password-algorithm"]=t,this.setState({mod:a})}},{key:"getMatchType",value:function(e){return"contains"===e?o.default.t("admin.mod-ldap-scope-match-contains"):"startswith"===e?o.default.t("admin.mod-ldap-scope-match-startswith"):"endswith"===e?o.default.t("admin.mod-ldap-scope-match-endswith"):o.default.t("admin.mod-ldap-scope-match-equals")}},{key:"changePageSize",value:function(e){var t=this.state.mod;t.parameters["page-size"]=parseInt(e.target.value),this.setState({mod:t})}},{key:"deleteScopeMatch",value:function(e){var t=this.state.mod;t.parameters["scope-match"].splice(e,1),this.setState({mod:t})}},{key:"changeSearchScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["search-scope"]=t,this.setState({mod:a})}},{key:"changeConfidential",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters.confidential=t,this.setState({mod:a})}},{key:"checkParameters",value:function(){var e=this,t={},a=!1;this.state.mod.parameters.uri||(a=!0,t.uri=o.default.t("admin.mod-ldap-uri-error")),this.state.mod.parameters["bind-dn"]||(a=!0,t["bind-dn"]=o.default.t("admin.mod-ldap-bind-dn-error")),this.state.mod.parameters["bind-password"]||(a=!0,t["bind-password"]=o.default.t("admin.mod-ldap-bind-password-error")),this.state.mod.parameters["base-search"]||(a=!0,t["base-search"]=o.default.t("admin.mod-ldap-base-search-error")),this.state.mod.parameters.filter||(a=!0,t.filter=o.default.t("admin.mod-ldap-filter-error")),this.state.mod.parameters["scope-property"]||(a=!0,t["scope-property"]=o.default.t("admin.mod-ldap-scope-property-error")),"user"===this.state.role?this.state.mod.parameters["username-property"]||(a=!0,t["username-property"]=o.default.t("admin.mod-ldap-username-property-error")):this.state.mod.parameters["client_id-property"]||(a=!0,t["client_id-property"]=o.default.t("admin.mod-ldap-client_id-property-error")),this.state.mod.parameters["data-format"]&&Object.keys(this.state.mod.parameters["data-format"]).map((function(r){r?e.state.mod.parameters["data-format"][r].property||(a=!0,t["data-format"]={},t["data-format"][r]=o.default.t("admin.mod-ldap-data-format-property-ldap-error")):(a=!0,t["data-format"]={error:o.default.t("admin.mod-data-format-property-error")})})),this.state.mod.parameters["scope-match"].forEach((function(e,r){e["ldap-value"]||(t["scope-match"]||(t["scope-match"]=[]),t["scope-match"][r]||(t["scope-match"][r]={}),a=!0,t["scope-match"][r].ldap=o.default.t("admin.mod-ldap-scope-match-ldap-value-error")),e["scope-value"]||(t["scope-match"]||(t["scope-match"]=[]),t["scope-match"][r]||(t["scope-match"][r]={}),a=!0,t["scope-match"][r].scope=o.default.t("admin.mod-ldap-scope-match-scope-value-error"))})),this.state.mod.readonly||(this.state.mod.parameters["rdn-property"]||(a=!0,t["rdn-property"]=o.default.t("admin.mod-ldap-rdn-property-error")),this.state.mod.readonly||(this.state.mod.parameters["password-property"]||(a=!0,t["password-property"]=o.default.t("admin.mod-ldap-password-property-error")),"1"!==this.state.mod.parameters.confidential&&"user"!==this.state.role||this.state.mod.parameters["password-algorithm"]||(a=!0,t["password-algorithm"]=o.default.t("admin.mod-ldap-password-algorithm-error"))),this.state.mod.parameters["object-class"]||(a=!0,t["object-class"]=o.default.t("admin.mod-ldap-object-class-error"))),a?this.setState({errorList:t},(function(){d.default.sendMessage("ModEdit",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){"user"===e.state.role?d.default.sendMessage("ModEdit",{type:"modValid"}):"client"===e.state.role&&d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e=this,t=[],a=[],r=0;this.state.mod.parameters["data-format"]&&Object.keys(this.state.mod.parameters["data-format"]).map((function(a){var l="";"user"===e.state.role&&(l=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-read-"+a,onChange:function(t){return e.toggleDataFormatValue(t,a,"read")},checked:e.state.mod.parameters["data-format"][a].read}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-read-"+a},o.default.t("admin.mod-database-data-format-read"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-write-"+a,onChange:function(t){return e.toggleDataFormatValue(t,a,"write")},checked:e.state.mod.parameters["data-format"][a].write}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-write-"+a},o.default.t("admin.mod-database-data-format-write"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-profile-read-"+a,onChange:function(t){return e.toggleDataFormatValue(t,a,"profile-read")},checked:e.state.mod.parameters["data-format"][a]["profile-read"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-profile-read-"+a},o.default.t("admin.mod-database-data-format-profile-read"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-profile-write-"+a,onChange:function(t){return e.toggleDataFormatValue(t,a,"profile-write")},checked:e.state.mod.parameters["data-format"][a]["profile-write"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-profile-write-"+a},o.default.t("admin.mod-database-data-format-profile-write"))))),t.push(n.default.createElement("div",{key:r++},n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-data-format-name-"+a},o.default.t("admin.mod-database-data-format-property"))),n.default.createElement("input",{type:"text",className:e.state.errorList["data-format"]&&e.state.errorList["data-format"].error?"form-control is-invalid":"form-control",id:"mod-database-data-format-name-"+a,onChange:function(t){return e.changeDataFormatProperty(t,a)},value:a,placeholder:o.default.t("admin.mod-database-data-format-property-ph")})),e.state.errorList["data-format"]&&e.state.errorList["data-format"].error?n.default.createElement("span",{className:"error-input"},e.state.errorList["data-format"].error):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-database-data-format-ldap-name-"+a},o.default.t("admin.mod-database-data-format-ldap-property"))),n.default.createElement("input",{type:"text",className:e.state.errorList["data-format"]&&e.state.errorList["data-format"][a]?"form-control is-invalid":"form-control",id:"mod-database-data-format-ldap-name-"+a,onChange:function(t){return e.changeDataFormatLdapProperty(t,a)},value:e.state.mod.parameters["data-format"][a].property,placeholder:o.default.t("admin.mod-database-data-format-ldap-property-ph")})),e.state.errorList["data-format"]&&e.state.errorList["data-format"][a]?n.default.createElement("span",{className:"error-input"},e.state.errorList["data-format"][a]):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-database-data-format-multiple-"+a,onChange:function(t){return e.toggleDataFormatMultiple(t,a)},checked:e.state.mod.parameters["data-format"][a].multiple}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-database-data-format-multiple-"+a},o.default.t("admin.mod-database-data-format-multiple"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"dropdownFormatConvert-"+r},o.default.t("admin.mod-database-data-format-convert"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownFormatConvert-"+r,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-database-data-format-convert-"+(e.state.mod.parameters["data-format"][a].convert?e.state.mod.parameters["data-format"][a].convert:"none"))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownFormatConvert-"+r},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changedataFormatConvert(t,a,!1)}},o.default.t("admin.mod-database-data-format-convert-none")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changedataFormatConvert(t,a,"base64")}},o.default.t("admin.mod-database-data-format-convert-base64")))))),l,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return e.deleteDataFormat(t,a)},title:o.default.t("admin.mod-data-format-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))})),this.state.mod.parameters["scope-match"].forEach((function(t,r){a.push(n.default.createElement("div",{key:r},n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-scope-match-ldap-"+r},o.default.t("admin.mod-ldap-scope-match-ldap"))),n.default.createElement("input",{type:"text",className:e.state.errorList["scope-match"]&&e.state.errorList["scope-match"][r]&&e.state.errorList["scope-match"][r].ldap?"form-control is-invalid":"form-control",id:"mod-ldap-scope-match-ldap-"+r,onChange:function(t){return e.changeScopeMatchProperty(t,r,"ldap-value")},value:t["ldap-value"],placeholder:o.default.t("admin.mod-ldap-scope-match-ldap-ph")})),e.state.errorList["scope-match"]&&e.state.errorList["scope-match"][r]&&e.state.errorList["scope-match"][r].ldap?n.default.createElement("span",{className:"error-input"},e.state.errorList["scope-match"][r].ldap):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-scope-match-scope-"+r},o.default.t("admin.mod-ldap-scope-match-scope"))),n.default.createElement("input",{type:"text",className:e.state.errorList["scope-match"]&&e.state.errorList["scope-match"][r]&&e.state.errorList["scope-match"][r].scope?"form-control is-invalid":"form-control",id:"mod-ldap-scope-match-scope-"+r,onChange:function(t){return e.changeScopeMatchProperty(t,r,"scope-value")},value:t["scope-value"],placeholder:o.default.t("admin.mod-ldap-scope-match-scope-ph")})),e.state.errorList["scope-match"]&&e.state.errorList["scope-match"][r]&&e.state.errorList["scope-match"][r].scope?n.default.createElement("span",{className:"error-input"},e.state.errorList["scope-match"][r].scope):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"dropdownMatchType-"+r},o.default.t("admin.mod-ldap-scope-match"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMatchType-"+r,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.getMatchType(t.match)),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMatchType-"+r},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changeMatchType(t,r,"equals")}},o.default.t("admin.mod-ldap-scope-match-equals")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changeMatchType(t,r,"contains")}},o.default.t("admin.mod-ldap-scope-match-contains")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changeMatchType(t,r,"startswith")}},o.default.t("admin.mod-ldap-scope-match-startswith")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changeMatchType(t,r,"endswith")}},o.default.t("admin.mod-ldap-scope-match-endswith")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return e.deleteScopeMatch(r)},title:o.default.t("admin.mod-ldap-scope-match-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))))}));var l="",d="",s="",i="",m="";return"user"===this.state.role?(l=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-username-property"},o.default.t("admin.mod-ldap-username-property"))),n.default.createElement("input",{type:"text",className:this.state.errorList["username-property"]?"form-control is-invalid":"form-control",id:"mod-ldap-username-property",onChange:function(t){return e.changeParam(t,"username-property",!0)},value:this.state.mod.parameters["username-property"],placeholder:o.default.t("admin.mod-ldap-username-property-ph")})),this.state.errorList["username-property"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["username-property"]):""),d=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-email-property"},o.default.t("admin.mod-ldap-email-property"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-ldap-email-property",onChange:function(t){return e.changeParam(t,"email-property",!0)},value:this.state.mod.parameters["email-property"],placeholder:o.default.t("admin.mod-ldap-email-property-ph")})))):(i=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-client_id-property"},o.default.t("admin.mod-ldap-client_id-property"))),n.default.createElement("input",{type:"text",className:this.state.errorList["client_id-property"]?"form-control is-invalid":"form-control",id:"mod-ldap-username-property",onChange:function(t){return e.changeParam(t,"client_id-property",!0)},value:this.state.mod.parameters["client_id-property"],placeholder:o.default.t("admin.mod-ldap-client_id-property-ph")})),this.state.errorList["client_id-property"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["client_id-property"]):""),s=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-description-property"},o.default.t("admin.mod-ldap-description-property"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-ldap-description-property",onChange:function(t){return e.changeParam(t,"description-property",!0)},value:this.state.mod.parameters["description-property"],placeholder:o.default.t("admin.mod-ldap-description-property-ph")}))),m=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-confidential"},o.default.t("admin.mod-ldap-confidential"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-ldap-confidential","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"1"===this.state.mod.parameters.confidential?o.default.t("admin.mod-ldap-confidential-1"):o.default.t("admin.mod-ldap-confidential-0")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-ldap-search-scope"},n.default.createElement("a",{className:"dropdown-item"+("1"!==this.state.mod.parameters.confidential?" active":""),href:"#",onClick:function(t){return e.changeConfidential(t,"0")}},o.default.t("admin.mod-ldap-confidential-0")),n.default.createElement("a",{className:"dropdown-item"+("1"===this.state.mod.parameters.confidential?" active":""),href:"#",onClick:function(t){return e.changeConfidential(t,"1")}},o.default.t("admin.mod-ldap-confidential-1"))))))),n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-uri"},o.default.t("admin.mod-ldap-uri"))),n.default.createElement("input",{type:"text",className:this.state.errorList.uri?"form-control is-invalid":"form-control",id:"mod-ldap-uri",onChange:function(t){return e.changeParam(t,"uri")},value:this.state.mod.parameters.uri,placeholder:o.default.t("admin.mod-ldap-uri-ph")})),this.state.errorList.uri?n.default.createElement("span",{className:"error-input"},this.state.errorList.uri):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-bind-dn"},o.default.t("admin.mod-ldap-bind-dn"))),n.default.createElement("input",{type:"text",className:this.state.errorList["bind-dn"]?"form-control is-invalid":"form-control",id:"mod-ldap-bind-dn",onChange:function(t){return e.changeParam(t,"bind-dn")},value:this.state.mod.parameters["bind-dn"],placeholder:o.default.t("admin.mod-ldap-bind-dn-ph")})),this.state.errorList["bind-dn"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["bind-dn"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-bind-password"},o.default.t("admin.mod-ldap-bind-password"))),n.default.createElement("input",{type:"password",className:this.state.errorList["bind-password"]?"form-control is-invalid":"form-control",id:"mod-ldap-bind-password",onChange:function(t){return e.changeParam(t,"bind-password")},value:this.state.mod.parameters["bind-password"],placeholder:o.default.t("admin.mod-ldap-bind-password-ph")})),this.state.errorList["bind-password"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["bind-password"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-page-size"},o.default.t("admin.mod-ldap-page-size"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",id:"mod-ldap-page-size",onChange:this.changePageSize,value:this.state.mod.parameters["page-size"],placeholder:o.default.t("admin.mod-ldap-page-size-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-base-search"},o.default.t("admin.mod-ldap-base-search"))),n.default.createElement("input",{type:"text",className:this.state.errorList["base-search"]?"form-control is-invalid":"form-control",id:"mod-ldap-base-search",onChange:function(t){return e.changeParam(t,"base-search")},value:this.state.mod.parameters["base-search"],placeholder:o.default.t("admin.mod-ldap-base-search-ph")})),this.state.errorList["base-search"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["base-search"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-base-search"},o.default.t("admin.mod-ldap-search-scope"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-ldap-search-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-ldap-search-scope-"+this.state.mod.parameters["search-scope"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-ldap-search-scope"},n.default.createElement("a",{className:"dropdown-item"+("one"===this.state.mod.parameters["search-scope"]?" active":""),href:"#",onClick:function(t){return e.changeSearchScope(t,"one")}},o.default.t("admin.mod-ldap-search-scope-one")),n.default.createElement("a",{className:"dropdown-item"+("subtree"===this.state.mod.parameters["search-scope"]?" active":""),href:"#",onClick:function(t){return e.changeSearchScope(t,"subtree")}},o.default.t("admin.mod-ldap-search-scope-subtree")),n.default.createElement("a",{className:"dropdown-item"+("children"===this.state.mod.parameters["search-scope"]?" active":""),href:"#",onClick:function(t){return e.changeSearchScope(t,"children")}},o.default.t("admin.mod-ldap-search-scope-children")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-filter"},o.default.t("admin.mod-ldap-filter"))),n.default.createElement("input",{type:"text",className:this.state.errorList.filter?"form-control is-invalid":"form-control",id:"mod-ldap-filter",onChange:function(t){return e.changeParam(t,"filter")},value:this.state.mod.parameters.filter,placeholder:o.default.t("admin.mod-ldap-filter-ph")})),this.state.errorList.filter?n.default.createElement("span",{className:"error-input"},this.state.errorList.filter):""),l,i,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-name-property"},o.default.t("admin.mod-ldap-name-property"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-ldap-name-property",onChange:function(t){return e.changeParam(t,"name-property",!0)},value:this.state.mod.parameters["name-property"],placeholder:o.default.t("admin.mod-ldap-name-property-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-scope-property"},o.default.t("admin.mod-ldap-scope-property"))),n.default.createElement("input",{type:"text",className:this.state.errorList["scope-property"]?"form-control is-invalid":"form-control",id:"mod-ldap-scope-property",onChange:function(t){return e.changeParam(t,"scope-property",!0)},value:this.state.mod.parameters["scope-property"],placeholder:o.default.t("admin.mod-ldap-scope-property-ph")})),this.state.errorList["scope-property"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["scope-property"]):""),d,s,m,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-password-property"},o.default.t("admin.mod-ldap-password-property"))),n.default.createElement("input",{disabled:this.state.mod.readonly||"1"!==this.state.mod.parameters.confidential&&"client"===this.state.role,type:"text",className:this.state.errorList["password-property"]?"form-control is-invalid":"form-control",id:"mod-ldap-password-property",onChange:function(t){return e.changeParam(t,"password-property")},value:this.state.mod.parameters["password-property"],placeholder:o.default.t("admin.mod-ldap-password-property-ph")})),this.state.errorList["password-property"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["password-property"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"dropdownPasswordAlgorithm"},o.default.t("admin.mod-ldap-password-algorithm"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{disabled:this.state.mod.readonly,className:this.state.errorList["password-algorithm"]?"btn btn-secondary dropdown-toggle is-invalid":"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownPasswordAlgorithm","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.mod.parameters["password-algorithm"]||o.default.t("admin.mod-ldap-password-algorithm-select")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownPasswordAlgorithm"},n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changePasswordAlgorithm(t,"SSHA")}},o.default.t("admin.mod-ldap-password-algorithm-ssha")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changePasswordAlgorithm(t,"SHA")}},o.default.t("admin.mod-ldap-password-algorithm-sha")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changePasswordAlgorithm(t,"SMD5")}},o.default.t("admin.mod-ldap-password-algorithm-smd5")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changePasswordAlgorithm(t,"MD5")}},o.default.t("admin.mod-ldap-password-algorithm-md5")),n.default.createElement("a",{className:"dropdown-item",href:"#",onClick:function(t){return e.changePasswordAlgorithm(t,"PLAIN")}},o.default.t("admin.mod-ldap-password-algorithm-plain")))),this.state.errorList["password-algorithm"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["password-algorithm"]):"")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-rdn-property"},o.default.t("admin.mod-ldap-rdn-property"))),n.default.createElement("input",{disabled:this.state.mod.readonly,type:"text",className:this.state.errorList["rdn-property"]?"form-control is-invalid":"form-control",id:"mod-ldap-rdn-property",onChange:function(t){return e.changeParam(t,"rdn-property")},value:this.state.mod.parameters["rdn-property"],placeholder:o.default.t("admin.mod-ldap-rdn-property-ph")})),this.state.errorList["rdn-property"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["rdn-property"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-ldap-object-class"},o.default.t("admin.mod-ldap-object-class"))),n.default.createElement("input",{disabled:this.state.mod.readonly,type:"text",className:this.state.errorList["object-class"]?"form-control is-invalid":"form-control",id:"mod-ldap-object-class",onChange:function(t){return e.changeParam(t,"object-class",!0)},value:this.state.mod.parameters["object-class"],placeholder:o.default.t("admin.mod-ldap-object-class-ph")})),this.state.errorList["object-class"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["object-class"]):""),n.default.createElement("div",{className:"accordion",id:"accordionParams"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"dataFormatCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseDataFormat","aria-expanded":"true","aria-controls":"collapseDataFormat"},this.state.errorList["data-format"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-data-format")))),n.default.createElement("div",{id:"collapseDataFormat",className:"collapse","aria-labelledby":"dataFormatCard","data-parent":"#accordionParams"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-data-format-message")),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addDataFormat,title:o.default.t("admin.mod-data-format-add")},n.default.createElement("i",{className:"fas fa-plus"})),t))),n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"scopeMatchCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseScopeMatch","aria-expanded":"true","aria-controls":"collapseScopeMatch"},this.state.errorList["scope-match"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-scope-match")))),n.default.createElement("div",{id:"collapseScopeMatch",className:"collapse","aria-labelledby":"scopeMatchCard","data-parent":"#accordionParams"},n.default.createElement("div",{className:"card-body"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addScopeMatch,title:o.default.t("admin.mod-scope-match-add")},n.default.createElement("i",{className:"fas fa-plus"})),a)))))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod.parameters["scope-match"]||(e.mod.parameters["scope-match"]=[]),e.mod.parameters["search-scope"]||(e.mod.parameters["search-scope"]="one"),t.state={mod:e.mod,role:e.role,check:e.check,errorList:{}},t.state.check&&t.checkParameters(),t.addDataFormat=t.addDataFormat.bind(t),t.changeDataFormatProperty=t.changeDataFormatProperty.bind(t),t.changeDataFormatLdapProperty=t.changeDataFormatLdapProperty.bind(t),t.toggleDataFormatValue=t.toggleDataFormatValue.bind(t),t.toggleDataFormatMultiple=t.toggleDataFormatMultiple.bind(t),t.deleteDataFormat=t.deleteDataFormat.bind(t),t.changeParam=t.changeParam.bind(t),t.addScopeMatch=t.addScopeMatch.bind(t),t.changeScopeMatchProperty=t.changeScopeMatchProperty.bind(t),t.changeMatchType=t.changeMatchType.bind(t),t.changedataFormatConvert=t.changedataFormatConvert.bind(t),t.changePasswordAlgorithm=t.changePasswordAlgorithm.bind(t),t.getMatchType=t.getMatchType.bind(t),t.changePageSize=t.changePageSize.bind(t),t.checkParameters=t.checkParameters.bind(t),t.deleteScopeMatch=t.deleteScopeMatch.bind(t),t.changeSearchScope=t.changeSearchScope.bind(t),t.changeConfidential=t.changeConfidential.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=e.target.value,this.setState({mod:a})}},{key:"toggleCheckServerCertificate",value:function(){var e=this.state.mod;e.parameters["check-server-certificate"]=!e.parameters["check-server-certificate"],this.setState({mod:e})}},{key:"addScope",value:function(e,t){var a=this.state.mod;a.parameters["default-scope"]?a.parameters["default-scope"].push(t):a.parameters["default-scope"]=[t],this.setState({mod:a})}},{key:"deleteDefaultScope",value:function(e,t){var a=this.state.mod;a.parameters["default-scope"].splice(t,1),this.setState({mod:a})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters.url||(t=!0,e.url=o.default.t("admin.mod-http-url-error")),this.state.mod.parameters["default-scope"]||"user"!==this.state.role||(t=!0,e["default-scope"]=o.default.t("admin.mod-http-default-scope-error")),this.state.mod.parameters["username-format"]&&!this.state.mod.parameters["username-format"].includes("{username}")&&"user"===this.state.role&&(t=!0,e["username-format"]=o.default.t("admin.mod-http-username-format-error")),t?this.setState({errorList:e},(function(){d.default.sendMessage("ModEdit",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e,t=this;if("user"===this.state.role){var a=[],r=[];this.state.config.pattern.user.forEach((function(e){"scope"===e.name&&e.listElements.forEach((function(e,r){a.push(n.default.createElement("a",{key:r,className:"dropdown-item",href:"#",onClick:function(a){return t.addScope(a,e)}},e))}))})),this.state.mod.parameters["default-scope"]&&this.state.mod.parameters["default-scope"].forEach((function(e,a){r.push(n.default.createElement("a",{className:"btn-icon-right",href:"#",onClick:function(e){return t.deleteDefaultScope(e,a)},key:a},n.default.createElement("span",{className:"badge badge-primary"},e,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))}));var l=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-http-default-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-http-default-scope")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-http-default-scope"},a),n.default.createElement("div",null,r));e=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-default-scope"},o.default.t("admin.mod-http-default-scope"))),l),this.state.errorList["default-scope"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["default-scope"]):"")}return n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-http-url"},o.default.t("admin.mod-http-url"))),n.default.createElement("input",{type:"text",className:this.state.errorList.url?"form-control is-invalid":"form-control",id:"mod-http-url",onChange:function(e){return t.changeParam(e,"url")},value:this.state.mod.parameters.url||"",placeholder:o.default.t("admin.mod-http-url-ph")})),this.state.errorList.url?n.default.createElement("span",{className:"error-input"},this.state.errorList.url):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-check-server-certificate",onChange:function(e){return t.toggleCheckServerCertificate()},checked:this.state.mod.parameters["check-server-certificate"]||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-check-server-certificate"},o.default.t("admin.mod-check-server-certificate"))),e,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-http-username-format"},o.default.t("admin.mod-http-username-format"))),n.default.createElement("input",{type:"text",className:this.state.errorList["username-format"]?"form-control is-invalid":"form-control",id:"mod-http-username-format",onChange:function(e){return t.changeParam(e,"username-format")},value:this.state.mod.parameters["username-format"]||"",placeholder:o.default.t("admin.mod-http-username-format-ph")})),this.state.errorList["username-format"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["username-format"]):""))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1,errorList:{}},t.state.check&&t.checkParameters(),t.changeParam=t.changeParam.bind(t),t.toggleCheckServerCertificate=t.toggleCheckServerCertificate.bind(t),t.checkParameters=t.checkParameters.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod||(e.mod={parameters:{}}),e.mod.parameters["code-length"]||(e.mod.parameters["code-length"]=6),e.mod.parameters["code-duration"]||(e.mod.parameters["code-duration"]=600),e.mod.parameters.port||(e.mod.parameters.port=0),this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t,a){var r=this.state.mod;r.parameters[t]=a?parseInt(e.target.value):e.target.value,this.setState({mod:r})}},{key:"toggleUseTls",value:function(){var e=this.state.mod;e.parameters["use-tls"]=!e.parameters["use-tls"],this.setState({mod:e})}},{key:"toggleCheckServerCertificate",value:function(){var e=this.state.mod;e.parameters["check-certificate"]=!e.parameters["check-certificate"],this.setState({mod:e})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters["code-length"]||(t=!0,e["code-length"]=o.default.t("admin.mod-email-code-length-error")),this.state.mod.parameters["code-duration"]||(t=!0,e["code-duration"]=o.default.t("admin.mod-email-code-duration-error")),this.state.mod.parameters.host||(t=!0,e.host=o.default.t("admin.mod-email-host-error")),this.state.mod.parameters.from||(t=!0,e.from=o.default.t("admin.mod-email-from-error")),this.state.mod.parameters.subject||(t=!0,e.subject=o.default.t("admin.mod-email-subject-error")),this.state.mod.parameters["body-pattern"]&&this.state.mod.parameters["body-pattern"].search("{CODE}")||(t=!0,e["body-pattern"]=o.default.t("admin.mod-email-body-pattern-error")),t?this.setState({errorList:e}):this.setState({errorList:{}},(function(){d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e=this;return n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-code-length"},o.default.t("admin.mod-email-code-length"))),n.default.createElement("input",{type:"number",min:"0",max:"65536",step:"1",className:this.state.errorList["code-length"]?"form-control is-invalid":"form-control",id:"mod-email-code-length",onChange:function(t){return e.changeParam(t,"code-length")},value:this.state.mod.parameters["code-length"],placeholder:o.default.t("admin.mod-email-code-length-ph")})),this.state.errorList["code-length"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["code-length"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-code-duration"},o.default.t("admin.mod-email-code-duration"))),n.default.createElement("input",{type:"number",min:"0",max:"65536",step:"1",className:this.state.errorList["code-duration"]?"form-control is-invalid":"form-control",id:"mod-email-code-duration",onChange:function(t){return e.changeParam(t,"code-duration")},value:this.state.mod.parameters["code-duration"],placeholder:o.default.t("admin.mod-email-code-duration-ph")})),this.state.errorList["code-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["code-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-host"},o.default.t("admin.mod-email-host"))),n.default.createElement("input",{type:"text",className:this.state.errorList.host?"form-control is-invalid":"form-control",id:"mod-email-host",onChange:function(t){return e.changeParam(t,"host")},value:this.state.mod.parameters.host,placeholder:o.default.t("admin.mod-email-host-ph")})),this.state.errorList.host?n.default.createElement("span",{className:"error-input"},this.state.errorList.host):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-port"},o.default.t("admin.mod-email-port"))),n.default.createElement("input",{type:"number",min:"0",max:"65536",step:"1",className:this.state.errorList.port?"form-control is-invalid":"form-control",id:"mod-email-port",onChange:function(t){return e.changeParam(t,"port",!0)},value:this.state.mod.parameters.port,placeholder:o.default.t("admin.mod-email-port-ph")})),this.state.errorList.port?n.default.createElement("span",{className:"error-input"},this.state.errorList.port):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-email-use-tls",onChange:function(t){return e.toggleUseTls()},checked:this.state.mod.parameters["use-tls"]||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-email-use-tls"},o.default.t("admin.mod-email-use-tls"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",disabled:!this.state.mod.parameters["use-tls"],id:"mod-email-check-certificate",onChange:function(t){return e.toggleCheckServerCertificate()},checked:this.state.mod.parameters["check-certificate"]||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-email-check-certificate"},o.default.t("admin.mod-email-check-certificate"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-user"},o.default.t("admin.mod-email-user"))),n.default.createElement("input",{type:"text",className:this.state.errorList.user?"form-control is-invalid":"form-control",id:"mod-email-user",onChange:function(t){return e.changeParam(t,"user")},value:this.state.mod.parameters.user,placeholder:o.default.t("admin.mod-email-user-ph")})),this.state.errorList.user?n.default.createElement("span",{className:"error-input"},this.state.errorList.user):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-password"},o.default.t("admin.mod-email-password"))),n.default.createElement("input",{type:"password",className:this.state.errorList.password?"form-control is-invalid":"form-control",id:"mod-email-password",onChange:function(t){return e.changeParam(t,"password")},value:this.state.mod.parameters.password,placeholder:o.default.t("admin.mod-email-password-ph")})),this.state.errorList.password?n.default.createElement("span",{className:"error-input"},this.state.errorList.password):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-from"},o.default.t("admin.mod-email-from"))),n.default.createElement("input",{type:"text",className:this.state.errorList.from?"form-control is-invalid":"form-control",id:"mod-email-from",onChange:function(t){return e.changeParam(t,"from")},value:this.state.mod.parameters.from,placeholder:o.default.t("admin.mod-email-from-ph")})),this.state.errorList.from?n.default.createElement("span",{className:"error-input"},this.state.errorList.from):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-email-subject"},o.default.t("admin.mod-email-subject"))),n.default.createElement("input",{type:"text",className:this.state.errorList.subject?"form-control is-invalid":"form-control",id:"mod-email-subject",onChange:function(t){return e.changeParam(t,"subject")},value:this.state.mod.parameters.subject||"",placeholder:o.default.t("admin.mod-email-subject-ph")})),this.state.errorList.subject?n.default.createElement("span",{className:"error-input"},this.state.errorList.subject):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-email-body-pattern"))),n.default.createElement("textarea",{className:this.state.errorList["body-pattern"]?"form-control is-invalid":"form-control",id:"mod-email-body-pattern",onChange:function(t){return e.changeParam(t,"body-pattern")},placeholder:o.default.t("admin.mod-email-body-pattern-ph"),defaultValue:this.state.mod.parameters["body-pattern"]||""})),this.state.errorList["body-pattern"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["body-pattern"]):""))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod||(e.mod={parameters:{}}),e.mod.parameters["code-length"]||(e.mod.parameters["code-length"]=6),e.mod.parameters["code-duration"]||(e.mod.parameters["code-duration"]=600),e.mod.parameters.port||(e.mod.parameters.port=0),t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1,errorList:{}},t.state.check&&t.checkParameters(),t.changeParam=t.changeParam.bind(t),t.toggleUseTls=t.toggleUseTls.bind(t),t.toggleCheckServerCertificate=t.toggleCheckServerCertificate.bind(t),t.checkParameters=t.checkParameters.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t,a){var r=this.state.mod;r.parameters[t]=a?parseInt(e.target.value):e.target.value,this.setState({mod:r})}},{key:"togglePubkey",value:function(e,t){var a=this.state.mod;-1<a.parameters["pubKey-cred-params"].indexOf(t)?a.parameters["pubKey-cred-params"].splice(a.parameters["pubKey-cred-params"].indexOf(t),1):a.parameters["pubKey-cred-params"].push(t),this.setState({mod:a})}},{key:"toggleSessionMandatory",value:function(e){var t=this.state.mod;t.parameters["session-mandatory"]=!t.parameters["session-mandatory"],this.setState({mod:t})}},{key:"toggleForceFmtNone",value:function(e){var t=this.state.mod;t.parameters["force-fmt-none"]=!t.parameters["force-fmt-none"],this.setState({mod:t})}},{key:"toggleFmt",value:function(e,t){var a=this.state.mod;a.parameters.fmt[t]=!a.parameters.fmt[t],this.setState({mod:a})}},{key:"changeSIParam",value:function(e,t,a){var r=this.state.mod;r.parameters[t]=a,this.setState({mod:r})}},{key:"generateSeed",value:function(){var e=this.state.mod;e.parameters.seed=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),this.setState({mod:e})}},{key:"handleChangeRootCaPath",value:function(e){this.setState({rootCaPath:e.target.value})}},{key:"addRootCaPath",value:function(){if(this.state.rootCaPath){var e=this.state.mod;e.parameters["root-ca-list"].push(this.state.rootCaPath),this.setState({rootCaPath:"",mod:e})}}},{key:"deleteCaPath",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["root-ca-list"].splice(t,1),this.setState({mod:a})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters["challenge-length"]||(t=!0,e["challenge-length"]=o.default.t("admin.mod-webauthn-challenge-length-error")),this.state.mod.parameters["credential-expiration"]||(t=!0,e["credential-expiration"]=o.default.t("admin.mod-webauthn-credential-expiration-error")),this.state.mod.parameters["credential-expiration"]||(t=!0,e["credential-expiration"]=o.default.t("admin.mod-webauthn-credential-expiration-error")),this.state.mod.parameters["rp-origin"]||(t=!0,e["rp-origin"]=o.default.t("admin.mod-webauthn-rp-origin-error")),this.state.mod.parameters["pubKey-cred-params"].length||(t=!0,e["pubKey-cred-params"]=o.default.t("admin.mod-webauthn-pubKey-cred-params-error")),this.state.mod.parameters.fmt.packed||this.state.mod.parameters.fmt.tpm||this.state.mod.parameters.fmt["android-key"]||this.state.mod.parameters.fmt["android-safetynet"]||this.state.mod.parameters.fmt["fido-u2f"]||this.state.mod.parameters.fmt.none||(t=!0,e.fmt=o.default.t("admin.mod-webauthn-fmt-error")),t?this.setState({errorList:e}):this.setState({errorList:{}},(function(){d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e=this,t=[];return this.state.mod.parameters["root-ca-list"].forEach((function(a,r){t.push(n.default.createElement("div",null,n.default.createElement("a",{href:"#",onClick:function(t){return e.deleteCaPath(t,r)},key:r},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},a,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"}))))))})),n.default.createElement("div",null,n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-session-mandatory-check",checked:this.state.mod.parameters["session-mandatory"],onChange:function(t){return e.toggleSessionMandatory(t)}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-session-mandatory-check"},o.default.t("admin.mod-webauthn-session-mandatory"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-force-fmt-none",checked:this.state.mod.parameters["force-fmt-none"],onChange:function(t){return e.toggleForceFmtNone(t)}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-force-fmt-none"},o.default.t("admin.mod-webauthn-force-fmt-none"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-seed"},o.default.t("admin.mod-webauthn-seed")),n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("input",{type:"text",className:this.state.errorList.seed?"form-control is-invalid":"form-control",id:"mod-webauthn-seed",onChange:function(t){return e.changeParam(t,"seed")},value:this.state.mod.parameters.seed,placeholder:o.default.t("admin.mod-webauthn-seed-ph"),disabled:this.state.mod.parameters["session-mandatory"]}),n.default.createElement("div",{className:"input-group-append"},n.default.createElement("button",{className:"btn btn-outline-secondary",type:"button",title:o.default.t("admin.mod-webauthn-seed-generate"),onClick:this.generateSeed},o.default.t("admin.mod-webauthn-seed-generate"))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-challenge-length"},o.default.t("admin.mod-webauthn-challenge-length")),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["challenge-length"]?"form-control is-invalid":"form-control",id:"mod-webauthn-challenge-length",onChange:function(t){return e.changeParam(t,"challenge-length")},value:this.state.mod.parameters["challenge-length"],placeholder:o.default.t("admin.mod-webauthn-challenge-length-ph")}),this.state.errorList["challenge-length"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["challenge-length"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-credential-expiration"},o.default.t("admin.mod-webauthn-credential-expiration")),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["credential-expiration"]?"form-control is-invalid":"form-control",id:"mod-webauthn-credential-expiration",onChange:function(t){return e.changeParam(t,"credential-expiration",!0)},value:this.state.mod.parameters["credential-expiration"],placeholder:o.default.t("admin.mod-webauthn-credential-expiration-ph")}),this.state.errorList["credential-expiration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["credential-expiration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-credential-assertion"},o.default.t("admin.mod-webauthn-credential-assertion")),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["credential-assertion"]?"form-control is-invalid":"form-control",id:"mod-webauthn-credential-assertion",onChange:function(t){return e.changeParam(t,"credential-assertion",!0)},value:this.state.mod.parameters["credential-assertion"],placeholder:o.default.t("admin.mod-webauthn-credential-assertion-ph")}),this.state.errorList["credential-assertion"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["credential-assertion"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-rp-origin"},o.default.t("admin.mod-webauthn-rp-origin")),n.default.createElement("input",{type:"text",className:this.state.errorList["rp-origin"]?"form-control is-invalid":"form-control",id:"mod-webauthn-rp-origin",onChange:function(t){return e.changeParam(t,"rp-origin")},value:this.state.mod.parameters["rp-origin"],placeholder:o.default.t("admin.mod-webauthn-rp-origin-ph")}),this.state.errorList["rp-origin"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["rp-origin"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-fmt-params"},o.default.t("admin.mod-webauthn-fmt-params")),n.default.createElement("ul",null,n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-fmt-packed",checked:this.state.mod.parameters.fmt.packed,onChange:function(t){return e.toggleFmt(t,"packed")}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-fmt-packed"},o.default.t("admin.mod-webauthn-fmt-packed-label"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-fmt-tpm",checked:this.state.mod.parameters.fmt.tpm,onChange:function(t){return e.toggleFmt(t,"tpm")},disabled:!0}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-fmt-tpm",title:o.default.t("admin.mod-webauthn-unsupported")},o.default.t("admin.mod-webauthn-fmt-tpm-label"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-fmt-android-key",checked:this.state.mod.parameters.fmt["android-key"],onChange:function(t){return e.toggleFmt(t,"android-key")},disabled:!0}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-fmt-android-key",title:o.default.t("admin.mod-webauthn-unsupported")},o.default.t("admin.mod-webauthn-fmt-android-key-label"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-fmt-android-safetynet",checked:this.state.mod.parameters.fmt["android-safetynet"],onChange:function(t){return e.toggleFmt(t,"android-safetynet")}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-fmt-android-safetynet"},o.default.t("admin.mod-webauthn-fmt-android-safetynet-label"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-fmt-fido-u2f",checked:this.state.mod.parameters.fmt["fido-u2f"],onChange:function(t){return e.toggleFmt(t,"fido-u2f")}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-fmt-fido-u2f"},o.default.t("admin.mod-webauthn-fmt-fido-u2f-label"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-fmt-none",checked:this.state.mod.parameters.fmt.none,onChange:function(t){return e.toggleFmt(t,"none")}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-fmt-none"},o.default.t("admin.mod-webauthn-fmt-none-label")))),this.state.errorList.fmt?n.default.createElement("span",{className:"error-input"},this.state.errorList.fmt):""),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-pubKey-cred-params"},o.default.t("admin.mod-webauthn-pubKey-cred-params")),n.default.createElement("ul",null,n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-pubKey-cred-params-ecdsa-sha256-check",checked:-1<this.state.mod.parameters["pubKey-cred-params"].indexOf(-7),onChange:function(t){return e.togglePubkey(t,-7)}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-pubKey-cred-params-ecdsa-sha256-check"},o.default.t("admin.mod-webauthn-pubKey-cred-params-label-ecdsa-sha256"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-pubKey-cred-params-ecdsa-sha384-check",checked:-1<this.state.mod.parameters["pubKey-cred-params"].indexOf(-35),onChange:function(t){return e.togglePubkey(t,-35)}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-pubKey-cred-params-ecdsa-sha384-check"},o.default.t("admin.mod-webauthn-pubKey-cred-params-label-ecdsa-sha384"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-pubKey-cred-params-ecdsa-sha512-check",checked:-1<this.state.mod.parameters["pubKey-cred-params"].indexOf(-36),onChange:function(t){return e.togglePubkey(t,-36)}}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-pubKey-cred-params-ecdsa-sha512-check"},o.default.t("admin.mod-webauthn-pubKey-cred-params-label-ecdsa-sha512"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-pubKey-cred-params-rsa-sha256-check",checked:-1<this.state.mod.parameters["pubKey-cred-params"].indexOf(-257),onChange:function(t){return e.togglePubkey(t,-257)},disabled:!0}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-pubKey-cred-params-rsa-sha256-check",title:o.default.t("admin.mod-webauthn-unsupported")},o.default.t("admin.mod-webauthn-pubKey-cred-params-label-rsa-sha256"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-pubKey-cred-params-rsa-sha384-check",checked:-1<this.state.mod.parameters["pubKey-cred-params"].indexOf(-258),onChange:function(t){return e.togglePubkey(t,-258)},disabled:!0}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-pubKey-cred-params-rsa-sha384-check",title:o.default.t("admin.mod-webauthn-unsupported")},o.default.t("admin.mod-webauthn-pubKey-cred-params-label-rsa-sha384"))),n.default.createElement("li",null,n.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"mod-webauthn-pubKey-cred-params-rsa-sha512-check",checked:-1<this.state.mod.parameters["pubKey-cred-params"].indexOf(-259),onChange:function(t){return e.togglePubkey(t,-259)},disabled:!0}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-webauthn-pubKey-cred-params-rsa-sha512-check",title:o.default.t("admin.mod-webauthn-unsupported")},o.default.t("admin.mod-webauthn-pubKey-cred-params-label-rsa-sha512")))),this.state.errorList["pubKey-cred-params"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["pubKey-cred-params"]):""),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",null,o.default.t("admin.mod-webauthn-root-ca-list"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("a",{href:"https://developers.yubico.com/U2F/yubico-u2f-ca-certs.txt",className:"badge badge-primary",target:"_blank"},o.default.t("admin.mod-webauthn-root-ca-yubico-link"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"webauthn-root-ca-path-input"},o.default.t("admin.mod-webauthn-root-ca-path")),n.default.createElement("div",{className:"input-group"},n.default.createElement("input",{type:"text",className:"form-control",id:"webauthn-root-ca-path-input",placeholder:o.default.t("admin.mod-webauthn-root-ca-path-ph"),onChange:this.handleChangeRootCaPath,value:this.state.rootCaPath}),n.default.createElement("div",{className:"input-group-append"},n.default.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.addRootCaPath,title:o.default.t("modal.list-add-title")},n.default.createElement("i",{className:"fas fa-plus"})))),n.default.createElement("div",{className:"btn-icon-right"},t)),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",null,o.default.t("admin.mod-webauthn-safetynet-integrity-params"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("a",{href:"https://developer.android.com/training/safetynet/attestation#potential-integrity-verdicts",className:"badge badge-primary",target:"_blank"},o.default.t("admin.mod-webauthn-safetynet-integrity-link"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-safetynet-integrity-ctsProfileMatch"},o.default.t("admin.mod-webauthn-safetynet-integrity-ctsProfileMatch")),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-webauthn-safetynet-integrity-ctsProfileMatch","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-webauthn-safetynet-integrity-"+this.state.mod.parameters.ctsProfileMatch)),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-webauthn-safetynet-integrity-ctsProfileMatch"},n.default.createElement("a",{className:"dropdown-item"+(-1===this.state.mod.parameters.ctsProfileMatch?" active":""),href:"#",onClick:function(t){return e.changeSIParam(t,"ctsProfileMatch",-1)}},o.default.t("admin.mod-webauthn-safetynet-integrity--1")),n.default.createElement("a",{className:"dropdown-item"+(0===this.state.mod.parameters.ctsProfileMatch?" active":""),href:"#",onClick:function(t){return e.changeSIParam(t,"ctsProfileMatch",0)}},o.default.t("admin.mod-webauthn-safetynet-integrity-0")),n.default.createElement("a",{className:"dropdown-item"+(1===this.state.mod.parameters.ctsProfileMatch?" active":""),href:"#",onClick:function(t){return e.changeSIParam(t,"ctsProfileMatch",1)}},o.default.t("admin.mod-webauthn-safetynet-integrity-1"))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-webauthn-safetynet-integrity-basicIntegrity"},o.default.t("admin.mod-webauthn-safetynet-integrity-basicIntegrity")),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-webauthn-safetynet-integrity-basicIntegrity","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-webauthn-safetynet-integrity-"+this.state.mod.parameters.basicIntegrity)),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-webauthn-safetynet-integrity-basicIntegrity"},n.default.createElement("a",{className:"dropdown-item"+(-1===this.state.mod.parameters.basicIntegrity?" active":""),href:"#",onClick:function(t){return e.changeSIParam(t,"basicIntegrity",-1)}},o.default.t("admin.mod-webauthn-safetynet-integrity--1")),n.default.createElement("a",{className:"dropdown-item"+(0===this.state.mod.parameters.basicIntegrity?" active":""),href:"#",onClick:function(t){return e.changeSIParam(t,"basicIntegrity",0)}},o.default.t("admin.mod-webauthn-safetynet-integrity-0")),n.default.createElement("a",{className:"dropdown-item"+(1===this.state.mod.parameters.basicIntegrity?" active":""),href:"#",onClick:function(t){return e.changeSIParam(t,"basicIntegrity",1)}},o.default.t("admin.mod-webauthn-safetynet-integrity-1"))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("label",{htmlFor:"mod-google-root-ca-r2"},o.default.t("admin.mod-webauthn-google-root-ca-r2")),n.default.createElement("a",{href:"https://pki.goog/",className:"badge badge-primary",target:"_blank"},o.default.t("admin.mod-webauthn-google-root-ca-r2-download-link"),n.default.createElement("i",{className:"fas fa-external-link-alt btn-icon-right"})),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-google-root-ca-r2",onChange:function(t){return e.changeParam(t,"google-root-ca-r2")},value:this.state.mod.parameters["google-root-ca-r2"],placeholder:o.default.t("admin.mod-webauthn-google-root-ca-r2-ph")})))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod||(e.mod={parameters:{}}),e.mod.parameters["challenge-length"]||(e.mod.parameters["challenge-length"]=64),e.mod.parameters["rp-origin"]||(e.mod.parameters["rp-origin"]=location.protocol+"//"+location.host),e.mod.parameters["pubKey-cred-params"]||(e.mod.parameters["pubKey-cred-params"]=[-7,-35,-36]),e.mod.parameters["credential-expiration"]||(e.mod.parameters["credential-expiration"]=120),e.mod.parameters["credential-assertion"]||(e.mod.parameters["credential-assertion"]=120),void 0===e.mod.parameters.ctsProfileMatch&&(e.mod.parameters.ctsProfileMatch=1),void 0===e.mod.parameters.basicIntegrity&&(e.mod.parameters.basicIntegrity=1),void 0===e.mod.parameters["session-mandatory"]&&(e.mod.parameters["session-mandatory"]=!1),void 0===e.mod.parameters.fmt&&(e.mod.parameters.fmt={packed:!0,tpm:!1,"android-key":!1,"android-safetynet":!0,"fido-u2f":!0,none:!0}),void 0===e.mod.parameters.seed&&(e.mod.parameters.seed=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),void 0===e.mod.parameters["root-ca-list"]&&(e.mod.parameters["root-ca-list"]=[]),t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1,errorList:{},rootCaPath:""},t.state.check&&t.checkParameters(),t.changeParam=t.changeParam.bind(t),t.checkParameters=t.checkParameters.bind(t),t.togglePubkey=t.togglePubkey.bind(t),t.changeSIParam=t.changeSIParam.bind(t),t.toggleSessionMandatory=t.toggleSessionMandatory.bind(t),t.generateSeed=t.generateSeed.bind(t),t.toggleForceFmtNone=t.toggleForceFmtNone.bind(t),t.handleChangeRootCaPath=t.handleChangeRootCaPath.bind(t),t.addRootCaPath=t.addRootCaPath.bind(t),t.deleteCaPath=t.deleteCaPath.bind(t),t.toggleFmt=t.toggleFmt.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod||(e.mod={parameters:{}}),e.mod.parameters.issuer||(e.mod.parameters.issuer=location.host),void 0===e.mod.parameters["secret-minimum-size"]&&(e.mod.parameters["secret-minimum-size"]=16),void 0===e.mod.parameters["otp-length"]&&(e.mod.parameters["otp-length"]=6),void 0===e.mod.parameters["hotp-allow"]&&(e.mod.parameters["hotp-allow"]=!0),void 0===e.mod.parameters["hotp-window"]&&(e.mod.parameters["hotp-window"]=0),void 0===e.mod.parameters["totp-allow"]&&(e.mod.parameters["totp-allow"]=!0),void 0===e.mod.parameters["totp-window"]&&(e.mod.parameters["totp-window"]=30),void 0===e.mod.parameters["totp-start-offset"]&&(e.mod.parameters["totp-start-offset"]=0),this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t,a){var r=this.state.mod;r.parameters[t]=a?parseInt(e.target.value):e.target.value,this.setState({mod:r})}},{key:"toggleParam",value:function(e){var t=this.state.mod;t.parameters[e]=!t.parameters[e],this.setState({mod:t})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters.issuer||(t=!0,e.issuer=o.default.t("admin.mod-otp-issuer-error")),this.state.mod.parameters["secret-minimum-size"]||(t=!0,e["secret-minimum-size"]=o.default.t("admin.mod-otp-secret-minimum-size-error")),this.state.mod.parameters["otp-length"]||(t=!0,e["otp-length"]=o.default.t("admin.mod-otp-otp-length-error")),this.state.mod.parameters["hotp-allow"]&&""===this.state.mod.parameters["hotp-window"]&&(t=!0,e["hotp-window"]=o.default.t("admin.mod-otp-hotp-window-error")),this.state.mod.parameters["totp-allow"]&&""===this.state.mod.parameters["totp-window"]&&(t=!0,e["totp-window"]=o.default.t("admin.mod-otp-totp-window-error")),this.state.mod.parameters["totp-allow"]&&""===this.state.mod.parameters["totp-start-offset"]&&(t=!0,e["totp-start-offset"]=o.default.t("admin.mod-otp-totp-start-offset-error")),t?this.setState({errorList:e}):this.setState({errorList:{}},(function(){d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e=this;return n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-otp-issuer"},o.default.t("admin.mod-otp-issuer"))),n.default.createElement("input",{type:"text",className:this.state.errorList.issuer?"form-control is-invalid":"form-control",id:"mod-otp-issuer",onChange:function(t){return e.changeParam(t,"issuer")},value:this.state.mod.parameters.issuer,placeholder:o.default.t("admin.mod-otp-issuer-ph")})),this.state.errorList.issuer?n.default.createElement("span",{className:"error-input"},this.state.errorList.issuer):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-otp-secret-minimum-size"},o.default.t("admin.mod-otp-secret-minimum-size"))),n.default.createElement("input",{type:"number",min:"0",max:"128",step:"1",className:this.state.errorList["secret-minimum-size"]?"form-control is-invalid":"form-control",id:"mod-otp-secret-minimum-size",onChange:function(t){return e.changeParam(t,"secret-minimum-size",1)},value:this.state.mod.parameters["secret-minimum-size"],placeholder:o.default.t("admin.mod-otp-secret-minimum-size-ph")})),this.state.errorList["secret-minimum-size"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["secret-minimum-size"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-otp-otp-length"},o.default.t("admin.mod-otp-otp-length"))),n.default.createElement("input",{type:"number",min:"6",max:"8",step:"1",className:this.state.errorList["otp-length"]?"form-control is-invalid":"form-control",id:"mod-otp-otp-length",onChange:function(t){return e.changeParam(t,"otp-length",1)},value:this.state.mod.parameters["otp-length"],placeholder:o.default.t("admin.mod-otp-otp-length-ph")})),this.state.errorList["otp-length"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["otp-length"]):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-otp-hotp-allow",onChange:function(t){return e.toggleParam("hotp-allow")},checked:this.state.mod.parameters["hotp-allow"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-otp-hotp-allow"},o.default.t("admin.mod-otp-hotp-allow"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-otp-hotp-window"},o.default.t("admin.mod-otp-hotp-window"))),n.default.createElement("input",{type:"number",min:"0",max:"16",step:"1",className:this.state.errorList["hotp-window"]?"form-control is-invalid":"form-control",id:"mod-otp-hotp-window",onChange:function(t){return e.changeParam(t,"hotp-window",1)},value:this.state.mod.parameters["hotp-window"],placeholder:o.default.t("admin.mod-otp-hotp-window-ph"),disabled:!this.state.mod.parameters["hotp-allow"]})),this.state.errorList["hotp-window"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["hotp-window"]):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-otp-totp-allow",onChange:function(t){return e.toggleParam("totp-allow")},checked:this.state.mod.parameters["totp-allow"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-otp-totp-allow"},o.default.t("admin.mod-otp-totp-allow"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-otp-totp-window"},o.default.t("admin.mod-otp-totp-window"))),n.default.createElement("input",{type:"number",min:"0",max:"16",step:"1",className:this.state.errorList["totp-window"]?"form-control is-invalid":"form-control",id:"mod-otp-totp-window",onChange:function(t){return e.changeParam(t,"totp-window",1)},value:this.state.mod.parameters["totp-window"],placeholder:o.default.t("admin.mod-otp-totp-window-ph"),disabled:!this.state.mod.parameters["totp-allow"]})),this.state.errorList["totp-window"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["totp-window"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-otp-totp-start-offset"},o.default.t("admin.mod-otp-totp-start-offset"))),n.default.createElement("input",{type:"number",min:"0",max:"16",step:"1",className:this.state.errorList["totp-start-offset"]?"form-control is-invalid":"form-control",id:"mod-otp-totp-start-offset",onChange:function(t){return e.changeParam(t,"totp-window",1)},value:this.state.mod.parameters["totp-window"],placeholder:o.default.t("admin.mod-otp-totp-start-offset-ph"),disabled:!this.state.mod.parameters["totp-allow"]})),this.state.errorList["totp-start-offset"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["totp-start-offset"]):""))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod||(e.mod={parameters:{}}),e.mod.parameters["secret-minimum-size"]||(e.mod.parameters["secret-minimum-size"]=16),e.mod.parameters.issuer||(e.mod.parameters.issuer=location.host),void 0===e.mod.parameters["otp-length"]&&(e.mod.parameters["otp-length"]=6),void 0===e.mod.parameters["hotp-allow"]&&(e.mod.parameters["hotp-allow"]=!0),void 0===e.mod.parameters["hotp-window"]&&(e.mod.parameters["hotp-window"]=0),void 0===e.mod.parameters["totp-allow"]&&(e.mod.parameters["totp-allow"]=!0),void 0===e.mod.parameters["totp-window"]&&(e.mod.parameters["totp-window"]=30),void 0===e.mod.parameters["totp-start-offset"]&&(e.mod.parameters["totp-start-offset"]=0),t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1,errorList:{}},t.state.check&&t.checkParameters(),t.changeParam=t.changeParam.bind(t),t.toggleParam=t.toggleParam.bind(t),t.checkParameters=t.checkParameters.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=d(l),o=(d(a(1)),d(a(2)));function d(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(i,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod||(e.mod={parameters:{}}),this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"checkParameters",value:function(){this.setState({errorList:{}},(function(){o.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){return n.default.createElement("div",null)}}]),i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return e.mod||(e.mod={parameters:{}}),t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,hasError:!1,errorList:{}},t.state.check&&t.checkParameters(),t}t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;void 0===e.mod&&(e.mod={}),void 0===e.mod.parameters&&(e.mod.parameters={}),void 0===e.mod.parameters["cert-source"]&&(e.mod.parameters["cert-source"]="TLS"),void 0===e.mod.parameters["header-name"]&&(e.mod.parameters["header-name"]="SSL_CLIENT_CERT"),void 0===e.mod.parameters["use-scheme-storage"]&&(e.mod.parameters["use-scheme-storage"]=!0),void 0===e.mod.parameters["user-certificate-property"]&&(e.mod.parameters["user-certificate-property"]=""),void 0===e.mod.parameters["user-certificate-format"]&&(e.mod.parameters["user-certificate-format"]="PEM"),void 0===e.mod.parameters["ca-chain"]&&(e.mod.parameters["ca-chain"]=[]),this.setState({mod:e.mod,role:e.role,check:e.check,certFile:!1,fileName:!1,useCAChain:e.mod.parameters["ca-chain"].length},(function(){t.state.check&&t.checkParameters()}))}},{key:"setCertSource",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["cert-source"]=t,this.setState({mod:a})}},{key:"setUseCaChain",value:function(e){var t=this.state.mod;e||(t.parameters["ca-chain"]=[]),this.setState({useCAChain:e,mod:t})}},{key:"selectCertFile",value:function(e){var t=this,a=(this.state.profile,e.target.files[0]),r=new FileReader;r.onload=function(e){t.setState({certFile:e.target.result,fileName:a.name})},r.readAsText(a)}},{key:"addCertificateFile",value:function(){if(this.state.certFile){var e=this.state.mod;e.parameters["ca-chain"].push({"file-name":this.state.fileName,"cert-file":this.state.certFile}),this.setState({mod:e,certFile:!1,fileName:!1})}}},{key:"selectRequestCertificateFile",value:function(e,t){var a=this,r=(this.state.profile,e.target.files[0]),l=new FileReader;l.onload=function(e){var l=a.state.requestCertFileName,n=a.state.requestCertFile;n[t]=e.target.result,l[t]=r.name,a.setState({requestCertFile:n,requestCertFileName:l})},l.readAsText(r)}},{key:"addRequestCertificateFile",value:function(e){if(this.state.requestCertFile[e]){var t=this.state.mod,a=this.state.requestCertFileName,r=this.state.requestCertFile;t.parameters["request-certificate"][e]={"file-name":a[e],"cert-file":r[e]},delete a[e],delete r[e],this.setState({mod:t,requestCertFileName:a,requestCertFile:r})}}},{key:"deleteCertificateFile",value:function(e,t){var a=this.state.mod;a.parameters["ca-chain"].splice(t,1),this.setState({mod:a})}},{key:"setBooleanValue",value:function(e,t,a){var r=this.state.mod;r.parameters[t]=a,this.setState({mod:r})}},{key:"setTextValue",value:function(e,t){var a=this.state.mod;a.parameters[t]=e.target.value,this.setState({mod:a})}},{key:"setValue",value:function(e,t,a){e.preventDefault();var r=this.state.mod;r.parameters[t]=a,this.setState({mod:r})}},{key:"setRequestCertificate",value:function(e,t){e.preventDefault();var a=this.state.mod;t?a.parameters["request-certificate"]={"issuer-cert":{"file-name":"","cert-file":""},"issuer-key":{"file-name":"","cert-file":""},expiration:31536e3,"dn-format":"cn={username},ou=users,o=glewlwyd","allow-multiple":!1}:delete a.parameters["request-certificate"],this.setState({mod:a})}},{key:"setRequestCertificateExpiration",value:function(e){e.preventDefault();var t=this.state.mod;t.parameters["request-certificate"].expiration=parseInt(e.target.value),this.setState({mod:t})}},{key:"setDnFormatValue",value:function(e){e.preventDefault();var t=this.state.mod;t.parameters["request-certificate"]["dn-format"]=e.target.value,this.setState({mod:t})}},{key:"setRequestCertificateAllowMultiple",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["request-certificate"]["allow-multiple"]=t,this.setState({mod:a})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters["use-scheme-storage"]||""===this.state.mod.parameters["user-certificate-property"]&&(t=!0,e["user-certificate-property"]=o.default.t("admin.mod-certificate-user-certificate-property-error")),this.state.mod.parameters["header-name"]||""===this.state.mod.parameters["header-name"]&&(t=!0,e["header-name"]=o.default.t("admin.mod-certificate-header-name-error")),this.state.mod.parameters["request-certificate"]&&(""===this.state.mod.parameters["request-certificate"]["dn-format"]&&(t=!0,e["request-certificate-dn"]=o.default.t("admin.mod-certificate-request-certificate-dn-error")),this.state.mod.parameters["request-certificate"].expiration||(t=!0,e["request-certificate-expiration"]=o.default.t("admin.mod-certificate-request-certificate-expiration-error")),""!==this.state.mod.parameters["request-certificate"]["issuer-key"]["cert-file"]&&""!==this.state.mod.parameters["request-certificate"]["issuer-key"]["file-name"]||(t=!0,e["request-certificate-issuer-key"]=o.default.t("admin.mod-certificate-request-certificate-issuer-key-error")),""!==this.state.mod.parameters["request-certificate"]["issuer-cert"]["cert-file"]&&""!==this.state.mod.parameters["request-certificate"]["issuer-cert"]["file-name"]||(t=!0,e["request-certificate-issuer-cert"]=o.default.t("admin.mod-certificate-request-certificate-issuer-cert-error"))),t?this.setState({errorList:e},(function(){d.default.sendMessage("ModEdit",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){d.default.sendMessage("ModEdit",{type:"modValid"})}))}},{key:"render",value:function(){var e,t,a=this,r=[];return this.state.useCAChain&&(this.state.mod.parameters["ca-chain"].forEach((function(e,t){r.push(n.default.createElement("div",{className:"alert alert-primary",key:t},e["file-name"].substring(0,40),n.default.createElement("button",{type:"button",className:"close","aria-label":o.default.t("admin.mod-certificate-user-certificate-ca-chain-delete"),onClick:function(e){return a.deleteCertificateFile(e,t)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))))})),e=n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"addCertificateFromFile",title:o.default.t("admin.mod-certificate-user-certificate-ca-chain-add-from-file"),onClick:this.addCertificateFile},o.default.t("upload"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{disabled:!this.state.useCAChain,type:"file",className:"custom-file-input",id:"addCertificateFromFileInput","aria-describedby":"addCertificateFromFile",onChange:function(e){return a.selectCertFile(e)}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"addCertificateFromFile"},this.state.fileName||o.default.t("browse"))))),this.state.mod.parameters["request-certificate"]&&(t=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"alert alert-primary"},o.default.t("admin.mod-certificate-request-certificate-select-issuer-cert",{file:this.state.mod.parameters["request-certificate"]["issuer-cert"]["file-name"].substring(0,40)})),n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"addRequestCertificateCertFromFile",title:o.default.t("admin.mod-certificate-request-certificate-add-from-file"),onClick:function(){return a.addRequestCertificateFile("issuer-cert")}},o.default.t("upload"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",className:"custom-file-input",id:"addRequestCertificateCertFromFileInput","aria-describedby":"addRequestCertificateCertFromFile",onChange:function(e){return a.selectRequestCertificateFile(e,"issuer-cert")}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"addRequestCertificateCertFromFile"},this.state.requestCertFileName["issuer-cert"]||o.default.t("browse")))),this.state.errorList["request-certificate-issuer-cert"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["request-certificate-issuer-cert"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"alert alert-primary"},o.default.t("admin.mod-certificate-request-certificate-select-issuer-key",{file:this.state.mod.parameters["request-certificate"]["issuer-key"]["file-name"].substring(0,40)})),n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"addRequestCertificateKeyFromFile",title:o.default.t("admin.mod-certificate-request-certificate-add-from-file"),onClick:function(){return a.addRequestCertificateFile("issuer-key")}},o.default.t("upload"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",className:"custom-file-input",id:"addRequestCertificateKeyFromFileInput","aria-describedby":"addRequestCertificateKeyFromFile",onChange:function(e){return a.selectRequestCertificateFile(e,"issuer-key")}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"addRequestCertificateKeyFromFile"},this.state.requestCertFileName["issuer-key"]||o.default.t("browse")))),this.state.errorList["request-certificate-issuer-key"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["request-certificate-issuer-key"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-request-certificate-expiration"},o.default.t("admin.mod-certificate-request-certificate-expiration"))),n.default.createElement("input",{type:"number",min:"1",step:"1",className:this.state.errorList["request-certificate-expiration"]?"form-control is-invalid":"form-control",id:"mod-certificate-header-name",placeholder:o.default.t("admin.mod-certificate-request-certificate-expiration-ph"),value:this.state.mod.parameters["request-certificate"].expiration,onChange:function(e){return a.setRequestCertificateExpiration(e)}})),this.state.errorList["request-certificate-expiration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["request-certificate-expiration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-request-certificate-dn"},o.default.t("admin.mod-certificate-request-certificate-dn"))),n.default.createElement("input",{type:"text",className:this.state.errorList["request-certificate-dn"]?"form-control is-invalid":"form-control",id:"mod-certificate-request-certificate-dn",placeholder:o.default.t("admin.mod-certificate-request-certificate-dn-ph"),value:this.state.mod.parameters["request-certificate"]["dn-format"],onChange:function(e){return a.setDnFormatValue(e)}})),this.state.errorList["request-certificate-dn"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["request-certificate-dn"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-request-certificate-allow-multiple"},o.default.t("admin.mod-certificate-request-certificate-allow-multiple"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-certificate-request-certificate-allow-multiple","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-certificate-value-"+(this.state.mod.parameters["request-certificate"]["allow-multiple"]?"yes":"no"))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-certificate-request-certificate-allow-multiple"},n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["request-certificate"]["allow-multiple"]?" active":""),href:"#",onClick:function(e){return a.setRequestCertificateAllowMultiple(e,!0)}},o.default.t("admin.mod-certificate-value-yes")),n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["request-certificate"]["allow-multiple"]?"":" active"),href:"#",onClick:function(e){return a.setRequestCertificateAllowMultiple(e,!1)}},o.default.t("admin.mod-certificate-value-no")))))))),n.default.createElement("div",null,n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-cert-source"},o.default.t("admin.mod-certificate-cert-source"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-certificate-cert-source","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-certificate-cert-source-"+this.state.mod.parameters["cert-source"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-certificate-cert-source"},n.default.createElement("a",{className:"dropdown-item"+("TLS"===this.state.mod.parameters["cert-source"]?" active":""),href:"#",onClick:function(e){return a.setCertSource(e,"TLS")}},o.default.t("admin.mod-certificate-cert-source-TLS")),n.default.createElement("a",{className:"dropdown-item"+("header"===this.state.mod.parameters["cert-source"]?" active":""),href:"#",onClick:function(e){return a.setCertSource(e,"header")}},o.default.t("admin.mod-certificate-cert-source-header")),n.default.createElement("a",{className:"dropdown-item"+("both"===this.state.mod.parameters["cert-source"]?" active":""),href:"#",onClick:function(e){return a.setCertSource(e,"both")}},o.default.t("admin.mod-certificate-cert-source-both")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-header-name"},o.default.t("admin.mod-certificate-header-name"))),n.default.createElement("input",{type:"text",disabled:"TLS"===this.state.mod.parameters["cert-source"],className:this.state.errorList["header-name"]?"form-control is-invalid":"form-control",id:"mod-certificate-header-name",placeholder:o.default.t("admin.mod-certificate-header-name-ph"),value:this.state.mod.parameters["header-name"],onChange:function(e){return a.setTextValue(e,"header-name")}})),this.state.errorList["header-name"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["header-name"]):""),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-use-scheme-storage"},o.default.t("admin.mod-certificate-use-scheme-storage"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-certificate-use-scheme-storage","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-certificate-value-"+(this.state.mod.parameters["use-scheme-storage"]?"yes":"no"))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-certificate-use-scheme-storage"},n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["use-scheme-storage"]?" active":""),href:"#",onClick:function(e){return a.setBooleanValue(e,"use-scheme-storage",!0)}},o.default.t("admin.mod-certificate-value-yes")),n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["use-scheme-storage"]?"":" active"),href:"#",onClick:function(e){return a.setBooleanValue(e,"use-scheme-storage",!1)}},o.default.t("admin.mod-certificate-value-no")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-user-certificate-property"},o.default.t("admin.mod-certificate-user-certificate-property"))),n.default.createElement("input",{type:"text",disabled:this.state.mod.parameters["use-scheme-storage"],className:this.state.errorList["user-certificate-property"]?"form-control is-invalid":"form-control",id:"mod-certificate-user-certificate-property",placeholder:o.default.t("admin.mod-certificate-user-certificate-property-ph"),maxLength:"256",value:this.state.mod.parameters["user-certificate-property"],onChange:function(e){return a.setTextValue(e,"user-certificate-property")}})),this.state.errorList["user-certificate-property"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["user-certificate-property"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-user-certificate-format"},o.default.t("admin.mod-certificate-user-certificate-format"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{disabled:this.state.mod.parameters["use-scheme-storage"],className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-certificate-user-certificate-format","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-certificate-user-certificate-format-"+this.state.mod.parameters["user-certificate-format"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-certificate-user-certificate-format"},n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["user-certificate-format"]?" active":""),href:"#",onClick:function(e){return a.setValue(e,"user-certificate-format","PEM")}},o.default.t("admin.mod-certificate-user-certificate-format-PEM")),n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["user-certificate-format"]?"":" active"),href:"#",onClick:function(e){return a.setValue(e,"user-certificate-format","DER")}},o.default.t("admin.mod-certificate-user-certificate-format-DER")))))),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-request-certificate-enabled"},o.default.t("admin.mod-certificate-request-certificate-enabled"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-certificate-request-certificate-enabled","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-certificate-value-"+(void 0!==this.state.mod.parameters["request-certificate"]?"yes":"no"))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-certificate-request-certificate-enabled"},n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["request-certificate"]?" active":""),href:"#",onClick:function(e){return a.setRequestCertificate(e,!0)}},o.default.t("admin.mod-certificate-value-yes")),n.default.createElement("a",{className:"dropdown-item"+(this.state.mod.parameters["request-certificate"]?"":" active"),href:"#",onClick:function(e){return a.setRequestCertificate(e,!1)}},o.default.t("admin.mod-certificate-value-no")))))),t,n.default.createElement("hr",null),n.default.createElement("div",{className:"accordion",id:"accordionParams"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"CAChainCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseCAChain","aria-expanded":"true","aria-controls":"collapseCAChain"},o.default.t("admin.mod-certificate-user-certificate-ca-chain")))),n.default.createElement("div",{id:"collapseCAChain",className:"collapse","aria-labelledby":"CAChainCard","data-parent":"#accordionParams"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-certificate-user-certificate-ca-chain-message")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-certificate-use-ca-chain"},o.default.t("admin.mod-certificate-use-ca-chain"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-certificate-use-ca-chain","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-certificate-value-"+(this.state.useCAChain?"yes":"no"))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-certificate-use-ca-chain"},n.default.createElement("a",{className:"dropdown-item"+(this.state.useCAChain?" active":""),href:"#",onClick:function(e){return a.setUseCaChain(!0)}},o.default.t("admin.mod-certificate-value-yes")),n.default.createElement("a",{className:"dropdown-item"+(this.state.useCAChain?"":" active"),href:"#",onClick:function(e){return a.setUseCaChain(!1)}},o.default.t("admin.mod-certificate-value-no")))))),r,e)))))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return void 0===e.mod&&(e.mod={}),void 0===e.mod.parameters&&(e.mod.parameters={}),void 0===e.mod.parameters["cert-source"]&&(e.mod.parameters["cert-source"]="TLS"),void 0===e.mod.parameters["header-name"]&&(e.mod.parameters["header-name"]="SSL_CLIENT_CERT"),void 0===e.mod.parameters["use-scheme-storage"]&&(e.mod.parameters["use-scheme-storage"]=!0),void 0===e.mod.parameters["user-certificate-property"]&&(e.mod.parameters["user-certificate-property"]=""),void 0===e.mod.parameters["user-certificate-format"]&&(e.mod.parameters["user-certificate-format"]="PEM"),void 0===e.mod.parameters["ca-chain"]&&(e.mod.parameters["ca-chain"]=[]),t.state={mod:e.mod,role:e.role,check:e.check,certFile:!1,fileName:!1,requestCertFile:{},requestCertFileName:{},useCAChain:e.mod.parameters["ca-chain"].length,hasError:!1,errorList:{}},t.state.check&&t.checkParameters(),t.setCertSource=t.setCertSource.bind(t),t.setBooleanValue=t.setBooleanValue.bind(t),t.setTextValue=t.setTextValue.bind(t),t.checkParameters=t.checkParameters.bind(t),t.setUseCaChain=t.setUseCaChain.bind(t),t.setValue=t.setValue.bind(t),t.selectCertFile=t.selectCertFile.bind(t),t.addCertificateFile=t.addCertificateFile.bind(t),t.deleteCertificateFile=t.deleteCertificateFile.bind(t),t.setRequestCertificate=t.setRequestCertificate.bind(t),t.addRequestCertificateFile=t.addRequestCertificateFile.bind(t),t.selectRequestCertificateFile=t.selectRequestCertificateFile.bind(t),t.setRequestCertificateExpiration=t.setRequestCertificateExpiration.bind(t),t.setDnFormatValue=t.setDnFormatValue.bind(t),t.setRequestCertificateAllowMultiple=t.setRequestCertificateAllowMultiple.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=m(l),o=m(a(1)),d=m(a(3)),s=m(a(56)),i=m(a(2));function m(e){return e&&e.__esModule?e:{default:e}}var c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(u,[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,modSchemes:e.modSchemes,title:e.title,mod:e.mod,role:e.role,modTypes:e.types,add:e.add,callback:e.callback,parametersValid:!0,nameInvalid:!1,nameInvalidMessage:!1,typeInvalidMessage:!1,hasError:!1})}},{key:"closeModal",value:function(e,t){this.state.callback&&(t?this.setState({check:!0}):this.state.callback(t))}},{key:"changeName",value:function(e){var t=this.state.mod;t.name=e.target.value,this.setState({mod:t})}},{key:"changeDisplayName",value:function(e){var t=this.state.mod;t.display_name=e.target.value,this.setState({mod:t})}},{key:"changeType",value:function(e,t){var a=this.state.mod;a.module=t,this.setState({mod:a})}},{key:"changeParameters",value:function(e,t){var a=this.state.mod;a.parameters=e,this.setState({mod:a,parametersValid:t})}},{key:"render",value:function(){var e,t,a=this,r=[];if(this.state.add){var l=o.default.t("admin.mod-type-select");this.state.modTypes.forEach((function(e,t){a.state.mod.module===e.name?(l=e.display_name,r.push(n.default.createElement("a",{className:"dropdown-item active",key:t,href:"#",onClick:function(t){return a.changeType(t,e.name)}},e.display_name))):r.push(n.default.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(t){return a.changeType(t,e.name)}},e.display_name))})),e=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownModType","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownModType"},r))}else this.state.modTypes.forEach((function(t,r){a.state.mod.module===t.name&&(e=n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},t.display_name))}));return"scheme"!==this.state.role&&n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-readonly",onChange:function(e){return a.toggleReadonly(e)},checked:this.state.mod.readonly||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-readonly"},o.default.t("admin.mod-readonly"))),this.state.hasError&&(t=n.default.createElement("span",{className:"error-input text-right"},o.default.t("admin.error-input"))),n.default.createElement("div",{className:"modal fade",id:"editPluginModal",tabIndex:"-1",role:"dialog","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},n.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},n.default.createElement("div",{className:"modal-content"},n.default.createElement("div",{className:"modal-header"},n.default.createElement("h5",{className:"modal-title",id:"confirmModalLabel"},this.state.title),n.default.createElement("button",{type:"button",className:"close","aria-label":o.default.t("modal.close"),onClick:function(e){return a.closeModal(e,!1)}},n.default.createElement("span",{"aria-hidden":"true"},"×"))),n.default.createElement("div",{className:"modal-body"},n.default.createElement("form",{className:"needs-validation",noValidate:!0},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-type"},o.default.t("admin.mod-type"))),e),n.default.createElement("span",{className:"error-input"+(this.state.typeInvalidMessage?"":" hidden")},this.state.typeInvalidMessage)),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-name"},o.default.t("admin.mod-name"))),n.default.createElement("input",{type:"text",className:"form-control"+(this.state.nameInvalid?" is-invalid":""),id:"mod-name",placeholder:o.default.t("admin.mod-name-ph"),maxLength:"128",value:this.state.mod.name||"",onChange:function(e){return a.changeName(e)},disabled:!this.state.add})),n.default.createElement("span",{className:"error-input"+(this.state.nameInvalid?"":" hidden")},this.state.nameInvalidMessage)),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-display-name"},o.default.t("admin.mod-display-name"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-display-name",placeholder:o.default.t("admin.mod-display-name-ph"),maxLength:"256",value:this.state.mod.display_name||"",onChange:function(e){return a.changeDisplayName(e)}}))),n.default.createElement(s.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config,modSchemes:this.state.modSchemes}))),n.default.createElement("div",{className:"modal-footer"},t,n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return a.closeModal(e,!1)}},o.default.t("modal.close")),n.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){return a.closeModal(e,!0)}},o.default.t("modal.ok"))))))}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.state={config:e.config,modSchemes:e.modSchemes,title:e.title,mod:e.mod,role:e.role,modTypes:e.types,add:e.add,callback:e.callback,parametersValid:!0,nameInvalid:!1,nameInvalidMessage:!1,typeInvalidMessage:!1,hasError:!1},i.default.subscribe("ModPlugin",(function(e){"modValid"===e.type?t.setState({check:!1,hasError:!1},(function(){t.state.add&&!t.state.mod.name?t.setState({nameInvalid:!0,nameInvalidMessage:o.default.t("admin.error-mod-name-mandatory"),typeInvalidMessage:!1,hasError:!0}):t.state.mod.module?t.state.parametersValid&&(t.state.add?d.default.glewlwydRequest("/mod/plugin/"+encodeURIComponent(t.state.mod.name),"GET").then((function(){t.setState({nameInvalid:!0,nameInvalidMessage:o.default.t("admin.error-mod-name-exist"),typeInvalidMessage:!1,hasError:!0})})).fail((function(e){404===e.status?t.state.callback(!0,t.state.mod):i.default.sendMessage("Notification",{type:"danger",message:o.default.t("error-api-connect")})})):t.state.callback(!0,t.state.mod)):t.setState({nameInvalid:!1,nameInvalidMessage:!1,typeInvalidMessage:o.default.t("admin.error-mod-type-mandatory"),hasError:!0})})):"modInvalid"===e.type&&t.setState({check:!1,hasError:!0})})),t.closeModal=t.closeModal.bind(t),t.changeName=t.changeName.bind(t),t.changeDisplayName=t.changeDisplayName.bind(t),t.changeType=t.changeType.bind(t),t.changeParameters=t.changeParameters.bind(t),t}t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=m(l),o=(m(a(1)),m(a(57))),d=m(a(58)),s=m(a(59)),i=m(a(60));function m(e){return e&&e.__esModule?e:{default:e}}var c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(u,[{key:"componentWillReceiveProps",value:function(e){this.setState({config:e.config,modSchemes:e.modSchemes,mod:e.mod,role:e.role,check:e.check})}},{key:"render",value:function(){return"mock"===this.state.mod.module?n.default.createElement(o.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"oauth2-glewlwyd"===this.state.mod.module?n.default.createElement(d.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"oidc"===this.state.mod.module?n.default.createElement(s.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config}):"register"===this.state.mod.module?n.default.createElement(i.default,{mod:this.state.mod,role:this.state.role,check:this.state.check,config:this.state.config,modSchemes:this.state.modSchemes}):""}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.state={config:e.config,modSchemes:e.modSchemes,mod:e.mod,role:e.role,check:e.check},t}t.default=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=(o(l),o(a(1)),o(a(2)));function o(e){return e&&e.__esModule?e:{default:e}}var d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(s,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"checkParameters",value:function(){n.default.sendMessage("ModPlugin",{type:"modValid"})}},{key:"render",value:function(){return""}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.state={mod:e.mod,role:e.role,check:e.check,hasError:!1},t.state.check&&t.checkParameters(),t.checkParameters=t.checkParameters.bind(t),t}t.default=d},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod.parameters||(e.mod.parameters={}),e.mod.parameters["jwt-type"]||(e.mod.parameters["jwt-type"]="rsa"),e.mod.parameters["jwt-key-size"]||(e.mod.parameters["jwt-key-size"]="512"),e.mod.parameters.key||(e.mod.parameters.key=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters["access-token-duration"]||(e.mod.parameters["access-token-duration"]=3600),e.mod.parameters["refresh-token-duration"]||(e.mod.parameters["refresh-token-duration"]=1209600),e.mod.parameters["code-duration"]||(e.mod.parameters["code-duration"]=600),void 0===e.mod.parameters["refresh-token-rolling"]&&(e.mod.parameters["refresh-token-rolling"]=!0),void 0===e.mod.parameters["auth-type-code-enabled"]&&(e.mod.parameters["auth-type-code-enabled"]=!0),void 0===e.mod.parameters["auth-type-implicit-enabled"]&&(e.mod.parameters["auth-type-implicit-enabled"]=!0),void 0===e.mod.parameters["auth-type-password-enabled"]&&(e.mod.parameters["auth-type-password-enabled"]=!0),void 0===e.mod.parameters["auth-type-client-enabled"]&&(e.mod.parameters["auth-type-client-enabled"]=!0),void 0===e.mod.parameters["auth-type-refresh-enabled"]&&(e.mod.parameters["auth-type-refresh-enabled"]=!0),e.mod.parameters.scope||(e.mod.parameters.scope=[]),e.mod.parameters["additional-parameters"]||(e.mod.parameters["additional-parameters"]=[]),this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=e.target.value,this.setState({mod:a})}},{key:"changeNumberParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=parseInt(e.target.value),this.setState({mod:a})}},{key:"toggleParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=!a.parameters[t],this.setState({mod:a})}},{key:"changeJwtType",value:function(e,t){var a=this.state.mod;a.parameters["jwt-type"]=t,this.setState({mod:a})}},{key:"changeJwtKeySize",value:function(e,t){var a=this.state.mod;a.parameters["jwt-key-size"]=t,this.setState({mod:a})}},{key:"uploadFile",value:function(e,t){var a=this,r=this.state.mod,l=e.target.files[0],n=new FileReader;n.onload=function(e){r.parameters[t]=e.target.result,a.setState({mod:r})},n.readAsText(l)}},{key:"setNewScopeOverride",value:function(e,t){this.setState({newScopeOverride:t})}},{key:"addScopeOverride",value:function(){if(this.state.newScopeOverride){var e=this.state.mod;e.parameters.scope.push({name:this.state.newScopeOverride,"refresh-token-rolling":this.state.mod.parameters["refresh-token-rolling"],"refresh-token-duration":0}),this.setState({mod:e,newScopeOverride:!1})}}},{key:"changeScopeOverrideRefreshDuration",value:function(e,t){var a=this.state.mod;a.parameters.scope.forEach((function(a){a.name===t.name&&(a["refresh-token-duration"]=parseInt(e.target.value))})),this.setState({mod:a})}},{key:"toggleScopeOverrideRolling",value:function(e,t,a){var r=this.state.mod;r.parameters.scope.forEach((function(e){e.name===t&&(void 0===a?delete e["refresh-token-rolling"]:e["refresh-token-rolling"]=a)})),this.setState({mod:r})}},{key:"deleteScopeOverride",value:function(e,t){var a=this.state.mod;a.parameters.scope.forEach((function(e,r){e.name===t&&a.parameters.scope.splice(r,1)})),this.setState({mod:a})}},{key:"addAdditionalParameter",value:function(){var e=this.state.mod;e.parameters["additional-parameters"].push({"user-parameter":"","token-parameter":"","token-changed":!1}),this.setState({mod:e,newScopeOverride:!1})}},{key:"setAdditionalPropertyUserParameter",value:function(e,t){var a=this.state.mod;a.parameters["additional-parameters"][t]&&(a.parameters["additional-parameters"][t]["user-parameter"]=e.target.value,a.parameters["additional-parameters"][t]["token-changed"]||(a.parameters["additional-parameters"][t]["token-parameter"]=e.target.value)),this.setState({mod:a,newScopeOverride:!1})}},{key:"setAdditionalPropertyTokenParameter",value:function(e,t){var a=this.state.mod;a.parameters["additional-parameters"][t]&&(a.parameters["additional-parameters"][t]["token-parameter"]=e.target.value,a.parameters["additional-parameters"][t]["token-changed"]=!0),this.setState({mod:a,newScopeOverride:!1})}},{key:"deleteAdditionalProperty",value:function(e,t){var a=this.state.mod;a.parameters["additional-parameters"][t]&&a.parameters["additional-parameters"].splice(t,1),this.setState({mod:a,newScopeOverride:!1})}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters.key||(t=!0,e.key="admin.mod-glwd-key-error",e.signature=!0),"sha"===this.state.mod.parameters["jwt-type"]||this.state.mod.parameters.cert||(t=!0,e.cert="admin.mod-glwd-cert-error",e.signature=!0),this.state.mod.parameters["access-token-duration"]||(t=!0,e["access-token-duration"]="admin.mod-glwd-access-token-duration-error",e.token=!0),this.state.mod.parameters["refresh-token-duration"]||(t=!0,e["refresh-token-duration"]="admin.mod-glwd-refresh-token-duration-error",e.token=!0),this.state.mod.parameters["code-duration"]||(t=!0,e["code-duration"]="admin.mod-glwd-code-duration-error",e.token=!0),this.state.mod.parameters["additional-parameters"].forEach((function(a,r){a["user-parameter"]||(t=!0,e["additional-parameters"]||(e["additional-parameters"]=[]),e["additional-parameters"][r]||(e["additional-parameters"][r]={}),e["additional-parameters"][r].user="admin.mod-glwd-additional-parameter-user-parameter-error"),a["token-parameter"]?"username"!==a["token-parameter"]&&"salt"!==a["token-parameter"]&&"type"!==a["token-parameter"]&&"iat"!==a["token-parameter"]&&"expires_in"!==a["token-parameter"]&&"scope"!==a["token-parameter"]||(t=!0,e["additional-parameters"]||(e["additional-parameters"]=[]),e["additional-parameters"][r]||(e["additional-parameters"][r]={}),e["additional-parameters"][r].token="admin.mod-glwd-additional-parameter-token-parameter-invalid-error"):(t=!0,e["additional-parameters"]||(e["additional-parameters"]=[]),e["additional-parameters"][r]||(e["additional-parameters"][r]={}),e["additional-parameters"][r].token="admin.mod-glwd-additional-parameter-token-parameter-error")})),t?this.setState({errorList:e},(function(){d.default.sendMessage("ModPlugin",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){d.default.sendMessage("ModPlugin",{type:"modValid"})}))}},{key:"render",value:function(){var e,t,a=this,r=[],l=[],d=[],s=document.location.href.split("?")[0].split("#")[0]+this.state.config.api_prefix+"/"+(this.state.mod.name||""),i=s+"/auth",m=s+"/token",c=s+"/profile";"sha"===this.state.mod.parameters["jwt-type"]?e=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-key"},o.default.t("admin.mod-glwd-key"))),n.default.createElement("input",{type:"password",className:this.state.errorList.key?"form-control is-invalid":"form-control",id:"mod-glwd-key",onChange:function(e){return a.changeParam(e,"key")},value:this.state.mod.parameters.key,placeholder:o.default.t("admin.mod-glwd-key-ph")})),this.state.errorList.key?n.default.createElement("span",{className:"error-input"},this.state.errorList.key):""):(e=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-key"},o.default.t("admin.mod-glwd-key"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",className:this.state.errorList.key?"custom-file-input is-invalid":"custom-file-input",onChange:function(e){return a.uploadFile(e,"key")}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},o.default.t("admin.choose-file")))),this.state.mod.parameters.key?n.default.createElement("div",{className:"alert alert-primary"},this.state.mod.parameters.key.substring(0,40)):"",this.state.errorList.key?n.default.createElement("span",{className:"error-input"},this.state.errorList.key):""),t=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-cert"},o.default.t("admin.mod-glwd-cert"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",className:this.state.errorList.key?"custom-file-input is-invalid":"custom-file-input",onChange:function(e){return a.uploadFile(e,"cert")}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},o.default.t("admin.choose-file")))),this.state.mod.parameters.cert?n.default.createElement("div",{className:"alert alert-primary"},this.state.mod.parameters.cert.substring(0,40)):"",this.state.errorList.cert?n.default.createElement("span",{className:"error-input"},this.state.errorList.cert):"")),this.state.config.pattern.user.forEach((function(e){"scope"===e.name&&e.listElements.forEach((function(e,t){var r=0;a.state.mod.parameters.scope.forEach((function(t){t.name===e&&(r=1)})),r||l.push(n.default.createElement("a",{key:t,className:"dropdown-item",href:"#",onClick:function(t){return a.setNewScopeOverride(t,e)}},e))}))}));var u=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-scope-override-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.newScopeOverride||o.default.t("admin.mod-glwd-scope-override-scope")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-scope-override-scope"},l));return this.state.mod.parameters.scope.forEach((function(e,t){r.push(n.default.createElement("div",{key:t},n.default.createElement("hr",null),n.default.createElement("h4",null,e.name),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-scope-override-refresh-duration-"+e.name},o.default.t("admin.mod-glwd-scope-override-refresh-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",id:"mod-glwd-scope-override-refresh-duration-"+e.name,onChange:function(t){return a.changeScopeOverrideRefreshDuration(t,e)},value:e["refresh-token-duration"],placeholder:o.default.t("admin.mod-glwd-scope-override-refresh-duration-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-scope-override-refresh-rolling-"+e.name},o.default.t("admin.mod-scope-override-refresh-rolling"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-scope-override-refresh-rolling-"+e.name,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.glwd-scope-override-refresh-rolling-value-"+e["refresh-token-rolling"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-jwt-type"},n.default.createElement("a",{className:"dropdown-item"+(void 0===e["refresh-token-rolling"]?" active":""),href:"#",onClick:function(t){return a.toggleScopeOverrideRolling(t,e.name,void 0)}},o.default.t("admin.glwd-scope-override-refresh-rolling-value-undefined")),n.default.createElement("a",{className:"dropdown-item"+(!0===e["refresh-token-rolling"]?" active":""),href:"#",onClick:function(t){return a.toggleScopeOverrideRolling(t,e.name,!0)}},o.default.t("admin.glwd-scope-override-refresh-rolling-value-true")),n.default.createElement("a",{className:"dropdown-item"+(!1===e["refresh-token-rolling"]?" active":""),href:"#",onClick:function(t){return a.toggleScopeOverrideRolling(t,e.name,!1)}},o.default.t("admin.glwd-scope-override-refresh-rolling-value-false")))))),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return a.deleteScopeOverride(t,e.name)},title:o.default.t("admin.mod-scope-override-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))})),this.state.mod.parameters["additional-parameters"].forEach((function(e,t){var r=a.state.errorList["additional-parameters"]&&a.state.errorList["additional-parameters"][t]&&a.state.errorList["additional-parameters"][t].user,l=a.state.errorList["additional-parameters"]&&a.state.errorList["additional-parameters"][t]&&a.state.errorList["additional-parameters"][t].token;d.push(n.default.createElement("div",{key:t},n.default.createElement("hr",null),n.default.createElement("h4",null,e["user-parameter"]||o.default.t("admin.mod-additional-parameter-new")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-additional-parameter-user-parameter-"+e["user-parameter"]},o.default.t("admin.mod-glwd-additional-parameter-user-parameter"))),n.default.createElement("input",{type:"text",className:r?"form-control is-invalid":"form-control",id:"mod-glwd-additional-parameter-user-parameter-"+e["user-parameter"],onChange:function(e){return a.setAdditionalPropertyUserParameter(e,t)},value:e["user-parameter"],placeholder:o.default.t("admin.mod-glwd-additional-parameter-user-parameter-ph")}),r?n.default.createElement("span",{className:"error-input"},a.state.errorList["additional-parameters"][t].user):"")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-additional-parameter-token-parameter-"+e["token-parameter"]},o.default.t("admin.mod-glwd-additional-parameter-token-parameter"))),n.default.createElement("input",{type:"text",className:l?"form-control is-invalid":"form-control",id:"mod-glwd-additional-parameter-token-parameter-"+e["token-parameter"],onChange:function(e){return a.setAdditionalPropertyTokenParameter(e,t)},value:e["token-parameter"],placeholder:o.default.t("admin.mod-glwd-additional-parameter-token-parameter-ph")})),l?n.default.createElement("span",{className:"error-input"},a.state.errorList["additional-parameters"][t].token):""),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return a.deleteAdditionalProperty(e,t)},title:o.default.t("admin.mod-additional-parameter-token-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))})),n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-auth"))),n.default.createElement("code",null,i))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-token"))),n.default.createElement("code",null,m))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-profile"))),n.default.createElement("code",null,c))),n.default.createElement("hr",null),n.default.createElement("div",{className:"accordion",id:"accordionSignature"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseSignature","aria-expanded":"true","aria-controls":"collapseSignature"},this.state.errorList.signature?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-sign-title")))),n.default.createElement("div",{id:"collapseSignature",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionSignature"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-jwt-type"},o.default.t("admin.mod-glwd-jwt-type"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-jwt-type","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-jwt-type-"+this.state.mod.parameters["jwt-type"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-jwt-type"},n.default.createElement("a",{className:"dropdown-item"+("rsa"===this.state.mod.parameters["jwt-type"]?" active":""),href:"#",onClick:function(e){return a.changeJwtType(e,"rsa")}},o.default.t("admin.mod-glwd-jwt-type-rsa")),n.default.createElement("a",{className:"dropdown-item"+("ecdsa"===this.state.mod.parameters["jwt-type"]?" active":""),href:"#",onClick:function(e){return a.changeJwtType(e,"ecdsa")}},o.default.t("admin.mod-glwd-jwt-type-ecdsa")),n.default.createElement("a",{className:"dropdown-item"+("sha"===this.state.mod.parameters["jwt-type"]?" active":""),href:"#",onClick:function(e){return a.changeJwtType(e,"sha")}},o.default.t("admin.mod-glwd-jwt-type-sha"))))),this.state.errorList["jwt-type"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["jwt-type"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-jwt-key-size"},o.default.t("admin.mod-glwd-jwt-key-size"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-jwt-key-size","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-jwt-key-size-"+this.state.mod.parameters["jwt-key-size"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-jwt-key-size"},n.default.createElement("a",{className:"dropdown-item"+("256"===this.state.mod.parameters["jwt-key-size"]?" active":""),href:"#",onClick:function(e){return a.changeJwtKeySize(e,"256")}},o.default.t("admin.mod-glwd-jwt-key-size-256")),n.default.createElement("a",{className:"dropdown-item"+("384"===this.state.mod.parameters["jwt-key-size"]?" active":""),href:"#",onClick:function(e){return a.changeJwtKeySize(e,"384")}},o.default.t("admin.mod-glwd-jwt-key-size-384")),n.default.createElement("a",{className:"dropdown-item"+("512"===this.state.mod.parameters["jwt-key-size"]?" active":""),href:"#",onClick:function(e){return a.changeJwtKeySize(e,"512")}},o.default.t("admin.mod-glwd-jwt-key-size-512"))))),this.state.errorList["jwt-key-size"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["jwt-key-size"]):""),e,t)))),n.default.createElement("div",{className:"accordion",id:"accordionToken"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseToken","aria-expanded":"true","aria-controls":"collapseToken"},this.state.errorList.token?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-token-title")))),n.default.createElement("div",{id:"collapseToken",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionToken"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-access-token-duration"},o.default.t("admin.mod-glwd-access-token-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["access-token-duration"]?"form-control is-invalid":"form-control",id:"mod-glwd-access-token-duration",onChange:function(e){return a.changeNumberParam(e,"access-token-duration")},value:this.state.mod.parameters["access-token-duration"],placeholder:o.default.t("admin.mod-glwd-access-token-duration-ph")})),this.state.errorList["access-token-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["access-token-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-refresh-token-duration"},o.default.t("admin.mod-glwd-refresh-token-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["refresh-token-duration"]?"form-control is-invalid":"form-control",id:"mod-glwd-refresh-token-duration",onChange:function(e){return a.changeNumberParam(e,"refresh-token-duration")},value:this.state.mod.parameters["refresh-token-duration"],placeholder:o.default.t("admin.mod-glwd-refresh-token-duration-ph")})),this.state.errorList["refresh-token-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["refresh-token-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-code-duration"},o.default.t("admin.mod-glwd-code-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["code-duration"]?"form-control is-invalid":"form-control",id:"mod-glwd-code-duration",onChange:function(e){return a.changeNumberParam(e,"code-duration")},value:this.state.mod.parameters["code-duration"],placeholder:o.default.t("admin.mod-glwd-code-duration-ph")})),this.state.errorList["code-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["code-duration"]):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-refresh-token-rolling",onChange:function(e){return a.toggleParam(e,"refresh-token-rolling")},checked:this.state.mod.parameters["refresh-token-rolling"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-refresh-token-rolling"},o.default.t("admin.mod-glwd-refresh-token-rolling"))))))),n.default.createElement("div",{className:"accordion",id:"accordionAuthType"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseAuthType","aria-expanded":"true","aria-controls":"collapseAuthType"},this.state.errorList["auth-type"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-auth-type-title")))),n.default.createElement("div",{id:"collapseAuthType",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionAuthType"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-code-enabled",onChange:function(e){return a.toggleParam(e,"auth-type-code-enabled")},checked:this.state.mod.parameters["auth-type-code-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-code-enabled"},o.default.t("admin.mod-glwd-auth-type-code-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-implicit-enabled",onChange:function(e){return a.toggleParam(e,"auth-type-implicit-enabled")},checked:this.state.mod.parameters["auth-type-implicit-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-implicit-enabled"},o.default.t("admin.mod-glwd-auth-type-implicit-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-password-enabled",onChange:function(e){return a.toggleParam(e,"auth-type-password-enabled")},checked:this.state.mod.parameters["auth-type-password-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-password-enabled"},o.default.t("admin.mod-glwd-auth-type-password-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-client-enabled",onChange:function(e){return a.toggleParam(e,"auth-type-client-enabled")},checked:this.state.mod.parameters["auth-type-client-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-client-enabled"},o.default.t("admin.mod-glwd-auth-type-client-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-refresh-enabled",onChange:function(e){return a.toggleParam(e,"auth-type-refresh-enabled")},checked:this.state.mod.parameters["auth-type-refresh-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-refresh-enabled"},o.default.t("admin.mod-glwd-auth-type-refresh-enabled"))))))),n.default.createElement("div",{className:"accordion",id:"accordionScope"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"dataFormatCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseScope","aria-expanded":"true","aria-controls":"collapseScope"},this.state.errorList["scope-override"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-scope-override")))),n.default.createElement("div",{id:"collapseScope",className:"collapse","aria-labelledby":"dataFormatCard","data-parent":"#accordionScope"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-glwd-scope-override-message")),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("div",{className:"btn-group",role:"group"},u),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addScopeOverride,title:o.default.t("admin.mod-glwd-scope-add")},n.default.createElement("i",{className:"fas fa-plus"}))),r)))),n.default.createElement("div",{className:"accordion",id:"accordionAddParam"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseAddParam","aria-expanded":"true","aria-controls":"collapseAddParam"},this.state.errorList["additional-parameters"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-additional-parameter")))),n.default.createElement("div",{id:"collapseAddParam",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionAddParam"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-glwd-additional-parameter-message")),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addAdditionalParameter,title:o.default.t("admin.mod-glwd-additional-parameter-add")},n.default.createElement("i",{className:"fas fa-plus"}))),d)))))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod.parameters||(e.mod.parameters={}),e.mod.parameters["jwt-type"]||(e.mod.parameters["jwt-type"]="rsa"),e.mod.parameters["jwt-key-size"]||(e.mod.parameters["jwt-key-size"]="512"),e.mod.parameters.key||(e.mod.parameters.key=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters["access-token-duration"]||(e.mod.parameters["access-token-duration"]=3600),e.mod.parameters["refresh-token-duration"]||(e.mod.parameters["refresh-token-duration"]=1209600),e.mod.parameters["code-duration"]||(e.mod.parameters["code-duration"]=600),void 0===e.mod.parameters["refresh-token-rolling"]&&(e.mod.parameters["refresh-token-rolling"]=!0),void 0===e.mod.parameters["auth-type-code-enabled"]&&(e.mod.parameters["auth-type-code-enabled"]=!0),void 0===e.mod.parameters["auth-type-implicit-enabled"]&&(e.mod.parameters["auth-type-implicit-enabled"]=!0),void 0===e.mod.parameters["auth-type-password-enabled"]&&(e.mod.parameters["auth-type-password-enabled"]=!0),void 0===e.mod.parameters["auth-type-client-enabled"]&&(e.mod.parameters["auth-type-client-enabled"]=!0),void 0===e.mod.parameters["auth-type-refresh-enabled"]&&(e.mod.parameters["auth-type-refresh-enabled"]=!0),e.mod.parameters.scope||(e.mod.parameters.scope=[]),e.mod.parameters["additional-parameters"]||(e.mod.parameters["additional-parameters"]=[]),t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,errorList:{},newScopeOverride:!1},t.state.check&&t.checkParameters(),t.checkParameters=t.checkParameters.bind(t),t.changeParam=t.changeParam.bind(t),t.changeNumberParam=t.changeNumberParam.bind(t),t.toggleParam=t.toggleParam.bind(t),t.changeJwtType=t.changeJwtType.bind(t),t.setNewScopeOverride=t.setNewScopeOverride.bind(t),t.addScopeOverride=t.addScopeOverride.bind(t),t.changeScopeOverrideRefreshDuration=t.changeScopeOverrideRefreshDuration.bind(t),t.toggleScopeOverrideRolling=t.toggleScopeOverrideRolling.bind(t),t.addAdditionalParameter=t.addAdditionalParameter.bind(t),t.setAdditionalPropertyUserParameter=t.setAdditionalPropertyUserParameter.bind(t),t.setAdditionalPropertyTokenParameter=t.setAdditionalPropertyTokenParameter.bind(t),t.deleteAdditionalProperty=t.deleteAdditionalProperty.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod.parameters||(e.mod.parameters={}),e.mod.parameters["jwt-type"]||(e.mod.parameters["jwt-type"]="rsa"),e.mod.parameters["jwt-key-size"]||(e.mod.parameters["jwt-key-size"]="256"),e.mod.parameters.key||(e.mod.parameters.key=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters["access-token-duration"]||(e.mod.parameters["access-token-duration"]=3600),e.mod.parameters["refresh-token-duration"]||(e.mod.parameters["refresh-token-duration"]=1209600),e.mod.parameters["code-duration"]||(e.mod.parameters["code-duration"]=600),void 0===e.mod.parameters["refresh-token-rolling"]&&(e.mod.parameters["refresh-token-rolling"]=!0),void 0===e.mod.parameters["allow-non-oidc"]&&(e.mod.parameters["allow-non-oidc"]=!1),void 0===e.mod.parameters["auth-type-code-enabled"]&&(e.mod.parameters["auth-type-code-enabled"]=!0),void 0===e.mod.parameters["auth-type-token-enabled"]&&(e.mod.parameters["auth-type-token-enabled"]=!0),e.mod.parameters["auth-type-id-token-enabled"]=!0,void 0===e.mod.parameters["auth-type-none-enabled"]&&(e.mod.parameters["auth-type-none-enabled"]=!0),void 0===e.mod.parameters["auth-type-password-enabled"]&&(e.mod.parameters["auth-type-password-enabled"]=!0),void 0===e.mod.parameters["auth-type-client-enabled"]&&(e.mod.parameters["auth-type-client-enabled"]=!0),void 0===e.mod.parameters["auth-type-refresh-enabled"]&&(e.mod.parameters["auth-type-refresh-enabled"]=!0),e.mod.parameters.scope||(e.mod.parameters.scope=[]),e.mod.parameters["additional-parameters"]||(e.mod.parameters["additional-parameters"]=[]),e.mod.parameters.claims||(e.mod.parameters.claims=[]),void 0===e.mod.parameters["service-documentation"]&&(e.mod.parameters["service-documentation"]="https://github.com/babelouest/glewlwyd/tree/master/docs"),void 0===e.mod.parameters["op-policy-uri"]&&(e.mod.parameters["op-policy-uri"]=""),void 0===e.mod.parameters["op-tos-uri"]&&(e.mod.parameters["op-tos-uri"]=""),void 0===e.mod.parameters["jwks-show"]&&(e.mod.parameters["jwks-show"]=!0),void 0===e.mod.parameters["jwks-x5c"]&&(e.mod.parameters["jwks-x5c"]=[]),void 0===e.mod.parameters["request-parameter-allow"]&&(e.mod.parameters["request-parameter-allow"]=!0),void 0===e.mod.parameters["request-uri-allow-https-non-secure"]&&(e.mod.parameters["request-uri-allow-https-non-secure"]=!1),e.mod.parameters["secret-type"]||(e.mod.parameters["secret-type"]="pairwise"),e.mod.parameters["address-claim"]||(e.mod.parameters["address-claim"]={type:"no",formatted:"",street_address:"",locality:"",region:"",postal_code:"",country:"",mandatory:!1}),e.mod.parameters["name-claim"]||(e.mod.parameters["name-claim"]="on-demand"),e.mod.parameters["name-claim-scope"]||(e.mod.parameters["name-claim-scope"]=[]),e.mod.parameters["email-claim"]||(e.mod.parameters["email-claim"]="no"),e.mod.parameters["email-claim-scope"]||(e.mod.parameters["email-claim-scope"]=[]),e.mod.parameters["allowed-scope"]||(e.mod.parameters["allowed-scope"]=["openid"]),this.setState({config:e.config,mod:e.mod,role:e.role,check:e.check},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=e.target.value,this.setState({mod:a})}},{key:"changeParamWithValue",value:function(e,t){var a=this.state.mod;a.parameters[e]=t,this.setState({mod:a})}},{key:"changeNumberParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=parseInt(e.target.value),this.setState({mod:a})}},{key:"toggleParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=!a.parameters[t],this.setState({mod:a})}},{key:"changeJwtType",value:function(e,t){var a=this.state.mod;a.parameters["jwt-type"]=t,this.setState({mod:a})}},{key:"changeSecretType",value:function(e,t){var a=this.state.mod;a.parameters["secret-type"]=t,this.setState({mod:a})}},{key:"changeJwtKeySize",value:function(e,t){var a=this.state.mod;a.parameters["jwt-key-size"]=t,this.setState({mod:a})}},{key:"uploadFile",value:function(e,t){var a=this,r=this.state.mod,l=e.target.files[0],n=new FileReader;n.onload=function(e){r.parameters[t]=e.target.result,a.setState({mod:r})},n.readAsText(l)}},{key:"uploadX5cFile",value:function(e){var t=this,a=this.state.mod,r=e.target.files[0],l=new FileReader;l.onload=function(e){a.parameters["jwks-x5c"].push(e.target.result),t.setState({mod:a})},l.readAsText(r)}},{key:"handleRemoveX5c",value:function(e,t){if(e.preventDefault(),this.state.mod.parameters["jwks-show"]){var a=this.state.mod;a.parameters["jwks-x5c"].splice(t,1),this.setState({mod:a})}}},{key:"setNewScopeOverride",value:function(e,t){this.setState({newScopeOverride:t})}},{key:"addScopeOverride",value:function(){if(this.state.newScopeOverride){var e=this.state.mod;e.parameters.scope.push({name:this.state.newScopeOverride,"refresh-token-rolling":this.state.mod.parameters["refresh-token-rolling"],"refresh-token-duration":0}),this.setState({mod:e,newScopeOverride:!1})}}},{key:"changeScopeOverrideRefreshDuration",value:function(e,t){var a=this.state.mod;a.parameters.scope.forEach((function(a){a.name===t.name&&(a["refresh-token-duration"]=parseInt(e.target.value))})),this.setState({mod:a})}},{key:"toggleScopeOverrideRolling",value:function(e,t,a){var r=this.state.mod;r.parameters.scope.forEach((function(e){e.name===t&&(void 0===a?delete e["refresh-token-rolling"]:e["refresh-token-rolling"]=a)})),this.setState({mod:r})}},{key:"deleteScopeOverride",value:function(e,t){var a=this.state.mod;a.parameters.scope.forEach((function(e,r){e.name===t&&a.parameters.scope.splice(r,1)})),this.setState({mod:a})}},{key:"addAdditionalParameter",value:function(){var e=this.state.mod;e.parameters["additional-parameters"].push({"user-parameter":"","token-parameter":"","token-changed":!1}),this.setState({mod:e,newScopeOverride:!1})}},{key:"setAdditionalPropertyUserParameter",value:function(e,t){var a=this.state.mod;a.parameters["additional-parameters"][t]&&(a.parameters["additional-parameters"][t]["user-parameter"]=e.target.value,a.parameters["additional-parameters"][t]["token-changed"]||(a.parameters["additional-parameters"][t]["token-parameter"]=e.target.value)),this.setState({mod:a,newScopeOverride:!1})}},{key:"setAdditionalPropertyTokenParameter",value:function(e,t){var a=this.state.mod;a.parameters["additional-parameters"][t]&&(a.parameters["additional-parameters"][t]["token-parameter"]=e.target.value,a.parameters["additional-parameters"][t]["token-changed"]=!0),this.setState({mod:a,newScopeOverride:!1})}},{key:"deleteAdditionalProperty",value:function(e,t){var a=this.state.mod;a.parameters["additional-parameters"][t]&&a.parameters["additional-parameters"].splice(t,1),this.setState({mod:a,newScopeOverride:!1})}},{key:"addClaim",value:function(){var e=this.state.mod;e.parameters.claims.push({name:"","user-property":"",type:"string","boolean-value-true":"","boolean-value-false":"",mandatory:!1,"on-demand":!1,scope:[]}),this.setState({mod:e})}},{key:"deleteClaim",value:function(e,t){var a=this.state.mod;a.parameters.claims.splice(t,1),this.setState({mod:a})}},{key:"setClaimName",value:function(e,t){var a=this.state.mod;a.parameters.claims[t].name=e.target.value,this.setState({mod:a})}},{key:"setClaimUserProperty",value:function(e,t){var a=this.state.mod;a.parameters.claims[t]["user-property"]=e.target.value,this.setState({mod:a})}},{key:"setClaimType",value:function(e,t,a){var r=this.state.mod;r.parameters.claims[t].type=a,this.setState({mod:r})}},{key:"setClaimBooleanTrue",value:function(e,t){var a=this.state.mod;a.parameters.claims[t]["boolean-value-true"]=e.target.value,this.setState({mod:a})}},{key:"setClaimBooleanFalse",value:function(e,t){var a=this.state.mod;a.parameters.claims[t]["boolean-value-false"]=e.target.value,this.setState({mod:a})}},{key:"toggleClaimMandatory",value:function(e,t){var a=this.state.mod;a.parameters.claims[t].mandatory=!a.parameters.claims[t].mandatory,this.setState({mod:a})}},{key:"toggleClaimOnDemand",value:function(e,t){var a=this.state.mod;a.parameters.claims[t]["on-demand"]=!a.parameters.claims[t]["on-demand"],this.setState({mod:a})}},{key:"changeAddressClaimParam",value:function(e,t){var a=this.state.mod;a.parameters["address-claim"][t]=e.target.value,this.setState({mod:a})}},{key:"changeAddressClaim",value:function(e,t){var a=this.state.mod;a.parameters["address-claim"].type=t,this.setState({mod:a})}},{key:"toggleAddrClaimMandatory",value:function(e,t){var a=this.state.mod;a.parameters["address-claim"].mandatory=!a.parameters["address-claim"].mandatory,this.setState({mod:a})}},{key:"addScopeClaim",value:function(e,t,a){e.preventDefault();var r=this.state.mod;r.parameters.claims[t].scope.push(a),this.setState({mod:r})}},{key:"deleteScopeClaim",value:function(e,t,a){if(e.preventDefault(),!this.state.mod.parameters.claims[t].mandatory){var r=this.state.mod;r.parameters.claims[t].scope.splice(a,1),this.setState({mod:r})}}},{key:"addNameScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["name-claim-scope"].push(t),this.setState({mod:a})}},{key:"deleteNameScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["name-claim-scope"].splice(t,1),this.setState({mod:a})}},{key:"addEmailScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["email-claim-scope"].push(t),this.setState({mod:a})}},{key:"deleteEmailScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["email-claim-scope"].splice(t,1),this.setState({mod:a})}},{key:"addAllowedScope",value:function(e,t){e.preventDefault();var a=this.state.mod;t?a.parameters["allowed-scope"].push(t):(a.parameters["allowed-scope"]=["openid"],this.state.config.scopes.forEach((function(e){"openid"!==e.name&&a.parameters["allowed-scope"].push(e.name)}))),this.setState({mod:a})}},{key:"deleteAllowedScope",value:function(e,t){if(e.preventDefault(),"openid"!==this.state.mod.parameters["allowed-scope"][t]){var a=this.state.mod;a.parameters["allowed-scope"].splice(t,1),this.setState({mod:a})}}},{key:"checkParameters",value:function(){var e={},t=!1;this.state.mod.parameters.iss||(t=!0,e.iss="admin.mod-glwd-iss-error",e.general=!0),this.state.mod.parameters.key||(t=!0,e.key="admin.mod-glwd-key-error",e.signature=!0),"sha"===this.state.mod.parameters["jwt-type"]||this.state.mod.parameters.cert||(t=!0,e.cert="admin.mod-glwd-cert-error",e.signature=!0),this.state.mod.parameters["access-token-duration"]||(t=!0,e["access-token-duration"]="admin.mod-glwd-access-token-duration-error",e.token=!0),this.state.mod.parameters["refresh-token-duration"]||(t=!0,e["refresh-token-duration"]="admin.mod-glwd-refresh-token-duration-error",e.token=!0),this.state.mod.parameters["code-duration"]||(t=!0,e["code-duration"]="admin.mod-glwd-code-duration-error",e.token=!0),this.state.mod.parameters["additional-parameters"].forEach((function(a,r){a["user-parameter"]||(t=!0,e["additional-parameters"]||(e["additional-parameters"]=[]),e["additional-parameters"][r]||(e["additional-parameters"][r]={}),e["additional-parameters"][r].user="admin.mod-glwd-additional-parameter-user-parameter-error"),a["token-parameter"]?"username"!==a["token-parameter"]&&"salt"!==a["token-parameter"]&&"type"!==a["token-parameter"]&&"iat"!==a["token-parameter"]&&"expires_in"!==a["token-parameter"]&&"scope"!==a["token-parameter"]||(t=!0,e["additional-parameters"]||(e["additional-parameters"]=[]),e["additional-parameters"][r]||(e["additional-parameters"][r]={}),e["additional-parameters"][r].token="admin.mod-glwd-additional-parameter-token-parameter-invalid-error"):(t=!0,e["additional-parameters"]||(e["additional-parameters"]=[]),e["additional-parameters"][r]||(e["additional-parameters"][r]={}),e["additional-parameters"][r].token="admin.mod-glwd-additional-parameter-token-parameter-error")})),this.state.mod.parameters.claims.forEach((function(a,r){""===a.name?(t=!0,e.claims||(e.claims=[]),e.claims[r]||(e.claims[r]={}),e.claims[r].name="admin.mod-glwd-claims-name-error"):-1<["iss","sub","aud","exp","iat","auth_time","nonce","acr","amr","azp","name","email","address"].indexOf(a.name)&&(t=!0,e.claims||(e.claims=[]),e.claims[r]||(e.claims[r]={}),e.claims[r].name="admin.mod-glwd-claims-name-forbidden-error"),""===a["user-property"]&&(t=!0,e.claims||(e.claims=[]),e.claims[r]||(e.claims[r]={}),e.claims[r]["user-property"]="admin.mod-glwd-claims-user-property-error"),"boolean"===a.type&&""===a["boolean-value-true"]&&(t=!0,e.claims||(e.claims=[]),e.claims[r]||(e.claims[r]={}),e.claims[r]["boolean-value-true"]="admin.mod-glwd-claims-boolean-value-true-error"),"boolean"===a.type&&""===a["boolean-value-false"]&&(t=!0,e.claims||(e.claims=[]),e.claims[r]||(e.claims[r]={}),e.claims[r]["boolean-value-false"]="admin.mod-glwd-claims-boolean-value-false-error")})),t?this.setState({errorList:e},(function(){d.default.sendMessage("ModPlugin",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){d.default.sendMessage("ModPlugin",{type:"modValid"})}))}},{key:"render",value:function(){var e,t,a,r=this,l=[],d=[],s=[],i=[],m=[],c=document.location.href.split("?")[0].split("#")[0]+this.state.config.api_prefix+"/"+(this.state.mod.name||""),u=c+"/.well-known/openid-configuration",f=c+"/auth",p=c+"/token",h=c+"/userinfo";"sha"===this.state.mod.parameters["jwt-type"]?e=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-key"},o.default.t("admin.mod-glwd-key"))),n.default.createElement("input",{type:"password",className:this.state.errorList.key?"form-control is-invalid":"form-control",id:"mod-glwd-key",onChange:function(e){return r.changeParam(e,"key")},value:this.state.mod.parameters.key,placeholder:o.default.t("admin.mod-glwd-key-ph")})),this.state.errorList.key?n.default.createElement("span",{className:"error-input"},this.state.errorList.key):""):(e=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-key"},o.default.t("admin.mod-glwd-key"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",id:"mod-glwd-key",className:this.state.errorList.key?"custom-file-input is-invalid":"custom-file-input",onChange:function(e){return r.uploadFile(e,"key")}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"mod-glwd-key"},o.default.t("admin.choose-file")))),this.state.mod.parameters.key?n.default.createElement("div",{className:"alert alert-primary"},this.state.mod.parameters.key.substring(0,40)):"",this.state.errorList.key?n.default.createElement("span",{className:"error-input"},this.state.errorList.key):""),t=n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-cert"},o.default.t("admin.mod-glwd-cert"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{type:"file",id:"mod-glwd-cert",className:this.state.errorList.key?"custom-file-input is-invalid":"custom-file-input",onChange:function(e){return r.uploadFile(e,"cert")}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"mod-glwd-cert"},o.default.t("admin.choose-file")))),this.state.mod.parameters.cert?n.default.createElement("div",{className:"alert alert-primary"},this.state.mod.parameters.cert.substring(0,40)):"",this.state.errorList.cert?n.default.createElement("span",{className:"error-input"},this.state.errorList.cert):"")),this.state.config.pattern.user.forEach((function(e){"scope"===e.name&&e.listElements.forEach((function(e,t){var a=0;r.state.mod.parameters.scope.forEach((function(t){t.name===e&&(a=1)})),a||d.push(n.default.createElement("a",{key:t,className:"dropdown-item",href:"#",onClick:function(t){return r.setNewScopeOverride(t,e)}},e))}))}));var g=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-scope-override-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.newScopeOverride||o.default.t("admin.mod-glwd-scope-override-scope")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-scope-override-scope"},d));this.state.mod.parameters.scope.forEach((function(e,t){l.push(n.default.createElement("div",{key:t},n.default.createElement("hr",null),n.default.createElement("h4",null,e.name),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-scope-override-refresh-duration-"+e.name},o.default.t("admin.mod-glwd-scope-override-refresh-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",id:"mod-glwd-scope-override-refresh-duration-"+e.name,onChange:function(t){return r.changeScopeOverrideRefreshDuration(t,e)},value:e["refresh-token-duration"],placeholder:o.default.t("admin.mod-glwd-scope-override-refresh-duration-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-scope-override-refresh-rolling-"+e.name},o.default.t("admin.mod-scope-override-refresh-rolling"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-scope-override-refresh-rolling-"+e.name,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.glwd-scope-override-refresh-rolling-value-"+e["refresh-token-rolling"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-jwt-type"},n.default.createElement("a",{className:"dropdown-item"+(void 0===e["refresh-token-rolling"]?" active":""),href:"#",onClick:function(t){return r.toggleScopeOverrideRolling(t,e.name,void 0)}},o.default.t("admin.glwd-scope-override-refresh-rolling-value-undefined")),n.default.createElement("a",{className:"dropdown-item"+(!0===e["refresh-token-rolling"]?" active":""),href:"#",onClick:function(t){return r.toggleScopeOverrideRolling(t,e.name,!0)}},o.default.t("admin.glwd-scope-override-refresh-rolling-value-true")),n.default.createElement("a",{className:"dropdown-item"+(!1===e["refresh-token-rolling"]?" active":""),href:"#",onClick:function(t){return r.toggleScopeOverrideRolling(t,e.name,!1)}},o.default.t("admin.glwd-scope-override-refresh-rolling-value-false")))))),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){return r.deleteScopeOverride(t,e.name)},title:o.default.t("admin.mod-scope-override-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))})),this.state.mod.parameters["additional-parameters"].forEach((function(e,t){var a=r.state.errorList["additional-parameters"]&&r.state.errorList["additional-parameters"][t]&&r.state.errorList["additional-parameters"][t].user,l=r.state.errorList["additional-parameters"]&&r.state.errorList["additional-parameters"][t]&&r.state.errorList["additional-parameters"][t].token;s.push(n.default.createElement("div",{key:t},n.default.createElement("hr",null),n.default.createElement("h4",null,e["user-parameter"]||o.default.t("admin.mod-additional-parameter-new")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-additional-parameter-user-parameter-"+e["user-parameter"]},o.default.t("admin.mod-glwd-additional-parameter-user-parameter"))),n.default.createElement("input",{type:"text",className:a?"form-control is-invalid":"form-control",id:"mod-glwd-additional-parameter-user-parameter-"+e["user-parameter"],onChange:function(e){return r.setAdditionalPropertyUserParameter(e,t)},value:e["user-parameter"],placeholder:o.default.t("admin.mod-glwd-additional-parameter-user-parameter-ph")}),a?n.default.createElement("span",{className:"error-input"},r.state.errorList["additional-parameters"][t].user):"")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-additional-parameter-token-parameter-"+e["token-parameter"]},o.default.t("admin.mod-glwd-additional-parameter-token-parameter"))),n.default.createElement("input",{type:"text",className:l?"form-control is-invalid":"form-control",id:"mod-glwd-additional-parameter-token-parameter-"+e["token-parameter"],onChange:function(e){return r.setAdditionalPropertyTokenParameter(e,t)},value:e["token-parameter"],placeholder:o.default.t("admin.mod-glwd-additional-parameter-token-parameter-ph")})),l?n.default.createElement("span",{className:"error-input"},r.state.errorList["additional-parameters"][t].token):""),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return r.deleteAdditionalProperty(e,t)},title:o.default.t("admin.mod-additional-parameter-token-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))}));var b=[n.default.createElement("a",{className:"dropdown-item",key:-1,href:"#",onClick:function(e){return r.addAllowedScope(e,!1)}},o.default.t("admin.mod-glwd-allowed-scope-all"))];this.state.config.scopes.forEach((function(e,t){-1===r.state.mod.parameters["allowed-scope"].indexOf(e.name)&&"openid"!==e.name&&b.push(n.default.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(t){return r.addAllowedScope(t,e.name)}},e.name))}));var y=[];this.state.mod.parameters["allowed-scope"].forEach((function(e,t){y.push(n.default.createElement("a",{href:"#",onClick:function(e){return r.deleteAllowedScope(e,t)},key:t},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},e,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))}));var v=[];this.state.config.scopes.forEach((function(e,t){-1===r.state.mod.parameters["name-claim-scope"].indexOf(e.name)&&v.push(n.default.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(t){return r.addNameScope(t,e.name)}},e.name))}));var E=[];this.state.mod.parameters["name-claim-scope"].forEach((function(e,t){E.push(n.default.createElement("a",{href:"#",onClick:function(e){return r.deleteNameScope(e,t)},key:t},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},e,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))}));var N=[];this.state.config.scopes.forEach((function(e,t){-1===r.state.mod.parameters["email-claim-scope"].indexOf(e.name)&&N.push(n.default.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(t){return r.addEmailScope(t,e.name)}},e.name))}));var w=[];return this.state.mod.parameters["email-claim-scope"].forEach((function(e,t){w.push(n.default.createElement("a",{href:"#",onClick:function(e){return r.deleteEmailScope(e,t)},key:t},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},e,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))})),this.state.mod.parameters["jwks-x5c"].forEach((function(e,t){m.push(n.default.createElement("a",{disabled:!r.state.mod.parameters["jwks-show"],href:"#",key:t,onClick:function(e){return r.handleRemoveX5c(e,t)}},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},e.substring(0,40),n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))})),this.state.mod.parameters.claims.forEach((function(e,t){var a=r.state.errorList.claims&&r.state.errorList.claims[t]&&r.state.errorList.claims[t].name,l=r.state.errorList.claims&&r.state.errorList.claims[t]&&r.state.errorList.claims[t]["user-property"],d=r.state.errorList.claims&&r.state.errorList.claims[t]&&r.state.errorList.claims[t]["boolean-value-true"],s=r.state.errorList.claims&&r.state.errorList.claims[t]&&r.state.errorList.claims[t]["boolean-value-false"],m="";"boolean"===e.type&&(m=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-claims-boolean-value-true-"+e.name},o.default.t("admin.mod-glwd-claims-boolean-value-true"))),n.default.createElement("input",{type:"text",className:d?"form-control is-invalid":"form-control",id:"mod-glwd-claims-boolean-value-true-"+e.name,onChange:function(e){return r.setClaimBooleanTrue(e,t)},value:e["boolean-value-true"],placeholder:o.default.t("admin.mod-glwd-claims-boolean-value-true-ph")}),d?n.default.createElement("span",{className:"error-input"},r.state.errorList.claims[t]["boolean-value-true"]):"")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-claims-boolean-value-false-"+e.name},o.default.t("admin.mod-glwd-claims-boolean-value-false"))),n.default.createElement("input",{type:"text",className:s?"form-control is-invalid":"form-control",id:"mod-glwd-claims-boolean-value-false-"+e.name,onChange:function(e){return r.setClaimBooleanFalse(e,t)},value:e["boolean-value-false"],placeholder:o.default.t("admin.mod-glwd-claims-boolean-value-false-ph")}),s?n.default.createElement("span",{className:"error-input"},r.state.errorList.claims[t]["boolean-value-false"]):""))));var c=[];r.state.config.scopes.forEach((function(a,l){-1===e.scope.indexOf(a.name)&&c.push(n.default.createElement("a",{className:"dropdown-item",key:l,href:"#",onClick:function(e){return r.addScopeClaim(e,t,a.name)}},a.name))}));var u=[];e.scope.forEach((function(e,a){u.push(n.default.createElement("a",{href:"#",onClick:function(e){return r.deleteScopeClaim(e,t,a)},key:a},n.default.createElement("span",{className:"badge badge-primary btn-icon-right"},e,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))})),i.push(n.default.createElement("div",{key:t},n.default.createElement("hr",null),n.default.createElement("h4",null,e.name||o.default.t("admin.mod-claims-new")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-claims-name-"+e.name},o.default.t("admin.mod-glwd-claims-name"))),n.default.createElement("input",{type:"text",className:a?"form-control is-invalid":"form-control",id:"mod-glwd-claims-name-"+e.name,onChange:function(e){return r.setClaimName(e,t)},value:e.name,placeholder:o.default.t("admin.mod-glwd-claims-name-ph")}),a?n.default.createElement("span",{className:"error-input"},r.state.errorList.claims[t].name):"")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-claims-user-property-"+e.name},o.default.t("admin.mod-glwd-claims-user-property"))),n.default.createElement("input",{type:"text",className:l?"form-control is-invalid":"form-control",id:"mod-glwd-claims-user-property-"+e.name,onChange:function(e){return r.setClaimUserProperty(e,t)},value:e["user-property"],placeholder:o.default.t("admin.mod-glwd-claims-user-property-ph")}),l?n.default.createElement("span",{className:"error-input"},r.state.errorList.claims[t]["user-property"]):"")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-claims-type"},o.default.t("admin.mod-glwd-claims-type"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-claims-type-"+e.name,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-claims-type-"+e.type)),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-claims-type"},n.default.createElement("a",{className:"dropdown-item"+("string"===e.type?" active":""),href:"#",onClick:function(e){return r.setClaimType(e,t,"string")}},o.default.t("admin.mod-glwd-claims-type-string")),n.default.createElement("a",{className:"dropdown-item"+("number"===e.type?" active":""),href:"#",onClick:function(e){return r.setClaimType(e,t,"number")}},o.default.t("admin.mod-glwd-claims-type-number")),n.default.createElement("a",{className:"dropdown-item"+("boolean"===e.type?" active":""),href:"#",onClick:function(e){return r.setClaimType(e,t,"boolean")}},o.default.t("admin.mod-glwd-claims-type-boolean"))))),m,n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-claims-mandatory-"+e.name,onChange:function(e){return r.toggleClaimMandatory(e,t)},checked:e.mandatory}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-claims-mandatory-"+e.name},o.default.t("admin.mod-glwd-claims-mandatory"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-claims-on-demand-"+e.name,onChange:function(e){return r.toggleClaimOnDemand(e,t)},checked:e["on-demand"],disabled:e.mandatory}),n.default.createElement("label",{disabled:!0,className:"form-check-label",htmlFor:"mod-glwd-claims-on-demand-"+e.name},o.default.t("admin.mod-glwd-claims-on-demand"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-scope-claim"},o.default.t("admin.mod-glwd-scope-claim"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-scope-claim","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:e.mandatory},o.default.t("admin.mod-glwd-scope-claim-select")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-name-email-claim"},c)),u))),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(e){return r.deleteClaim(e,t)},title:o.default.t("admin.mod-claims-delete")},n.default.createElement("i",{className:"fas fa-trash"}))))})),"no"!==this.state.mod.parameters["address-claim"].type&&(a=n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-addr-claim-formatted"},o.default.t("admin.mod-glwd-addr-claim-formatted"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-addr-claim-formatted",onChange:function(e){return r.changeAddressClaimParam(e,"formatted")},value:this.state.mod.parameters["address-claim"].formatted,placeholder:o.default.t("admin.mod-glwd-addr-claim-formatted-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-addr-claim-street-address"},o.default.t("admin.mod-glwd-addr-claim-street-address"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-addr-claim-street-address",onChange:function(e){return r.changeAddressClaimParam(e,"street_address")},value:this.state.mod.parameters["address-claim"].street_address,placeholder:o.default.t("admin.mod-glwd-addr-claim-street-address-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-addr-claim-locality"},o.default.t("admin.mod-glwd-addr-claim-locality"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-addr-claim-locality",onChange:function(e){return r.changeAddressClaimParam(e,"locality")},value:this.state.mod.parameters["address-claim"].locality,placeholder:o.default.t("admin.mod-glwd-addr-claim-locality-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-addr-claim-region"},o.default.t("admin.mod-glwd-addr-claim-region"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-addr-claim-region",onChange:function(e){return r.changeAddressClaimParam(e,"region")},value:this.state.mod.parameters["address-claim"].region,placeholder:o.default.t("admin.mod-glwd-addr-claim-region-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-addr-claim-postal-code"},o.default.t("admin.mod-glwd-addr-claim-postal-code"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-addr-claim-postal-code",onChange:function(e){return r.changeAddressClaimParam(e,"postal_code")},value:this.state.mod.parameters["address-claim"].postal_code,placeholder:o.default.t("admin.mod-glwd-addr-claim-postal-code-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-addr-claim-country"},o.default.t("admin.mod-glwd-addr-claim-country"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-addr-claim-country",onChange:function(e){return r.changeAddressClaimParam(e,"country")},value:this.state.mod.parameters["address-claim"].country,placeholder:o.default.t("admin.mod-glwd-addr-claim-country-ph")}))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-addr-claim-mandatory",onChange:function(e){return r.toggleAddrClaimMandatory(e)},checked:this.state.mod.parameters["address-claim"].mandatory}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-addr-claim-mandatory"},o.default.t("admin.mod-glwd-addr-claim-mandatory"))))),n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-oidc-config"))),n.default.createElement("code",null,u))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-auth"))),n.default.createElement("code",null,f))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-token"))),n.default.createElement("code",null,p))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-glwd-url-userinfo"))),n.default.createElement("code",null,h))),n.default.createElement("hr",null),n.default.createElement("div",{className:"accordion",id:"accordionGenral"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseGenral","aria-expanded":"true","aria-controls":"collapseAuthType"},this.state.errorList.general?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-oidc-general-title")))),n.default.createElement("div",{id:"collapseGenral",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionGenral"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-iss"},o.default.t("admin.mod-glwd-iss"))),n.default.createElement("input",{type:"text",className:this.state.errorList.iss?"form-control is-invalid":"form-control",id:"mod-glwd-iss",onChange:function(e){return r.changeParam(e,"iss")},value:this.state.mod.parameters.iss,placeholder:o.default.t("admin.mod-glwd-iss-ph")})),this.state.errorList.iss?n.default.createElement("span",{className:"error-input"},this.state.errorList.iss):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-request-parameter-allow",onChange:function(e){return r.toggleParam(e,"request-parameter-allow")},checked:this.state.mod.parameters["request-parameter-allow"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-request-parameter-allow"},o.default.t("admin.mod-glwd-request-parameter-allow"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-request-uri-allow-https-non-secure",onChange:function(e){return r.toggleParam(e,"request-uri-allow-https-non-secure")},checked:this.state.mod.parameters["request-uri-allow-https-non-secure"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-request-uri-allow-https-non-secure"},o.default.t("admin.mod-glwd-request-uri-allow-https-non-secure"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-jwt-type"},o.default.t("admin.mod-glwd-secret-type"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-secret-type","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-secret-type-"+this.state.mod.parameters["secret-type"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-secret-type"},n.default.createElement("a",{className:"dropdown-item"+("public"===this.state.mod.parameters["secret-type"]?" active":""),href:"#",onClick:function(e){return r.changeSecretType(e,"public")}},o.default.t("admin.mod-glwd-secret-type-public")),n.default.createElement("a",{className:"dropdown-item"+("pairwise"===this.state.mod.parameters["secret-type"]?" active":""),href:"#",onClick:function(e){return r.changeSecretType(e,"pairwise")}},o.default.t("admin.mod-glwd-secret-type-pairwise")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-allowed-scope"},o.default.t("admin.mod-glwd-allowed-scope"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-allowed-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-name-email-scope-select")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-name-scope-claim"},b)),y)))))),n.default.createElement("div",{className:"accordion",id:"accordionSignature"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseSignature","aria-expanded":"true","aria-controls":"collapseSignature"},this.state.errorList.signature?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-sign-title")))),n.default.createElement("div",{id:"collapseSignature",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionSignature"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-jwt-type"},o.default.t("admin.mod-glwd-jwt-type"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-jwt-type","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-jwt-type-"+this.state.mod.parameters["jwt-type"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-jwt-type"},n.default.createElement("a",{className:"dropdown-item"+("rsa"===this.state.mod.parameters["jwt-type"]?" active":""),href:"#",onClick:function(e){return r.changeJwtType(e,"rsa")}},o.default.t("admin.mod-glwd-jwt-type-rsa")),n.default.createElement("a",{className:"dropdown-item"+("ecdsa"===this.state.mod.parameters["jwt-type"]?" active":""),href:"#",onClick:function(e){return r.changeJwtType(e,"ecdsa")}},o.default.t("admin.mod-glwd-jwt-type-ecdsa")),n.default.createElement("a",{className:"dropdown-item"+("sha"===this.state.mod.parameters["jwt-type"]?" active":""),href:"#",onClick:function(e){return r.changeJwtType(e,"sha")}},o.default.t("admin.mod-glwd-jwt-type-sha"))))),this.state.errorList["jwt-type"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["jwt-type"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-jwt-key-size"},o.default.t("admin.mod-glwd-jwt-key-size"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-glwd-jwt-key-size","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-jwt-key-size-"+this.state.mod.parameters["jwt-key-size"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-jwt-key-size"},n.default.createElement("a",{className:"dropdown-item"+("256"===this.state.mod.parameters["jwt-key-size"]?" active":""),href:"#",onClick:function(e){return r.changeJwtKeySize(e,"256")}},o.default.t("admin.mod-glwd-jwt-key-size-256")),n.default.createElement("a",{className:"dropdown-item"+("384"===this.state.mod.parameters["jwt-key-size"]?" active":""),href:"#",onClick:function(e){return r.changeJwtKeySize(e,"384")}},o.default.t("admin.mod-glwd-jwt-key-size-384")),n.default.createElement("a",{className:"dropdown-item"+("512"===this.state.mod.parameters["jwt-key-size"]?" active":""),href:"#",onClick:function(e){return r.changeJwtKeySize(e,"512")}},o.default.t("admin.mod-glwd-jwt-key-size-512"))))),this.state.errorList["jwt-key-size"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["jwt-key-size"]):""),e,t)))),n.default.createElement("div",{className:"accordion",id:"accordionToken"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseToken","aria-expanded":"true","aria-controls":"collapseToken"},this.state.errorList.general?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-token-title")))),n.default.createElement("div",{id:"collapseToken",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionToken"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-access-token-duration"},o.default.t("admin.mod-glwd-access-token-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["access-token-duration"]?"form-control is-invalid":"form-control",id:"mod-glwd-access-token-duration",onChange:function(e){return r.changeNumberParam(e,"access-token-duration")},value:this.state.mod.parameters["access-token-duration"],placeholder:o.default.t("admin.mod-glwd-access-token-duration-ph")})),this.state.errorList["access-token-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["access-token-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-refresh-token-duration"},o.default.t("admin.mod-glwd-refresh-token-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["refresh-token-duration"]?"form-control is-invalid":"form-control",id:"mod-glwd-refresh-token-duration",onChange:function(e){return r.changeNumberParam(e,"refresh-token-duration")},value:this.state.mod.parameters["refresh-token-duration"],placeholder:o.default.t("admin.mod-glwd-refresh-token-duration-ph")})),this.state.errorList["refresh-token-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["refresh-token-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-code-duration"},o.default.t("admin.mod-glwd-code-duration"))),n.default.createElement("input",{type:"number",min:"0",step:"1",className:this.state.errorList["code-duration"]?"form-control is-invalid":"form-control",id:"mod-glwd-code-duration",onChange:function(e){return r.changeNumberParam(e,"code-duration")},value:this.state.mod.parameters["code-duration"],placeholder:o.default.t("admin.mod-glwd-code-duration-ph")})),this.state.errorList["code-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["code-duration"]):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-refresh-token-rolling",onChange:function(e){return r.toggleParam(e,"refresh-token-rolling")},checked:this.state.mod.parameters["refresh-token-rolling"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-refresh-token-rolling"},o.default.t("admin.mod-glwd-refresh-token-rolling")))))),n.default.createElement("div",{className:"accordion",id:"accordionAuthType"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseAuthType","aria-expanded":"true","aria-controls":"collapseAuthType"},this.state.errorList.token?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-auth-type-title")))),n.default.createElement("div",{id:"collapseAuthType",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionAuthType"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-allow-non-oidc",onChange:function(e){return r.toggleParam(e,"allow-non-oidc")},checked:this.state.mod.parameters["allow-non-oidc"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-allow-non-oidc"},o.default.t("admin.mod-glwd-allow-non-oidc")))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-code-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-code-enabled")},checked:this.state.mod.parameters["auth-type-code-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-code-enabled"},o.default.t("admin.mod-glwd-auth-type-code-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-token-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-token-enabled")},checked:this.state.mod.parameters["auth-type-token-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-token-enabled"},o.default.t("admin.mod-glwd-auth-type-token-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{disabled:!0,type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-id-token-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-id-token-enabled")},checked:this.state.mod.parameters["auth-type-id-token-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-id-token-enabled"},o.default.t("admin.mod-glwd-auth-type-id-token-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-none-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-none-enabled")},checked:this.state.mod.parameters["auth-type-none-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-none-enabled"},o.default.t("admin.mod-glwd-auth-type-none-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",disabled:!this.state.mod.parameters["allow-non-oidc"],className:"form-check-input",id:"mod-glwd-auth-type-password-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-password-enabled")},checked:this.state.mod.parameters["auth-type-password-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-password-enabled"},o.default.t("admin.mod-glwd-auth-type-password-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",disabled:!this.state.mod.parameters["allow-non-oidc"],className:"form-check-input",id:"mod-glwd-auth-type-client-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-client-enabled")},checked:this.state.mod.parameters["auth-type-client-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-client-enabled"},o.default.t("admin.mod-glwd-auth-type-client-enabled"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-auth-type-refresh-enabled",onChange:function(e){return r.toggleParam(e,"auth-type-refresh-enabled")},checked:this.state.mod.parameters["auth-type-refresh-enabled"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-auth-type-refresh-enabled"},o.default.t("admin.mod-glwd-auth-type-refresh-enabled"))))))),n.default.createElement("div",{className:"accordion",id:"accordionOpenidConfig"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOpenidConfig","aria-expanded":"true","aria-controls":"collapseOpenidConfig"},this.state.errorList.configuration?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-openid-configuration-title")))),n.default.createElement("div",{id:"collapseOpenidConfig",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionOpenidConfig"},n.default.createElement("div",{className:"card-body"},n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-service-documentation"},o.default.t("admin.mod-glwd-service-documentation"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-service-documentation",onChange:function(e){return r.changeParam(e,"service-documentation")},value:this.state.mod.parameters["service-documentation"],placeholder:o.default.t("admin.mod-glwd-service-documentation-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-op-policy-uri"},o.default.t("admin.mod-glwd-op-policy-uri"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-op-policy-uri",onChange:function(e){return r.changeParam(e,"op-policy-uri")},value:this.state.mod.parameters["op-policy-uri"],placeholder:o.default.t("admin.mod-glwd-op-policy-uri-ph")}))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-op-tos-uri"},o.default.t("admin.mod-glwd-op-tos-uri"))),n.default.createElement("input",{type:"text",className:"form-control",id:"mod-glwd-op-tos-uri",onChange:function(e){return r.changeParam(e,"op-tos-uri")},value:this.state.mod.parameters["op-tos-uri"],placeholder:o.default.t("admin.mod-glwd-op-tos-uri-ph")}))),n.default.createElement("hr",null),n.default.createElement("div",{className:"accordion",id:"accordionAddParam"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#colx#lapseAddParam","aria-expanded":"true","aria-controls":"collapseAddParam"}))),n.default.createElement("div",{id:"collapseAddParam",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionAddParam"},n.default.createElement("div",{className:"card-body"})))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("h5",null,o.default.t("admin.mod-glwd-jwks-title"))))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-glwd-jwks-show",onChange:function(e){return r.toggleParam(e,"jwks-show")},checked:this.state.mod.parameters["jwks-show"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-glwd-jwks-show"},o.default.t("admin.mod-glwd-jwks-show"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-jwks-x5c"},o.default.t("admin.mod-glwd-jwks-x5c"))),n.default.createElement("div",{className:"custom-file"},n.default.createElement("input",{disabled:!this.state.mod.parameters["jwks-show"],type:"file",className:"custom-file-input",id:"mod-glwd-jwks-x5c",onChange:function(e){return r.uploadX5cFile(e)}}),n.default.createElement("label",{className:"custom-file-label",htmlFor:"mod-glwd-jwks-x5c"},o.default.t("admin.choose-file")))),m))))),n.default.createElement("div",{className:"accordion",id:"accordionScope"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"dataFormatCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseDataFormat","aria-expanded":"true","aria-controls":"collapseDataFormat"},this.state.errorList["scope-override"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-scope-override")))),n.default.createElement("div",{id:"collapseDataFormat",className:"collapse","aria-labelledby":"dataFormatCard","data-parent":"#accordionScope"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-glwd-scope-override-message")),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("div",{className:"btn-group",role:"group"},g),n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addScopeOverride,title:o.default.t("admin.mod-glwd-scope-add")},n.default.createElement("i",{className:"fas fa-plus"}))),l)))),n.default.createElement("div",{className:"accordion",id:"accordionAddParam"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseAdditionalParam","aria-expanded":"true","aria-controls":"collapseAdditionalParam"},this.state.errorList["additional-parameters"]?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-additional-parameter")))),n.default.createElement("div",{id:"collapseAdditionalParam",className:"collapse","aria-labelledby":"addParamCard","data-parent":"#accordionAddParam"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-glwd-additional-parameter-message")),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addAdditionalParameter,title:o.default.t("admin.mod-glwd-additional-parameter-add")},n.default.createElement("i",{className:"fas fa-plus"}))),s)))),n.default.createElement("div",{className:"accordion",id:"accordionAddClaim"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseAddClaim","aria-expanded":"true","aria-controls":"collapseAddParam"},this.state.errorList.claims?n.default.createElement("span",{className:"error-input btn-icon"},n.default.createElement("i",{className:"fas fa-exclamation-circle"})):"",o.default.t("admin.mod-glwd-claims")))),n.default.createElement("div",{id:"collapseAddClaim",className:"collapse","aria-labelledby":"addClaimCard","data-parent":"#accordionAddClaim"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-glwd-claims-message")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-name-claim"},o.default.t("admin.mod-glwd-name-claim"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-name-claim","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-name-email-claim-"+this.state.mod.parameters["name-claim"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-name-email-claim"},n.default.createElement("a",{className:"dropdown-item"+("no"===this.state.mod.parameters["name-claim"]?" active":""),href:"#",onClick:function(e){return r.changeParamWithValue("name-claim","no")}},o.default.t("admin.mod-glwd-name-email-claim-no")),n.default.createElement("a",{className:"dropdown-item"+("on-demand"===this.state.mod.parameters["name-claim"]?" active":""),href:"#",onClick:function(e){return r.changeParamWithValue("name-claim","on-demand")}},o.default.t("admin.mod-glwd-name-email-claim-on-demand")),n.default.createElement("a",{className:"dropdown-item"+("mandatory"===this.state.mod.parameters["name-claim"]?" active":""),href:"#",onClick:function(e){return r.changeParamWithValue("name-claim","mandatory")}},o.default.t("admin.mod-glwd-name-email-claim-mandatory")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-name-scope"},o.default.t("admin.mod-glwd-name-scope"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-name-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-name-email-scope-select")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-name-scope-claim"},v)),E)),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-email-claim"},o.default.t("admin.mod-glwd-email-claim"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-email-claim","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-name-email-claim-"+this.state.mod.parameters["email-claim"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-name-email-claim"},n.default.createElement("a",{className:"dropdown-item"+("no"===this.state.mod.parameters["email-claim"]?" active":""),href:"#",onClick:function(e){return r.changeParamWithValue("email-claim","no")}},o.default.t("admin.mod-glwd-name-email-claim-no")),n.default.createElement("a",{className:"dropdown-item"+("on-demand"===this.state.mod.parameters["email-claim"]?" active":""),href:"#",onClick:function(e){return r.changeParamWithValue("email-claim","on-demand")}},o.default.t("admin.mod-glwd-name-email-claim-on-demand")),n.default.createElement("a",{className:"dropdown-item"+("mandatory"===this.state.mod.parameters["email-claim"]?" active":""),href:"#",onClick:function(e){return r.changeParamWithValue("email-claim","mandatory")}},o.default.t("admin.mod-glwd-name-email-claim-mandatory")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-glwd-name-scope"},o.default.t("admin.mod-glwd-email-scope"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-name-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-name-email-scope-select")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-name-scope-claim"},N)),w)),n.default.createElement("div",{className:"btn-group",role:"group"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addClaim,title:o.default.t("admin.mod-glwd-claim-add")},n.default.createElement("i",{className:"fas fa-plus"}))),i)))),n.default.createElement("div",{className:"accordion",id:"accordionAddressClaim"},n.default.createElement("div",{className:"card"},n.default.createElement("div",{className:"card-header",id:"addParamCard"},n.default.createElement("h2",{className:"mb-0"},n.default.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseAddressClaim","aria-expanded":"true","aria-controls":"collapseAddressClaim"},o.default.t("admin.mod-glwd-address-claim")))),n.default.createElement("div",{id:"collapseAddressClaim",className:"collapse","aria-labelledby":"addressClaimCard","data-parent":"#accordionAddressClaim"},n.default.createElement("div",{className:"card-body"},n.default.createElement("p",null,o.default.t("admin.mod-glwd-address-claim-message")),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-mod-glwd-address-claim"},o.default.t("admin.mod-glwd-address-claim-use"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-mod-glwd-address-claim","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-glwd-name-email-claim-"+this.state.mod.parameters["address-claim"].type)),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-glwd-address-claim"},n.default.createElement("a",{className:"dropdown-item"+("no"===this.state.mod.parameters["address-claim"]?" active":""),href:"#",onClick:function(e){return r.changeAddressClaim(e,"no")}},o.default.t("admin.mod-glwd-name-email-claim-no")),n.default.createElement("a",{className:"dropdown-item"+("on-demand"===this.state.mod.parameters["address-claim"]?" active":""),href:"#",onClick:function(e){return r.changeAddressClaim(e,"on-demand")}},o.default.t("admin.mod-glwd-name-email-claim-on-demand")),n.default.createElement("a",{className:"dropdown-item"+("mandatory"===this.state.mod.parameters["address-claim"]?" active":""),href:"#",onClick:function(e){return r.changeAddressClaim(e,"mandatory")}},o.default.t("admin.mod-glwd-name-email-claim-mandatory")))))),a)))))}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod.parameters||(e.mod.parameters={}),e.mod.parameters["jwt-type"]||(e.mod.parameters["jwt-type"]="rsa"),e.mod.parameters["jwt-key-size"]||(e.mod.parameters["jwt-key-size"]="256"),e.mod.parameters.key||(e.mod.parameters.key=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters.cert||(e.mod.parameters.cert=""),e.mod.parameters["access-token-duration"]||(e.mod.parameters["access-token-duration"]=3600),e.mod.parameters["refresh-token-duration"]||(e.mod.parameters["refresh-token-duration"]=1209600),e.mod.parameters["code-duration"]||(e.mod.parameters["code-duration"]=600),void 0===e.mod.parameters["refresh-token-rolling"]&&(e.mod.parameters["refresh-token-rolling"]=!0),void 0===e.mod.parameters["allow-non-oidc"]&&(e.mod.parameters["allow-non-oidc"]=!1),void 0===e.mod.parameters["auth-type-code-enabled"]&&(e.mod.parameters["auth-type-code-enabled"]=!0),void 0===e.mod.parameters["auth-type-token-enabled"]&&(e.mod.parameters["auth-type-token-enabled"]=!0),e.mod.parameters["auth-type-id-token-enabled"]=!0,void 0===e.mod.parameters["auth-type-none-enabled"]&&(e.mod.parameters["auth-type-none-enabled"]=!0),void 0===e.mod.parameters["auth-type-password-enabled"]&&(e.mod.parameters["auth-type-password-enabled"]=!0),void 0===e.mod.parameters["auth-type-client-enabled"]&&(e.mod.parameters["auth-type-client-enabled"]=!0),void 0===e.mod.parameters["auth-type-refresh-enabled"]&&(e.mod.parameters["auth-type-refresh-enabled"]=!0),e.mod.parameters.scope||(e.mod.parameters.scope=[]),e.mod.parameters["additional-parameters"]||(e.mod.parameters["additional-parameters"]=[]),e.mod.parameters.claims||(e.mod.parameters.claims=[]),void 0===e.mod.parameters["service-documentation"]&&(e.mod.parameters["service-documentation"]="https://github.com/babelouest/glewlwyd/tree/master/docs"),void 0===e.mod.parameters["op-policy-uri"]&&(e.mod.parameters["op-policy-uri"]=""),void 0===e.mod.parameters["op-tos-uri"]&&(e.mod.parameters["op-tos-uri"]=""),void 0===e.mod.parameters["jwks-show"]&&(e.mod.parameters["jwks-show"]=!0),void 0===e.mod.parameters["jwks-x5c"]&&(e.mod.parameters["jwks-x5c"]=[]),void 0===e.mod.parameters["request-parameter-allow"]&&(e.mod.parameters["request-parameter-allow"]=!0),void 0===e.mod.parameters["request-uri-allow-https-non-secure"]&&(e.mod.parameters["request-uri-allow-https-non-secure"]=!1),e.mod.parameters["secret-type"]||(e.mod.parameters["secret-type"]="pairwise"),e.mod.parameters["address-claim"]||(e.mod.parameters["address-claim"]={type:"no",formatted:"",street_address:"",locality:"",region:"",postal_code:"",country:"",mandatory:!1}),e.mod.parameters["name-claim"]||(e.mod.parameters["name-claim"]="on-demand"),e.mod.parameters["name-claim-scope"]||(e.mod.parameters["name-claim-scope"]=[]),e.mod.parameters["email-claim"]||(e.mod.parameters["email-claim"]="no"),e.mod.parameters["email-claim-scope"]||(e.mod.parameters["email-claim-scope"]=[]),e.mod.parameters["allowed-scope"]||(e.mod.parameters["allowed-scope"]=["openid"]),t.state={config:e.config,mod:e.mod,role:e.role,check:e.check,errorList:{},newScopeOverride:!1},t.state.check&&t.checkParameters(),t.checkParameters=t.checkParameters.bind(t),t.changeParam=t.changeParam.bind(t),t.changeParamWithValue=t.changeParamWithValue.bind(t),t.changeNumberParam=t.changeNumberParam.bind(t),t.toggleParam=t.toggleParam.bind(t),t.changeJwtType=t.changeJwtType.bind(t),t.changeSecretType=t.changeSecretType.bind(t),t.setNewScopeOverride=t.setNewScopeOverride.bind(t),t.addScopeOverride=t.addScopeOverride.bind(t),t.changeScopeOverrideRefreshDuration=t.changeScopeOverrideRefreshDuration.bind(t),t.toggleScopeOverrideRolling=t.toggleScopeOverrideRolling.bind(t),t.addAdditionalParameter=t.addAdditionalParameter.bind(t),t.setAdditionalPropertyUserParameter=t.setAdditionalPropertyUserParameter.bind(t),t.setAdditionalPropertyTokenParameter=t.setAdditionalPropertyTokenParameter.bind(t),t.deleteAdditionalProperty=t.deleteAdditionalProperty.bind(t),t.addClaim=t.addClaim.bind(t),t.deleteClaim=t.deleteClaim.bind(t),t.setClaimName=t.setClaimName.bind(t),t.setClaimUserProperty=t.setClaimUserProperty.bind(t),t.setClaimType=t.setClaimType.bind(t),t.setClaimBooleanTrue=t.setClaimBooleanTrue.bind(t),t.setClaimBooleanFalse=t.setClaimBooleanFalse.bind(t),t.toggleClaimMandatory=t.toggleClaimMandatory.bind(t),t.toggleClaimOnDemand=t.toggleClaimOnDemand.bind(t),t.uploadFile=t.uploadFile.bind(t),t.uploadX5cFile=t.uploadX5cFile.bind(t),t.handleRemoveX5c=t.handleRemoveX5c.bind(t),t.changeAddressClaimParam=t.changeAddressClaimParam.bind(t),t.changeAddressClaim=t.changeAddressClaim.bind(t),t.toggleAddrClaimMandatory=t.toggleAddrClaimMandatory.bind(t),t.addScopeClaim=t.addScopeClaim.bind(t),t.deleteScopeClaim=t.deleteScopeClaim.bind(t),t.addNameScope=t.addNameScope.bind(t),t.deleteNameScope=t.deleteNameScope.bind(t),t.addEmailScope=t.addEmailScope.bind(t),t.deleteEmailScope=t.deleteEmailScope.bind(t),t.addAllowedScope=t.addAllowedScope.bind(t),t.deleteAllowedScope=t.deleteAllowedScope.bind(t),t}t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=a(0),n=s(l),o=s(a(1)),d=s(a(2));function s(e){return e&&e.__esModule?e:{default:e}}var i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,l.Component),function(e,t,a){t&&r(e.prototype,t),a&&r(e,a)}(m,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.mod||(e.mod={parameters:{}}),e.mod.parameters["verification-code-length"]||(e.mod.parameters["verification-code-length"]=8),e.mod.parameters["verification-code-duration"]||(e.mod.parameters["verification-code-duration"]=600),e.mod.parameters.port||(e.mod.parameters.port=0),void 0===e.mod.parameters["verify-email"]&&(e.mod.parameters["verify-email"]=!1),void 0===e.mod.parameters["email-is-username"]&&(e.mod.parameters["email-is-username"]=!1),void 0===e.mod.parameters.scope&&(e.mod.parameters.scope=[e.config.profile_scope]),e.mod.parameters["set-password"]||(e.mod.parameters["set-password"]="always"),void 0===e.mod.parameters.schemes&&(e.mod.parameters.schemes=[]),e.mod.parameters["session-key"]||(e.mod.parameters["session-key"]="G_REGISTER_SESSION"),e.mod.parameters["session-duration"]||(e.mod.parameters["session-duration"]=3600),e.mod.parameters["content-type"]||(e.mod.parameters["content-type"]="text/plain; charset=utf-8"),e.mod.parameters.subject||(e.mod.parameters.subject="Confirm registration"),e.mod.parameters["body-pattern"]||(e.mod.parameters["body-pattern"]="The code is {CODE}\n\n"+window.location.href.split("?")[0].split("#")[0]+"?registration=<your_registration_plugin_name>&token={TOKEN}"),this.setState({config:e.config,modSchemes:e.modSchemes,mod:e.mod,role:e.role,check:e.check,hasError:!1},(function(){t.state.check&&t.checkParameters()}))}},{key:"changeParam",value:function(e,t,a){var r=this.state.mod;r.parameters[t]=a?parseInt(e.target.value):e.target.value,this.setState({mod:r})}},{key:"toggleParam",value:function(e,t){var a=this.state.mod;a.parameters[t]=!a.parameters[t],this.setState({mod:a})}},{key:"addScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters.scope.push(t),this.setState({mod:a})}},{key:"deleteScope",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters.scope.splice(t,1),this.setState({mod:a})}},{key:"setPassword",value:function(e,t){e.preventDefault();var a=this.state.mod;a.parameters["set-password"]=t,this.setState({mod:a})}},{key:"addScheme",value:function(){var e=this.state.mod;e.parameters.schemes.push({module:"",name:"",register:"yes"}),this.setState({mod:e})}},{key:"deleteScheme",value:function(e){var t=this.state.mod;t.parameters.schemes.splice(e,1),this.setState({mod:t})}},{key:"setSchemeName",value:function(e,t,a){e.preventDefault();var r=this.state.mod;this.state.modSchemes.forEach((function(e){e.name===a&&(r.parameters.schemes[t].module=e.module,r.parameters.schemes[t].name=e.name,r.parameters.schemes[t].display_name=e.display_name)})),this.setState({mod:r})}},{key:"setSchemeRegister",value:function(e,t,a){e.preventDefault();var r=this.state.mod;r.parameters.schemes[t].register=a,this.setState({mod:r})}},{key:"checkParameters",value:function(){var e={},t=!1,a=!1;this.state.mod.parameters["session-key"]||(t=!0,e["session-key"]=o.default.t("admin.mod-register-session-key-error")),this.state.mod.parameters["session-duration"]||(t=!0,e["session-duration"]=o.default.t("admin.mod-register-session-duration-error")),this.state.mod.parameters.scope.length||(t=!0,e.scope=o.default.t("admin.mod-register-scope-error")),this.state.mod.parameters.schemes.forEach((function(e){"always"===e.register&&(a=!0)})),this.state.mod.parameters["verify-email"]&&(this.state.mod.parameters["verification-code-length"]||(t=!0,e["verification-code-length"]=o.default.t("admin.mod-email-verification-code-length-error")),this.state.mod.parameters["verification-code-duration"]||(t=!0,e["verification-code-duration"]=o.default.t("admin.mod-email-verification-code-duration-error")),this.state.mod.parameters.host||(t=!0,e.host=o.default.t("admin.mod-email-host-error")),this.state.mod.parameters.from||(t=!0,e.from=o.default.t("admin.mod-email-from-error")),this.state.mod.parameters.subject||(t=!0,e.subject=o.default.t("admin.mod-email-subject-error")),this.state.mod.parameters["body-pattern"]&&this.state.mod.parameters["body-pattern"].search("{CODE}")||(t=!0,e["body-pattern"]=o.default.t("admin.mod-email-body-pattern-error"))),"always"===this.state.mod.parameters["set-password"]||a||(t=!0,e["has-mandatory"]=o.default.t("admin.mod-register-has-mandatory-error")),t?this.setState({errorList:e},(function(){d.default.sendMessage("ModPlugin",{type:"modInvalid"})})):this.setState({errorList:{}},(function(){d.default.sendMessage("ModPlugin",{type:"modValid"})}))}},{key:"render",value:function(){var e=this,t=[],a=[],r=[];this.state.config.pattern.user.forEach((function(a){"scope"===a.name&&a.listElements.forEach((function(a,r){t.push(n.default.createElement("a",{key:r,className:"dropdown-item",href:"#",onClick:function(t){return e.addScope(t,a)}},a))}))})),this.state.mod.parameters.scope.forEach((function(t,r){a.push(n.default.createElement("a",{className:"btn-icon-right",href:"#",onClick:function(t){return e.deleteScope(t,r)},key:r},n.default.createElement("span",{className:"badge badge-primary"},t,n.default.createElement("span",{className:"badge badge-light btn-icon-right"},n.default.createElement("i",{className:"fas fa-times"})))))}));var l=n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-register-scope","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-register-scope")),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-register-scope"},t),n.default.createElement("div",null,a));return this.state.mod.parameters.schemes.forEach((function(t,a){var l=[];e.state.modSchemes.forEach((function(t,r){var o=!1;e.state.mod.parameters.schemes.forEach((function(e){t.name===e.name&&(o=!0)})),o||l.push(n.default.createElement("a",{key:r,className:"dropdown-item",href:"#",onClick:function(r){return e.setSchemeName(r,a,t.name)}},t.name))})),r.push(n.default.createElement("div",{className:"form-group",key:a},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-name-"+a},o.default.t("admin.mod-register-scheme-name"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-register-name-"+a,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t.name),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-register-name"},l)),n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-scheme-register-"+a},o.default.t("admin.mod-register-scheme-register"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-register-scheme-register-"+a,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-register-"+("always"===t.register?"yes":"no"))),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-register-scheme-register"},n.default.createElement("a",{className:"dropdown-item"+("always"===t.register?" active":""),href:"#",onClick:function(t){return e.setSchemeRegister(t,a,"always")}},o.default.t("admin.mod-register-yes")),n.default.createElement("a",{className:"dropdown-item"+("yes"===t.register?" active":""),href:"#",onClick:function(t){return e.setSchemeRegister(t,a,"yes")}},o.default.t("admin.mod-register-no")))),n.default.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.deleteScheme(a)}},n.default.createElement("i",{className:"fas fa-trash"})))))})),n.default.createElement("div",null,n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-session-key"},o.default.t("admin.mod-register-session-key"))),n.default.createElement("input",{type:"text",className:this.state.errorList["session-key"]?"form-control is-invalid":"form-control",id:"mod-register-session-key",onChange:function(t){return e.changeParam(t,"session-key")},value:this.state.mod.parameters["session-key"],placeholder:o.default.t("admin.mod-register-session-key")})),this.state.errorList["session-key"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["session-key"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-session-duration"},o.default.t("admin.mod-register-session-duration"))),n.default.createElement("input",{type:"number",min:"1",step:"1",className:this.state.errorList["session-duration"]?"form-control is-invalid":"form-control",id:"mod-register-session-duration",onChange:function(t){return e.changeParam(t,"session-duration",!0)},value:this.state.mod.parameters["session-duration"],placeholder:o.default.t("admin.mod-register-session-duration-ph")})),this.state.errorList["session-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["session-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-set-password"},o.default.t("admin.mod-register-set-password"))),n.default.createElement("div",{className:"dropdown"},n.default.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"mod-register-set-password","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.t("admin.mod-register-"+this.state.mod.parameters["set-password"])),n.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"mod-register-set-password"},n.default.createElement("a",{className:"dropdown-item"+("always"===this.state.mod.parameters["set-password"]?" active":""),href:"#",onClick:function(t){return e.setPassword(t,"always")}},o.default.t("admin.mod-register-always")),n.default.createElement("a",{className:"dropdown-item"+("yes"===this.state.mod.parameters["set-password"]?" active":""),href:"#",onClick:function(t){return e.setPassword(t,"yes")}},o.default.t("admin.mod-register-yes")),n.default.createElement("a",{className:"dropdown-item"+("no"===this.state.mod.parameters["set-password"]?" active":""),href:"#",onClick:function(t){return e.setPassword(t,"no")}},o.default.t("admin.mod-register-no")))))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-default-scope"},o.default.t("admin.mod-register-scope-add"))),l),this.state.errorList.scope?n.default.createElement("span",{className:"error-input"},this.state.errorList.scope):""),n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.addScheme,disabled:this.state.mod.parameters.schemes.length===this.state.modSchemes.length},o.default.t("admin.mod-register-add-scheme"))))),r,n.default.createElement("hr",null),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-register-verify-email",onChange:function(t){return e.toggleParam(t,"verify-email")},checked:this.state.mod.parameters["verify-email"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-register-verify-email"},o.default.t("admin.mod-register-verify-email"))),n.default.createElement("div",{className:"collapse"+(this.state.mod.parameters["verify-email"]?" show":""),id:"verifyEmailCollapse"},n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",disabled:!this.state.mod.parameters["verify-email"],className:"form-check-input",id:"mod-register-email-is-username",onChange:function(t){return e.toggleParam(t,"email-is-username")},checked:this.state.mod.parameters["email-is-username"]}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-register-email-is-username"},o.default.t("admin.mod-register-email-is-username"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-verification-code-length"},o.default.t("admin.mod-email-verification-code-length"))),n.default.createElement("input",{type:"number",min:"0",max:"65536",step:"1",className:this.state.errorList["verification-code-length"]?"form-control is-invalid":"form-control",id:"mod-register-verification-code-length",onChange:function(t){return e.changeParam(t,"verification-code-length")},value:this.state.mod.parameters["verification-code-length"],placeholder:o.default.t("admin.mod-email-verification-code-length-ph")})),this.state.errorList["verification-code-length"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["verification-code-length"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-verification-code-duration"},o.default.t("admin.mod-email-verification-code-duration"))),n.default.createElement("input",{type:"number",min:"0",max:"65536",step:"1",className:this.state.errorList["verification-code-duration"]?"form-control is-invalid":"form-control",id:"mod-register-verification-code-duration",onChange:function(t){return e.changeParam(t,"verification-code-duration")},value:this.state.mod.parameters["verification-code-duration"],placeholder:o.default.t("admin.mod-email-verification-code-duration-ph")})),this.state.errorList["verification-code-duration"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["verification-code-duration"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-host"},o.default.t("admin.mod-email-host"))),n.default.createElement("input",{type:"text",className:this.state.errorList.host?"form-control is-invalid":"form-control",id:"mod-register-host",onChange:function(t){return e.changeParam(t,"host")},value:this.state.mod.parameters.host,placeholder:o.default.t("admin.mod-email-host-ph")})),this.state.errorList.host?n.default.createElement("span",{className:"error-input"},this.state.errorList.host):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-port"},o.default.t("admin.mod-email-port"))),n.default.createElement("input",{type:"number",min:"0",max:"65536",step:"1",className:this.state.errorList.port?"form-control is-invalid":"form-control",id:"mod-register-port",onChange:function(t){return e.changeParam(t,"port",!0)},value:this.state.mod.parameters.port,placeholder:o.default.t("admin.mod-email-port-ph")})),this.state.errorList.port?n.default.createElement("span",{className:"error-input"},this.state.errorList.port):""),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",id:"mod-register-use-tls",onChange:function(t){return e.toggleParam(t,"use-tls")},checked:this.state.mod.parameters["use-tls"]||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-register-use-tls"},o.default.t("admin.mod-email-use-tls"))),n.default.createElement("div",{className:"form-group form-check"},n.default.createElement("input",{type:"checkbox",className:"form-check-input",disabled:!this.state.mod.parameters["use-tls"],id:"mod-register-check-certificate",onChange:function(t){return e.toggleParam(t,"check-certificate")},checked:this.state.mod.parameters["check-certificate"]||!1}),n.default.createElement("label",{className:"form-check-label",htmlFor:"mod-register-check-certificate"},o.default.t("admin.mod-email-check-certificate"))),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-user"},o.default.t("admin.mod-email-user"))),n.default.createElement("input",{type:"text",className:this.state.errorList.user?"form-control is-invalid":"form-control",id:"mod-register-user",onChange:function(t){return e.changeParam(t,"user")},value:this.state.mod.parameters.user,placeholder:o.default.t("admin.mod-email-user-ph")})),this.state.errorList.user?n.default.createElement("span",{className:"error-input"},this.state.errorList.user):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-password"},o.default.t("admin.mod-email-password"))),n.default.createElement("input",{type:"password",className:this.state.errorList.password?"form-control is-invalid":"form-control",id:"mod-register-password",onChange:function(t){return e.changeParam(t,"password")},value:this.state.mod.parameters.password,placeholder:o.default.t("admin.mod-email-password-ph")})),this.state.errorList.password?n.default.createElement("span",{className:"error-input"},this.state.errorList.password):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-from"},o.default.t("admin.mod-email-from"))),n.default.createElement("input",{type:"text",className:this.state.errorList.from?"form-control is-invalid":"form-control",id:"mod-register-from",onChange:function(t){return e.changeParam(t,"from")},value:this.state.mod.parameters.from,placeholder:o.default.t("admin.mod-email-from-ph")})),this.state.errorList.from?n.default.createElement("span",{className:"error-input"},this.state.errorList.from):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-content-type"},o.default.t("admin.mod-email-content-type"))),n.default.createElement("input",{type:"text",className:this.state.errorList["content-type"]?"form-control is-invalid":"form-control",id:"mod-register-content-type",onChange:function(t){return e.changeParam(t,"content-type")},value:this.state.mod.parameters["content-type"]||"",placeholder:o.default.t("admin.mod-email-content-type-ph")})),this.state.errorList["content-type"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["content-type"]):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("label",{className:"input-group-text",htmlFor:"mod-register-subject"},o.default.t("admin.mod-email-subject"))),n.default.createElement("input",{type:"text",className:this.state.errorList.subject?"form-control is-invalid":"form-control",id:"mod-register-subject",onChange:function(t){return e.changeParam(t,"subject")},value:this.state.mod.parameters.subject||"",placeholder:o.default.t("admin.mod-register-subject-ph")})),this.state.errorList.subject?n.default.createElement("span",{className:"error-input"},this.state.errorList.subject):""),n.default.createElement("div",{className:"form-group"},n.default.createElement("div",{className:"input-group mb-3"},n.default.createElement("div",{className:"input-group-prepend"},n.default.createElement("span",{className:"input-group-text"},o.default.t("admin.mod-register-body-pattern"))),n.default.createElement("textarea",{rows:"5",className:this.state.errorList["body-pattern"]?"form-control is-invalid":"form-control",id:"mod-register-body-pattern",onChange:function(t){return e.changeParam(t,"body-pattern")},placeholder:o.default.t("admin.mod-register-body-pattern-ph"),defaultValue:this.state.mod.parameters["body-pattern"]||""})),this.state.errorList["body-pattern"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["body-pattern"]):"",n.default.createElement("span",{className:"badge badge-info"},o.default.t("admin.mod-register-body-pattern-doc")))),this.state.errorList["has-mandatory"]?n.default.createElement("span",{className:"error-input"},this.state.errorList["has-mandatory"]):"")}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return e.mod||(e.mod={parameters:{}}),e.mod.parameters["verification-code-length"]||(e.mod.parameters["verification-code-length"]=8),e.mod.parameters["verification-code-duration"]||(e.mod.parameters["verification-code-duration"]=600),e.mod.parameters.port||(e.mod.parameters.port=0),void 0===e.mod.parameters["verify-email"]&&(e.mod.parameters["verify-email"]=!1),void 0===e.mod.parameters["email-is-username"]&&(e.mod.parameters["email-is-username"]=!1),void 0===e.mod.parameters.scope&&(e.mod.parameters.scope=[e.config.profile_scope]),e.mod.parameters["set-password"]||(e.mod.parameters["set-password"]="always"),void 0===e.mod.parameters.schemes&&(e.mod.parameters.schemes=[]),e.mod.parameters["session-key"]||(e.mod.parameters["session-key"]="G_REGISTER_SESSION"),e.mod.parameters["session-duration"]||(e.mod.parameters["session-duration"]=3600),e.mod.parameters.subject||(e.mod.parameters.subject="Confirm registration"),e.mod.parameters["content-type"]||(e.mod.parameters["content-type"]="text/plain; charset=utf-8"),e.mod.parameters["body-pattern"]||(e.mod.parameters["body-pattern"]="The code is {CODE}\n\n"+window.location.href.split("?")[0].split("#")[0]+"?registration=<your_registration_plugin_name>&token={TOKEN}"),t.state={config:e.config,modSchemes:e.modSchemes,mod:e.mod,role:e.role,check:e.check,hasError:!1,errorList:{}},t.state.check&&t.checkParameters(),t.checkParameters=t.checkParameters.bind(t),t.addScope=t.addScope.bind(t),t.deleteScope=t.deleteScope.bind(t),t.addScheme=t.addScheme.bind(t),t}t.default=i}])}));